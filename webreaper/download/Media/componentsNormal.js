
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();(function(root,factory){if(typeof exports==="object"&&exports){module.exports=factory;}else if(typeof define==="function"&&define.amd){define(factory);}else{root.Mustache=factory;}}(this,(function(){var exports={};exports.name="mustache.js";exports.version="0.7.1";exports.tags=["{{","}}"];exports.Scanner=Scanner;exports.Context=Context;exports.Writer=Writer;var whiteRe=/\s*/;var spaceRe=/\s+/;var nonSpaceRe=/\S/;var eqRe=/\s*=/;var curlyRe=/\s*\}/;var tagRe=/#|\^|\/|>|\{|&|=|!/;function testRe(re,string){return RegExp.prototype.test.call(re,string);}
function isWhitespace(string){return!testRe(nonSpaceRe,string);}
var isArray=Array.isArray||function(obj){return Object.prototype.toString.call(obj)==="[object Array]";};function escapeRe(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");}
var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':'&quot;',"'":'&#39;',"/":'&#x2F;'};function escapeHtml(string){return String(string).replace(/[&<>"'\/]/g,function(s){return entityMap[s];});}
exports.escape=escapeHtml;function Scanner(string){this.string=string;this.tail=string;this.pos=0;}
Scanner.prototype.eos=function(){return this.tail==="";};Scanner.prototype.scan=function(re){var match=this.tail.match(re);if(match&&match.index===0){this.tail=this.tail.substring(match[0].length);this.pos+=match[0].length;return match[0];}
return"";};Scanner.prototype.scanUntil=function(re){var match,pos=this.tail.search(re);switch(pos){case-1:match=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,pos);this.tail=this.tail.substring(pos);this.pos+=pos;}
return match;};function Context(view,parent){this.view=view;this.parent=parent;this.clearCache();}
Context.make=function(view){return(view instanceof Context)?view:new Context(view);};Context.prototype.clearCache=function(){this._cache={};};Context.prototype.push=function(view){return new Context(view,this);};Context.prototype.lookup=function(name){var value=this._cache[name];if(!value){if(name==="."){value=this.view;}else{var context=this;while(context){if(name.indexOf(".")>0){var names=name.split("."),i=0;value=context.view;while(value&&i<names.length){value=value[names[i++]];}}else{value=context.view[name];}
if(value!=null){break;}
context=context.parent;}}
this._cache[name]=value;}
if(typeof value==="function"){value=value.call(this.view);}
return value;};function Writer(){this.clearCache();}
Writer.prototype.clearCache=function(){this._cache={};this._partialCache={};};Writer.prototype.compile=function(template,tags){var fn=this._cache[template];if(!fn){var tokens=exports.parse(template,tags);fn=this._cache[template]=this.compileTokens(tokens,template);}
return fn;};Writer.prototype.compilePartial=function(name,template,tags){var fn=this.compile(template,tags);this._partialCache[name]=fn;return fn;};Writer.prototype.compileTokens=function(tokens,template){var fn=compileTokens(tokens);var self=this;return function(view,partials){if(partials){if(typeof partials==="function"){self._loadPartial=partials;}else{for(var name in partials){self.compilePartial(name,partials[name]);}}}
return fn(self,Context.make(view),template);};};Writer.prototype.render=function(template,view,partials){return this.compile(template)(view,partials);};Writer.prototype._section=function(name,context,text,callback){var value=context.lookup(name);switch(typeof value){case"object":if(isArray(value)){var buffer="";for(var i=0,len=value.length;i<len;++i){buffer+=callback(this,context.push(value[i]));}
return buffer;}
return value?callback(this,context.push(value)):"";case"function":var self=this;var scopedRender=function(template){return self.render(template,context);};var result=value.call(context.view,text,scopedRender);return result!=null?result:"";default:if(value){return callback(this,context);}}
return"";};Writer.prototype._inverted=function(name,context,callback){var value=context.lookup(name);if(!value||(isArray(value)&&value.length===0)){return callback(this,context);}
return"";};Writer.prototype._partial=function(name,context){if(!(name in this._partialCache)&&this._loadPartial){this.compilePartial(name,this._loadPartial(name));}
var fn=this._partialCache[name];return fn?fn(context):"";};Writer.prototype._name=function(name,context){var value=context.lookup(name);if(typeof value==="function"){value=value.call(context.view);}
return(value==null)?"":String(value);};Writer.prototype._escaped=function(name,context){return exports.escape(this._name(name,context));};function sectionBounds(token){var start=token[3];var end=start;var tokens;while((tokens=token[4])&&tokens.length){token=tokens[tokens.length-1];end=token[3];}
return[start,end];}
function compileTokens(tokens){var subRenders={};function subRender(i,tokens,template){if(!subRenders[i]){var fn=compileTokens(tokens);subRenders[i]=function(writer,context){return fn(writer,context,template);};}
return subRenders[i];}
return function(writer,context,template){var buffer="";var token,sectionText;for(var i=0,len=tokens.length;i<len;++i){token=tokens[i];switch(token[0]){case"#":sectionText=template.slice.apply(template,sectionBounds(token));buffer+=writer._section(token[1],context,sectionText,subRender(i,token[4],template));break;case"^":buffer+=writer._inverted(token[1],context,subRender(i,token[4],template));break;case">":buffer+=writer._partial(token[1],context);break;case"&":buffer+=writer._name(token[1],context);break;case"name":buffer+=writer._escaped(token[1],context);break;case"text":buffer+=token[1];break;}}
return buffer;};}
function nestTokens(tokens){var tree=[];var collector=tree;var sections=[];var token,section;for(var i=0;i<tokens.length;++i){token=tokens[i];switch(token[0]){case"#":case"^":token[4]=[];sections.push(token);collector.push(token);collector=token[4];break;case"/":if(sections.length===0){throw new Error("Unopened section: "+token[1]);}
section=sections.pop();if(section[1]!==token[1]){throw new Error("Unclosed section: "+section[1]);}
if(sections.length>0){collector=sections[sections.length-1][4];}else{collector=tree;}
break;default:collector.push(token);}}
section=sections.pop();if(section){throw new Error("Unclosed section: "+section[1]);}
return tree;}
function squashTokens(tokens){var token,lastToken,squashedTokens=[];for(var i=0;i<tokens.length;++i){token=tokens[i];if(lastToken&&lastToken[0]==="text"&&token[0]==="text"){lastToken[1]+=token[1];lastToken[3]=token[3];}else{lastToken=token;squashedTokens.push(token);}}
return squashedTokens;}
function escapeTags(tags){if(tags.length!==2){throw new Error("Invalid tags: "+tags.join(" "));}
return[new RegExp(escapeRe(tags[0])+"\\s*"),new RegExp("\\s*"+escapeRe(tags[1]))];}
exports.parse=function(template,tags){template=template||'';tags=tags||exports.tags;var tagRes=escapeTags(tags);var scanner=new Scanner(template);var tokens=[],spaces=[],hasTag=false,nonSpace=false;function stripSpace(){if(hasTag&&!nonSpace){while(spaces.length){tokens.splice(spaces.pop(),1);}}else{spaces=[];}
hasTag=false;nonSpace=false;}
var start,type,value,chr;while(!scanner.eos()){start=scanner.pos;value=scanner.scanUntil(tagRes[0]);if(value){for(var i=0,len=value.length;i<len;++i){chr=value.charAt(i);if(isWhitespace(chr)){spaces.push(tokens.length);}else{nonSpace=true;}
tokens.push(["text",chr,start,start+1]);start+=1;if(chr==="\n"){stripSpace();}}}
start=scanner.pos;if(!scanner.scan(tagRes[0])){break;}
hasTag=true;type=scanner.scan(tagRe)||"name";scanner.scan(whiteRe);if(type==="="){value=scanner.scanUntil(eqRe);scanner.scan(eqRe);scanner.scanUntil(tagRes[1]);}else if(type==="{"){var closeRe=new RegExp("\\s*"+escapeRe("}"+tags[1]));value=scanner.scanUntil(closeRe);scanner.scan(curlyRe);scanner.scanUntil(tagRes[1]);type="&";}else{value=scanner.scanUntil(tagRes[1]);}
if(!scanner.scan(tagRes[1])){throw new Error("Unclosed tag at "+scanner.pos);}
tokens.push([type,value,start,scanner.pos]);if(type==="name"||type==="{"||type==="&"){nonSpace=true;}
if(type==="="){tags=value.split(spaceRe);tagRes=escapeTags(tags);}}
tokens=squashTokens(tokens);return nestTokens(tokens);};var _writer=new Writer();exports.clearCache=function(){return _writer.clearCache();};exports.compile=function(template,tags){return _writer.compile(template,tags);};exports.compilePartial=function(name,template,tags){return _writer.compilePartial(name,template,tags);};exports.compileTokens=function(tokens,template){return _writer.compileTokens(tokens,template);};exports.render=function(template,view,partials){return _writer.render(template,view,partials);};exports.to_html=function(template,view,partials,send){var result=exports.render(template,view,partials);if(typeof send==="function"){send(result);}else{return result;}};return exports;}())));(function(root,factory){"use strict";if(typeof define==="function"){define(["mustache"],factory);}else if(typeof root.Mustache==="object"){root.fumanchu=factory(root.Mustache);}else{var error=new Error("Fumanchu dependency error!");window.fumanchu=function(){throw error;};throw error;}}(this,function(Mustache){"use strict";var VERSION="0.1.0";var collectTypeAttribute="data-collect-type",collectAsAttribute="data-collect-as",defaultTemplateSelector='script[type="text/fumanchu-template"]',templates={},helpers={};function appendTo(fragment,query){document.querySelector(query||"body").appendChild(fragment);return fragment;}
function parseStr(html){var fragment=document.createDocumentFragment(),div=document.createElement('div'),collection={};div.innerHTML=html;var returnElements=div.querySelectorAll("["+collectAsAttribute+"]");var length=returnElements.length;for(var i=0;i<length;i++){var rel=returnElements[i];var type=rel.getAttribute(collectTypeAttribute);var name=rel.getAttribute(collectAsAttribute);if(type==="array"){if(!collection[name]){collection[name]=[];}else{if(typeof collection[name].push!=="function"){console.error("Error in fumanchu collection! Duplicate declaration: '"+name+"'.");continue;}}
collection[name].push(rel);}else if(!collection[name]){collection[name]=rel;}else{console.error("Error in fumanchu collection! Duplicate declaration: '"+name+"'.");continue;}
rel.removeAttribute(collectTypeAttribute);rel.removeAttribute(collectAsAttribute);}
while(div.firstChild){fragment.appendChild(div.firstChild);}
fragment.collection=collection;for(var el in collection){if(collection.hasOwnProperty(el)){fragment[el]=collection[el];}}
fragment.appendTo=function(query){return appendTo(fragment,query);};return fragment;}
function fixTemplate(template){return template.replace(/\{\{#([^\/\}]+)\/\}\}/g,"{{#$1}}{{/$1}}")}
function fumanchu(template,data,partials){template=templates[template]||fixTemplate(template);partials=partials||{};data=data||{};var h,t;for(h in helpers){if(helpers.hasOwnProperty(h)){if(!data[h]){data[h]=helpers[h];}}}
for(t in templates){if(templates.hasOwnProperty(t)){if(!partials[t]){partials[t]=templates[t];}}}
return parseStr(Mustache.render(template,data,partials));}
fumanchu.register={template:function(name,template){templates[name]=fixTemplate(template);},helper:function(name,fn){helpers[name]=fn;},helpers:function(obj){for(var i in obj){if(obj.hasOwnProperty(i)){this.helper(i,obj[i]);}}}};fumanchu.init=function(selector){selector=selector||defaultTemplateSelector;var mTemplates=document.querySelectorAll(selector)||[];for(var i=0;i<mTemplates.length;i++){var t=mTemplates[i];templates[t.id]=fixTemplate(t.innerHTML);}
return templates;};fumanchu.version=VERSION;return fumanchu;}));(function(k){function n(b){if(null===b||"object"!==typeof b)return b;var a=new b.constructor,c;for(c in b)b.hasOwnProperty(c)&&(a[c]=n(b[c]));return a}function o(b){var a={},c;for(c in b)if(b.hasOwnProperty(c)){a[c]={};for(var e in b[c])b[c].hasOwnProperty(e)&&(a[c][b[c][e]]=e)}return a}var a={error:{},model:{},parse:{},request:{},format:{},debugMessage:function(a){return k.videoplaza.debug&&k.videoplaza.debug[a]?k.videoplaza.debug[a]:a}};a.error.ParseError=function(a){this.message=a;this.name="ParseError"};a.error.ParseError.prototype=new k.Error;a.error.ParseError.prototype.constructor=a.error.ParseError;a.Tracker=function(){var b,d=function(){b=new a.request.VpTracker};d.prototype={reportError:function(a,d){return b.reportError(a,d)},track:function(a,d){return b.track(a,d)}};return d}();a.Tracker.errorEvents={creative:{invalidCreativeUri:"invalidCreativeUri",invalidCreative:"invalidCreative"}};a.Tracker.trackingEvents={ad:{impression:"0"},creative:{acceptInvitation:"1",clickThrough:"20",close:"7",creativeView:"90",collapse:"2",complete:"18",expand:"31",firstQuartile:"15",fullscreen:"37",midpoint:"16",mute:"32",pause:"34",resume:"36",rewind:"35",start:"14",thirdQuartile:"17",timeSpent:"100",unmute:"33"}};a.request.VpXHR=function(){};a.request.VpXHR.httpErrorCodeTranslation={503:"serviceUnavailableCode503",500:"internalServerErrorCode500",404:"requestedResourceNotFoundCode404",400:"badRequestToServerCode400","0":"requestCouldNotBeSentToServerCode0",ieError:"requestFailedError"};a.request.VpXHR.prototype.request=function(b,d,c,e){var f,g,h;d||(d=2E3);c||(c=function(){});e||(e=function(){});if(k.XMLHttpRequest)if(f=new k.XMLHttpRequest,"withCredentials"in f)f.open("GET",b,!0),g=!1,f.onreadystatechange=function(){4===f.readyState&&(200===f.status?c(f.responseText):g||e(a.request.VpXHR.httpErrorCodeTranslation[f.status]||"unknownError"),h&&k.clearTimeout(h))},f.send(),h=k.setTimeout(function(){g=!0;f.abort();e("requestTimeout")},d);else if(k.XDomainRequest){f=new k.XDomainRequest;f.onload=function(){c(f.responseText)};f.onerror=function(){e(a.request.VpXHR.httpErrorCodeTranslation.ieError||"unknownError")};f.onprogress=function(){};f.ontimeout=function(){e("requestTimeout")};try{f.open("GET",b),f.send()}catch(i){e(a.request.VpXHR.httpErrorCodeTranslation.ieError||"unknownError")}}else e("corsNotSupportedInBrowser")};a.request.Bucket=function(){};a.request.Bucket.isBucketEvent=function(){return!1};a.request.Bucket.prototype.add=function(){return!1};a.request.Bucket.prototype.empty=function(){return!1};a.request.VpTracker=function(){this.vpXHR=new a.request.VpXHR;this.bucket=new a.request.Bucket;this.blocked={}};a.request.VpTracker.errorEvents=n(a.Tracker.errorEvents);a.request.VpTracker.trackingEvents=n(a.Tracker.trackingEvents);a.request.VpTracker.trackingEvents.ad.impression2="3";a.request.VpTracker.trackingEvents.creative.creativeView2="91";a.request.VpTracker.trackingEvents.creative.acceptInvitation2="4";a.request.VpTracker.trackingEvents.creative.interaction="10";a.request.VpTracker.errorEventNames=o(a.request.VpTracker.errorEvents);a.request.VpTracker.trackingEventNames=o(a.request.VpTracker.trackingEvents);a.request.VpTracker.prototype.trackUris=function(b){for(var d="",c=0;c<b.length;c++)d=b[c]+"&rnd="+a.model.Trackable.generateUniqueId(),a.request.Bucket.isBucketEvent(d)?this.bucket.add(b[c]):this.vpXHR.request(d,2E3)};a.request.VpTracker.prototype.block=function(b,d){d||(d="");return b instanceof a.model.Trackable?this.blocked[b.uniqueId+d]=!0:!1};a.request.VpTracker.prototype.isBlocked=function(b,d){d||(d="");return b instanceof
a.model.Trackable?b.uniqueId+d in this.blocked:!1};a.request.VpTracker.prototype.trackCreativeEvent=function(b,d){var c,e=a.request.VpTracker.trackingEvents.creative;c=[e.clickThrough,e.creativeView,e.creativeView2];var f=[e.acceptInvitation,e.clickThrough,e.close,e.collapse,e.expand,e.fullscreen,e.pause,e.resume,e.rewind,e.mute,e.unmute],g=[e.acceptInvitation,e.interaction,e.start,e.firstQuartile,e.midpoint,e.thirdQuartile,e.complete],h=[e.creativeView];if(!(b instanceof a.model.Creative)||!a.request.VpTracker.trackingEventNames.creative[d]||b instanceof a.model.Companion&&0>c.indexOf(d))return!1;c=b.parent;if(this.isBlocked(c)||this.isBlocked(b))return!1;-1<f.indexOf(d)&&b.type!==a.model.Creative.creativeTypes.companion&&this.track(b,e.interaction);d===e.complete?this.track(b,e.thirdQuartile):d===e.thirdQuartile?this.track(b,e.midpoint):d===e.midpoint?this.track(b,e.firstQuartile):d===e.firstQuartile&&this.track(b,e.start);if(d===e.timeSpent)return!0;if(d===e.clickThrough&&(b.type===a.model.Creative.creativeTypes.nonLinear||b.type===a.model.Creative.creativeTypes.companion))return b.resourceType!==a.model.NonLinearCreative.resourceTypes.staticResource?!1:!0;!this.isBlocked(c,d)&&!this.isBlocked(b,d)?(-1<g.indexOf(d)&&this.block(c,d),-1<h.indexOf(d)&&this.block(b,d),this.trackUris(b.trackingUris[a.request.VpTracker.trackingEventNames.creative[d]])):d===e.acceptInvitation?this.track(b,a.request.VpTracker.trackingEvents.creative.acceptInvitation2):d===e.creativeView&&this.track(b,a.request.VpTracker.trackingEvents.creative.creativeView2);return!0};a.request.VpTracker.prototype.trackAdEvent=function(b,d){if(b.constructor!==a.model.Ad||!a.request.VpTracker.trackingEventNames.ad[d]||this.isBlocked(b))return!1;this.isBlocked(b,d)?d===a.request.VpTracker.trackingEvents.ad.impression&&this.track(b,a.request.VpTracker.trackingEvents.ad.impression2):(d===a.request.VpTracker.trackingEvents.ad.impression&&this.block(b,d),this.trackUris(b.trackingUris[a.request.VpTracker.trackingEventNames.ad[d]]));return!0};a.request.VpTracker.prototype.track=function(b,d){return!b?!1:b.constructor===a.model.Ad?this.trackAdEvent(b,d):b instanceof a.model.Creative?this.trackCreativeEvent(b,d):!1};a.request.VpTracker.prototype.createDummy=function(b){var d;if(!b||b.constructor!==a.model.Ad)return!1;d=new a.model.Ad;d.type=a.model.Ad.adTypes.inventory;for(var c=0;c<b.trackingUris.impression.length;c++)-1<b.trackingUris.impression[c].search("aid="+b.id)&&d.trackingUris.impression.push(b.trackingUris.impression[c].replace("aid="+b.id,"aid="+d.id));return d};a.request.VpTracker.prototype.reportError=function(b,d){var c,e;if(!b||!(b instanceof a.model.Creative)||!a.request.VpTracker.errorEventNames.creative[d])return!1;c=b.parent;if(this.isBlocked(c)||this.isBlocked(b))return!1;b.type===a.model.Creative.creativeTypes.companion?this.block(b):(this.isBlocked(c,a.request.VpTracker.trackingEvents.ad.impression)||(e=this.createDummy(c),this.track(e,a.request.VpTracker.trackingEvents.ad.impression)),this.block(c));return!0};a.request.VpAdCallModule=function(b,d){this.vpHost=b;this.adCallModuleSettings=d;this.videoplazaXHR=new a.request.VpXHR;this.vastParser=new a.parse.VastXmlParser};a.request.VpAdCallModule.prototype.verifyContentMetadata=function(b){var d={contentForm:"",duration:""};if(b){if(this.hasData(b.contentForm)){var c=b.contentForm.toLowerCase();d.contentForm="true";if("shortform"!==c&&"longform"!==c)throw Error(a.debugMessage("invalidContentForm"));}else d.contentForm="contentFormIsMissing";d.duration=this.validateNumber(b.duration,"duration")}else throw Error(a.debugMessage("contentMetadataIsUndefined"));return d};a.request.VpAdCallModule.prototype.verifyRequestSettings=function(b,d){var c={height:"",width:"",maxBitRate:"",insertionPointType:"",playbackPosition:""},e="";if(b)if(c.height=this.validateNumber(b.height,"height"),c.width=this.validateNumber(b.width,"width"),c.maxBitRate=this.validateNumber(b.maxBitRate,"maxBitRate"),b.insertionPointType)switch(e=b.insertionPointType.toLowerCase(),e){case"onbeforecontent":case"oncontentend":case"playbacktime":c.insertionPointType="true";break;case"playbackposition":c.insertionPointType="true";if(b.playbackPosition){c.playbackPosition="true";if(!this.isNumber(b.playbackPosition))throw Error(a.debugMessage("invalidPlaybackPosition"));if(this.hasData(d)&&Number(b.playbackPosition)>Number(d))throw Error(a.debugMessage("playbackPositionIsGtDuration"));}else throw Error(a.debugMessage("undefinedPlaybackPosition"));break;default:throw Error(a.debugMessage("invalidInsertionPointType"));}else throw Error(a.debugMessage("undefinedInsertionPointType"));else throw Error(a.debugMessage("requestSettingsIsUndefined"));return c};a.request.VpAdCallModule.prototype.verifyVpHost=function(b){if(!/(^(http|https)\:\/\/)?([a-z0-9\-]+)\.([a-z0-9\-]+)\.[a-z]+/i.test(b))throw Error(a.debugMessage("invalidVpHost"));return!0};a.request.VpAdCallModule.prototype.validateNumber=function(b,d){if(b){if(this.isNumber(b)){if(0>b)throw Error(a.debugMessage(d+"IsLessThanZero"));return"true"}throw Error(a.debugMessage(d+"IsNaN"));}return d+"IsMissing"};a.request.VpAdCallModule.prototype.translateInsertionPointType=function(b){switch(b.toLowerCase()){case"onbeforecontent":return"p";case"playbackposition":return"m";case"oncontentend":return"po";case"playbacktime":return"o";default:throw Error(a.debugMessage("invalidInsertionPointType"));}};a.request.VpAdCallModule.prototype.buildUrl=function(b,d){var c=this.vpHost;-1===c.indexOf("http://")&&-1===c.indexOf("https://")&&(c="http://"+c);c.lastIndexOf("/")!==c.length-1&&(c+="/");c=c+"proxy/distributor/v2?rt=vast_2.0&pf=html5"+("&cv=h5_"+k.videoplaza.versionNumber);if(b){this.hasData(b.flags)&&(c+="&f="+encodeURIComponent(b.flags.join(",")));this.hasData(b.tags)&&(c+="&t="+encodeURIComponent(b.tags.join(",")));var e="";this.hasData(b.category)&&(e+=b.category);b.contentPartner&&this.hasData(b.contentPartner)&&(e=this.hasData(e)?e+=","+b.contentPartner:b.contentPartner);this.hasData(e)&&(c+="&s="+encodeURIComponent(e));this.hasData(b.contentForm)&&(c+="&cf="+this.translateContentForm(b.contentForm));this.hasData(b.contentId)&&(c+="&ci="+encodeURIComponent(b.contentId));this.hasData(b.duration)&&(c+="&cd="+b.duration)}d&&(this.hasData(d.width)&&(c+="&vwt="+d.width),this.hasData(d.height)&&(c+="&vht="+d.height),this.hasData(d.maxBitRate)&&(c+="&vbw="+d.maxBitRate),this.hasData(d.insertionPointType)&&(e=d.insertionPointType.toLowerCase(),c+="&tt="+this.translateInsertionPointType(e),"playbackposition"===e&&this.hasData(d.playbackPosition)&&(c+="&bp="+encodeURIComponent(d.playbackPosition))));this.adCallModuleSettings&&(this.hasData(this.adCallModuleSettings.deviceContainer)&&(c+="&dcid="+encodeURIComponent(this.adCallModuleSettings.deviceContainer)),this.hasData(this.adCallModuleSettings.persistentId)&&(c+="&pid="+encodeURIComponent(this.adCallModuleSettings.persistentId)));e=this.getURLParameter("vppreview");this.hasData(e)&&(c+="&vppreview="+e);c+="&st="+encodeURIComponent("0:0,3,4,10,20:1,91,100");return c+="&rnd="+a.model.Trackable.generateUniqueId()};a.request.VpAdCallModule.prototype.translateContentForm=function(a){return"longform"===a.toLowerCase()?"long_form":"short_form"};a.request.VpAdCallModule.prototype.hasData=function(a){return a?a.constructor===Array&&0===a.length?!1:!0:!1};a.request.VpAdCallModule.prototype.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)};a.request.VpAdCallModule.prototype.getURLParameter=function(a){var d="",a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(k.location.href.toString());null!==a&&(d=a[1]);return d};a.request.VpAdCallModule.prototype.isWrapper=function(){return!1};a.request.VpAdCallModule.prototype.requestAds=function(b,d,c,e){var f=this,g,h=function(a){g=f.parseTicket(a,e);f.isWrapper(g)?f.xhrRequestSucceeded(g,h,e):g&&c(g)};if("function"!==typeof c&&"function"!==typeof e)throw Error(a.debugMessage("adRequestMissingMandotoryCallbacks"));try{this.verifyVpHost(this.vpHost),this.verifyContentMetadata(b),this.verifyRequestSettings(d,b.duration),this.videoplazaXHR.request(this.buildUrl(b,d),5E3,h,e)}catch(i){e(i.message)}};a.request.VpAdCallModule.prototype.requestThirdPartyVast=function(){};a.request.VpAdCallModule.prototype.parseTicket=function(a){return this.vastParser.parse(a)};a.model.Trackable=function(){this.uniqueId=this.trackingUris=null};a.model.Trackable.generateTrackingUris=function(a){var d={},c;for(c in a)a.hasOwnProperty(c)&&(d[c]=[]);return d};a.model.Trackable.generateUniqueId=function(){return Math.floor(1E16*Math.random())};a.model.Ad=function(){this.campaignId=null;this.creatives=[];this.goalId=this.customCampaignId=this.customGoalId=this.customId=null;this.id="0";this.labels={};this.type=null;this.trackingUris=a.model.Trackable.generateTrackingUris(a.request.VpTracker.trackingEvents.ad);this.uniqueId=a.model.Trackable.generateUniqueId()};a.model.Ad.adTypes={inventory:"inventory"};a.model.Ad.prototype=new a.model.Trackable;a.model.Ad.prototype.constructor=a.model.Ad;a.model.Creative=function(){this.type=this.parent=this.id=this.duration=this.clickThroughUri=null};a.model.Creative.creativeTypes={linear:"linear",nonLinear:"nonLinear",companion:"companion"};a.model.Creative.prototype=new a.model.Trackable;a.model.Creative.prototype.constructor=a.model.Creative;a.model.MediaFile=function(){this.width=this.uri=this.mimeType=this.id=this.height=this.deliveryMethod=this.bitRate=null};a.model.LinearCreative=function(b){this.mediaFiles=[];this.parent=b||null;this.type=a.model.Creative.creativeTypes.linear;this.uniqueId=a.model.Trackable.generateUniqueId();this.trackingUris=a.model.Trackable.generateTrackingUris(a.request.VpTracker.trackingEvents.creative)};a.model.LinearCreative.prototype=new a.model.Creative;a.model.LinearCreative.prototype.constructor=a.model.LinearCreative;a.model.NonLinearCreative=function(b){this.width=this.resourceType=this.resource=this.mimeType=this.height=null;this.parent=b||null;this.type=a.model.Creative.creativeTypes.nonLinear;this.uniqueId=a.model.Trackable.generateUniqueId();this.trackingUris=a.model.Trackable.generateTrackingUris(a.request.VpTracker.trackingEvents.creative)};a.model.NonLinearCreative.resourceTypes={staticResource:"staticResource",iFrame:"iFrame",html:"html"};a.model.NonLinearCreative.prototype=new a.model.Creative;a.model.NonLinearCreative.prototype.constructor=a.model.NonLinearCreative;a.model.Companion=function(b){this.zoneType=this.zoneId=null;this.parent=b||null;this.type=a.model.Creative.creativeTypes.companion;this.uniqueId=a.model.Trackable.generateUniqueId();this.trackingUris=a.model.Trackable.generateTrackingUris(a.request.VpTracker.trackingEvents.creative)};a.model.Companion.zoneTypes={html:"html"};a.model.Companion.prototype=new a.model.NonLinearCreative;a.model.Companion.prototype.constructor=a.model.Companion;a.parse.VastXmlParser=function(){this.parser=new k.DOMParser};a.parse.VastXmlParser.prototype.getAttributeValue=function(a,d){var c;return a&&a.attributes&&(c=a.attributes.getNamedItem(d))?c.value:null};a.parse.VastXmlParser.prototype.createTrackingUris=function(b,d){var c,e,f,g;c={};e=d.getElementsByTagName("Tracking");for(var h=0;h<e.length;h++)if(f=e.item(h),g=this.getAttributeValue(f,"event"),g in a.request.VpTracker.trackingEvents.ad||g in a.request.VpTracker.trackingEvents.creative||g in a.request.VpTracker.trackingEventNames.ad||g in
a.request.VpTracker.trackingEventNames.creative)g in a.request.VpTracker.trackingEventNames.ad?g=a.request.VpTracker.trackingEventNames.ad[g]:g in a.request.VpTracker.trackingEventNames.creative&&(g=a.request.VpTracker.trackingEventNames.creative[g]),c[g]||(c[g]=[]),c[g].push(f.textContent);for(g in c)b[g]&&(b[g]=b[g].concat(c[g]));return b};a.parse.VastXmlParser.prototype.createCreative=function(b,d,c){for(var e=[],f,g={Linear:a.model.Creative.creativeTypes.linear,NonLinearAds:a.model.Creative.creativeTypes.nonLinear,CompanionAds:a.model.Creative.creativeTypes.companion},h,i,j,k={StaticResource:a.model.NonLinearCreative.resourceTypes.staticResource,IFrameResource:a.model.NonLinearCreative.resourceTypes.iFrame,HTMLResource:a.model.NonLinearCreative.resourceTypes.html},l=0;l<b.length;l++)if(f=this.getAttributeValue(b[l],"id"),h=g[b[l].firstChild.nodeName],h===a.model.Creative.creativeTypes.linear){h=new a.model.LinearCreative(d);h.id=f;i=b[l].getElementsByTagName("Duration");f=h;if(0<i.length)if(i=i[0].textContent.split(":"),j=0,0<i.length&&3>=i.length){for(var m=0;m<i.length;m++)j+=Number(i[i.length-m-1]*(m?Math.pow(60,m):1));i=isNaN(j)?null:j}else i=null;else i=null;f.duration=i;f=b[l].getElementsByTagName("TrackingEvents");h.trackingUris=0<f.length?this.createTrackingUris(h.trackingUris,f[0]):{};i=b[l].getElementsByTagName("ClickTracking");for(f=0;f<i.length;f++)h.trackingUris.clickThrough.push(i[f].textContent);f=b[l].getElementsByTagName("ClickThrough");h.clickThroughUri=0<f.length?f[0].textContent:"";i=b[l].getElementsByTagName("MediaFile");for(f=0;f<i.length;f++)j=new a.model.MediaFile,j.bitRate=this.getAttributeValue(i[f],"bitrate"),j.deliveryMethod=this.getAttributeValue(i[f],"delivery"),j.height=this.getAttributeValue(i[f],"height"),j.id=this.getAttributeValue(i[f],"id"),j.mimeType=this.getAttributeValue(i[f],"type"),j.uri=i[f].textContent,j.width=this.getAttributeValue(i[f],"width"),h.mediaFiles.push(j);e.push(h)}else if(h===a.model.Creative.creativeTypes.nonLinear)b[l].getElementsByTagName("NonLinear");else if(h===a.model.Creative.creativeTypes.companion){j=b[l].getElementsByTagName("Companion");for(f=0;f<j.length;f++)h=new a.model.Companion(d),h.trackingUris=this.createTrackingUris(h.trackingUris,j[f].getElementsByTagName("TrackingEvents")[0]),i=j[f].firstChild,h.resourceType=k[i.nodeName],h.resource=i.textContent,h.height=this.getAttributeValue(j[f],"height"),h.id=this.getAttributeValue(j[f],"id"),h.width=this.getAttributeValue(j[f],"width"),c&&c[h.id]?(h.zoneId=c[h.id].zoneId,h.zoneType=c[h.id].zoneMethod):"undefined"!==typeof console&&console.log("No matching companion in AdInfo."),e.push(h)}return e};a.parse.VastXmlParser.prototype.createAds=function(b){for(var d=[],c,e,f,g,h=[],i={COMPANION_BANNER_JAVASCRIPT:a.model.Companion.zoneTypes.html},j=0;j<b.length;j++){c=new a.model.Ad;c.id=this.getAttributeValue(b[j],"id");null===c.id&&(c.id="0",c.type=a.model.Ad.adTypes.inventory);f=b[j].getElementsByTagName("Extension");for(e=0;e<f.length;e++)if("AdServer"===this.getAttributeValue(f[e],"type")&&"Videoplaza"===this.getAttributeValue(f[e],"name")){g=f[e].getElementsByTagName("AdInfo")[0];c.campaignId=this.getAttributeValue(g,"cid");c.customId=this.getAttributeValue(g,"customaid");c.customGoalId=this.getAttributeValue(g,"customgid");c.customCampaignId=this.getAttributeValue(g,"customcid");c.goalId=this.getAttributeValue(g,"gid");c.type=this.translateIncorrectAdType(this.getAttributeValue(g,"format"));g=g.getElementsByTagName("Companion");for(var k=0;k<g.length;k++)h[this.getAttributeValue(g[k],"id")]={zoneId:this.getAttributeValue(g[k],"zone"),zoneMethod:i[this.getAttributeValue(g[k],"zoneType")]}}f=b[j].getElementsByTagName("Impression");for(e=0;e<f.length;e++)c.trackingUris.impression.push(f[e].textContent);e=b[j].getElementsByTagName("Creative");c.creatives=this.createCreative(e,c,h);d.push(c)}return d};a.parse.VastXmlParser.prototype.translateIncorrectAdType=function(a){return"spot_standard"===a?"standard_spot":a};a.parse.VastXmlParser.prototype.parse=function(b){var d;try{d=this.parser.parseFromString(b,"application/xml")}catch(c){"undefined"!==typeof console&&console.log(a.debugMessage("nonValidXML"));return}if(b=d.documentElement)if("VAST"!==b.nodeName)b.getElementsByTagName("parsererror")&&0<b.getElementsByTagName("parsererror").length&&"undefined"!==typeof console&&console.log(a.debugMessage("nonValidXML")),"undefined"!==typeof console&&console.log(a.debugMessage("nonValidVASTTicket"));else return this.createAds(b.getElementsByTagName("Ad"))};a.AdCallModule=function(){var b,d=function(c,d){b=new a.request.VpAdCallModule(c,d)};d.prototype={requestAds:function(a,d,f,g){b.requestAds(a,d,f,g)}};return d}();k.videoplaza||(k.videoplaza={});k.videoplaza.core=a;k.videoplaza.buildDate="20120518";k.videoplaza.versionNumber="1.0.12.7.0"})(window);(function(e,t){function n(t){return e.less[t.split("/")[1]]}function f(){r.env==="development"?(r.optimization=0,r.watchTimer=setInterval(function(){r.watchMode&&g(function(e,t,n,r,i){t&&S(t.toCSS(),r,i.lastModified)})},r.poll)):r.optimization=3}function m(){var e=document.getElementsByTagName("style");for(var t=0;t<e.length;t++)e[t].type.match(p)&&(new r.Parser({filename:document.location.href.replace(/#.*$/,""),dumpLineNumbers:r.dumpLineNumbers})).parse(e[t].innerHTML||"",function(n,r){var i=r.toCSS(),s=e[t];s.type="text/css",s.styleSheet?s.styleSheet.cssText=i:s.innerHTML=i})}function g(e,t){for(var n=0;n<r.sheets.length;n++)w(r.sheets[n],e,t,r.sheets.length-(n+1))}function y(e,t){var n=b(e),r=b(t),i,s,o,u,a="";if(n.hostPart!==r.hostPart)return"";s=Math.max(r.directories.length,n.directories.length);for(i=0;i<s;i++)if(r.directories[i]!==n.directories[i])break;u=r.directories.slice(i),o=n.directories.slice(i);for(i=0;i<u.length-1;i++)a+="../";for(i=0;i<o.length-1;i++)a+=o[i]+"/";return a}function b(e,t){var n=/^((?:[a-z-]+:)?\/\/(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/,r=e.match(n),i={},s=[],o,u;if(!r)throw new Error("Could not parse sheet href - '"+e+"'");if(!r[1]||r[2]){u=t.match(n);if(!u)throw new Error("Could not parse page url - '"+t+"'");r[1]=u[1],r[2]||(r[3]=u[3]+r[3])}if(r[3]){s=r[3].replace("\\","/").split("/");for(o=0;o<s.length;o++)s[o]===".."&&o>0&&(s.splice(o-1,2),o-=2)}return i.hostPart=r[1],i.directories=s,i.path=r[1]+s.join("/"),i.fileUrl=i.path+(r[4]||""),i.url=i.fileUrl+(r[5]||""),i}function w(t,n,i,s){var o=t.contents||{},u=t.files||{},a=b(t.href,e.location.href),f=a.url,c=l&&l.getItem(f),h=l&&l.getItem(f+":timestamp"),p={css:c,timestamp:h},d;r.relativeUrls?r.rootpath?t.entryPath?d=b(r.rootpath+y(a.path,t.entryPath)).path:d=r.rootpath:d=a.path:r.rootpath?d=r.rootpath:t.entryPath?d=t.entryPath:d=a.path,x(f,t.type,function(e,l){v+=e.replace(/@import .+?;/ig,"");if(!i&&p&&l&&(new Date(l)).valueOf()===(new Date(p.timestamp)).valueOf())S(p.css,t),n(null,null,e,t,{local:!0,remaining:s},f);else try{o[f]=e,(new r.Parser({optimization:r.optimization,paths:[a.path],entryPath:t.entryPath||a.path,mime:t.type,filename:f,rootpath:d,relativeUrls:t.relativeUrls,contents:o,files:u,dumpLineNumbers:r.dumpLineNumbers})).parse(e,function(r,i){if(r)return k(r,f);try{n(r,i,e,t,{local:!1,lastModified:l,remaining:s},f),N(document.getElementById("less-error-message:"+E(f)))}catch(r){k(r,f)}})}catch(c){k(c,f)}},function(e,t){throw new Error("Couldn't load "+t+" ("+e+")")})}function E(e){return e.replace(/^[a-z]+:\/\/?[^\/]+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")}function S(e,t,n){var r,i=t.href||"",s="less:"+(t.title||E(i));if((r=document.getElementById(s))===null){r=document.createElement("style"),r.type="text/css",t.media&&(r.media=t.media),r.id=s;var o=t&&t.nextSibling||null;(o||document.getElementsByTagName("head")[0]).parentNode.insertBefore(r,o)}if(r.styleSheet)try{r.styleSheet.cssText=e}catch(u){throw new Error("Couldn't reassign styleSheet.cssText.")}else(function(e){r.childNodes.length>0?r.firstChild.nodeValue!==e.nodeValue&&r.replaceChild(e,r.firstChild):r.appendChild(e)})(document.createTextNode(e));if(n&&l){C("saving "+i+" to cache.");try{l.setItem(i,e),l.setItem(i+":timestamp",n)}catch(u){C("failed to save")}}}function x(e,t,n,i){function a(t,n,r){t.status>=200&&t.status<300?n(t.responseText,t.getResponseHeader("Last-Modified")):typeof r=="function"&&r(t.status,e)}var s=T(),u=o?r.fileAsync:r.async;typeof s.overrideMimeType=="function"&&s.overrideMimeType("text/css"),s.open("GET",e,u),s.setRequestHeader("Accept",t||"text/x-less, text/css; q=0.9, */*; q=0.5"),s.send(null),o&&!r.fileAsync?s.status===0||s.status>=200&&s.status<300?n(s.responseText):i(s.status,e):u?s.onreadystatechange=function(){s.readyState==4&&a(s,n,i)}:a(s,n,i)}function T(){if(e.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(t){return C("browser doesn't support AJAX."),null}}function N(e){return e&&e.parentNode.removeChild(e)}function C(e){r.env=="development"&&typeof console!="undefined"&&console.log("less: "+e)}function k(e,t){var n="less-error-message:"+E(t),i='<li><label>{line}</label><pre class="{class}">{content}</pre></li>',s=document.createElement("div"),o,u,a=[],f=e.filename||t,l=f.match(/([^\/]+(\?.*)?)$/)[1];s.id=n,s.className="less-error-message",u="<h3>"+(e.message||"There is an error in your .less file")+"</h3>"+'<p>in <a href="'+f+'">'+l+"</a> ";var c=function(e,t,n){e.extract[t]&&a.push(i.replace(/\{line\}/,parseInt(e.line)+(t-1)).replace(/\{class\}/,n).replace(/\{content\}/,e.extract[t]))};e.stack?u+="<br/>"+e.stack.split("\n").slice(1).join("<br/>"):e.extract&&(c(e,0,""),c(e,1,"line"),c(e,2,""),u+="on line "+e.line+", column "+(e.column+1)+":</p>"+"<ul>"+a.join("")+"</ul>"),s.innerHTML=u,S([".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),s.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),r.env=="development"&&(o=setInterval(function(){document.body&&(document.getElementById(n)?document.body.replaceChild(s,document.getElementById(n)):document.body.insertBefore(s,document.body.firstChild),clearInterval(o))},10))}Array.isArray||(Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"||e instanceof Array}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n=this.length>>>0;for(var r=0;r<n;r++)r in this&&e.call(t,this[r],r,this)}),Array.prototype.map||(Array.prototype.map=function(e){var t=this.length>>>0,n=new Array(t),r=arguments[1];for(var i=0;i<t;i++)i in this&&(n[i]=e.call(r,this[i],i,this));return n}),Array.prototype.filter||(Array.prototype.filter=function(e){var t=[],n=arguments[1];for(var r=0;r<this.length;r++)e.call(n,this[r])&&t.push(this[r]);return t}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=this.length>>>0,n=0;if(t===0&&arguments.length===1)throw new TypeError;if(arguments.length>=2)var r=arguments[1];else do{if(n in this){r=this[n++];break}if(++n>=t)throw new TypeError}while(!0);for(;n<t;n++)n in this&&(r=e.call(null,r,this[n],n,this));return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=arguments[1]||0;if(!t)return-1;if(n>=t)return-1;n<0&&(n+=t);for(;n<t;n++){if(!Object.prototype.hasOwnProperty.call(this,n))continue;if(e===this[n])return n}return-1}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),String.prototype.trim||(String.prototype.trim=function(){return String(this).replace(/^\s\s*/,"").replace(/\s\s*$/,"")});var r,i,s;typeof environment=="object"&&{}.toString.call(environment)==="[object Environment]"?(typeof e=="undefined"?r={}:r=e.less={},i=r.tree={},r.mode="rhino"):typeof e=="undefined"?(r=exports,i=n("./tree"),r.mode="node"):(typeof e.less=="undefined"&&(e.less={}),r=e.less,i=e.less.tree={},r.mode="browser"),r.Parser=function(t){function g(){a=c[u],f=o,h=o}function y(){c[u]=a,o=f,h=o}function b(){o>h&&(c[u]=c[u].slice(o-h),h=o)}function w(e){var t=e.charCodeAt(0);return t===32||t===10||t===9}function E(e){var t,n,r,i,a;if(e instanceof Function)return e.call(p.parsers);if(typeof e=="string")t=s.charAt(o)===e?e:null,r=1,b();else{b();if(!(t=e.exec(c[u])))return null;r=t[0].length}if(t)return S(r),typeof t=="string"?t:t.length===1?t[0]:t}function S(e){var t=o,n=u,r=o+c[u].length,i=o+=e;while(o<r){if(!w(s.charAt(o)))break;o++}return c[u]=c[u].slice(e+(o-i)),h=o,c[u].length===0&&u<c.length-1&&u++,t!==o||n!==u}function x(e,t){var n=E(e);if(!!n)return n;T(t||(typeof e=="string"?"expected '"+e+"' got '"+s.charAt(o)+"'":"unexpected token"))}function T(e,t){var n=new Error(e);throw n.index=o,n.type=t||"Syntax",n}function N(e){return typeof e=="string"?s.charAt(o)===e:e.test(c[u])?!0:!1}function C(e,t){return e.filename&&t.filename&&e.filename!==t.filename?p.imports.contents[e.filename]:s}function k(e,t){for(var n=e,r=-1;n>=0&&t.charAt(n)!=="\n";n--)r++;return{line:typeof e=="number"?(t.slice(0,e).match(/\n/g)||"").length:null,column:r}}function L(e){return r.mode==="browser"||r.mode==="rhino"?e.filename:n("path").resolve(e.filename)}function A(e,t,n){return{lineNumber:k(e,t).line+1,fileName:L(n)}}function O(e,t){var n=C(e,t),r=k(e.index,n),i=r.line,s=r.column,o=n.split("\n");this.type=e.type||"Syntax",this.message=e.message,this.filename=e.filename||t.filename,this.index=e.index,this.line=typeof i=="number"?i+1:null,this.callLine=e.call&&k(e.call,n).line+1,this.callExtract=o[k(e.call,n).line],this.stack=e.stack,this.column=s,this.extract=[o[i-1],o[i],o[i+1]]}var s,o,u,a,f,l,c,h,p,d=this,t=t||{};t.contents||(t.contents={}),t.rootpath=t.rootpath||"",t.files||(t.files={});var v=function(){},m=this.imports={paths:t.paths||[],queue:[],files:t.files,contents:t.contents,mime:t.mime,error:null,push:function(e,n){var i=this;this.queue.push(e),r.Parser.importer(e,this.paths,function(t,r,s){i.queue.splice(i.queue.indexOf(e),1);var o=s in i.files;i.files[s]=r,t&&!i.error&&(i.error=t),n(t,r,o),i.queue.length===0&&v(i.error)},t)}};return this.env=t=t||{},this.optimization="optimization"in this.env?this.env.optimization:1,this.env.filename=this.env.filename||null,p={imports:m,parse:function(e,a){var f,d,m,g,y,b,w=[],S,x=null;o=u=h=l=0,s=e.replace(/\r\n/g,"\n"),s=s.replace(/^\uFEFF/,""),c=function(e){var n=0,r=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,i=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,o=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,u=0,a,f=e[0],l;for(var c=0,h,p;c<s.length;){r.lastIndex=c,(a=r.exec(s))&&a.index===c&&(c+=a[0].length,f.push(a[0])),h=s.charAt(c),i.lastIndex=o.lastIndex=c;if(a=o.exec(s))if(a.index===c){c+=a[0].length,f.push(a[0]);continue}if(!l&&h==="/"){p=s.charAt(c+1);if(p==="/"||p==="*")if(a=i.exec(s))if(a.index===c){c+=a[0].length,f.push(a[0]);continue}}switch(h){case"{":if(!l){u++,f.push(h);break};case"}":if(!l){u--,f.push(h),e[++n]=f=[];break};case"(":if(!l){l=!0,f.push(h);break};case")":if(l){l=!1,f.push(h);break};default:f.push(h)}c++}return u!=0&&(x=new O({index:c-1,type:"Parse",message:u>0?"missing closing `}`":"missing opening `{`",filename:t.filename},t)),e.map(function(e){return e.join("")})}([[]]);if(x)return a(x,t);try{f=new i.Ruleset([],E(this.parsers.primary)),f.root=!0}catch(T){return a(new O(T,t))}f.toCSS=function(e){var s,o,u;return function(s,o){var u=[],a;s=s||{},typeof o=="object"&&!Array.isArray(o)&&(o=Object.keys(o).map(function(e){var t=o[e];return t instanceof i.Value||(t instanceof i.Expression||(t=new i.Expression([t])),t=new i.Value([t])),new i.Rule("@"+e,t,!1,0)}),u=[new i.Ruleset(null,o)]);try{var f=e.call(this,{frames:u}).toCSS([],{compress:s.compress||!1,dumpLineNumbers:t.dumpLineNumbers})}catch(l){throw new O(l,t)}if(a=p.imports.error)throw a instanceof O?a:new O(a,t);return s.yuicompress&&r.mode==="node"?n("ycssmin").cssmin(f):s.compress?f.replace(/(\s)+/g,"$1"):f}}(f.eval);if(o<s.length-1){o=l,b=s.split("\n"),y=(s.slice(0,o).match(/\n/g)||"").length+1;for(var N=o,C=-1;N>=0&&s.charAt(N)!=="\n";N--)C++;x={type:"Parse",message:"Syntax Error on line "+y,index:o,filename:t.filename,line:y,column:C,extract:[b[y-2],b[y-1],b[y]]}}this.imports.queue.length>0?v=function(e){e=x||e,e?a(e):a(null,f)}:a(x,f)},parsers:{primary:function(){var e,t=[];while((e=E(this.mixin.definition)||E(this.rule)||E(this.ruleset)||E(this.mixin.call)||E(this.comment)||E(this.directive))||E(/^[\s\n]+/)||E(/^;+/))e&&t.push(e);return t},comment:function(){var e;if(s.charAt(o)!=="/")return;if(s.charAt(o+1)==="/")return new i.Comment(E(/^\/\/.*/),!0);if(e=E(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))return new i.Comment(e)},entities:{quoted:function(){var e,t=o,n;s.charAt(t)==="~"&&(t++,n=!0);if(s.charAt(t)!=='"'&&s.charAt(t)!=="'")return;n&&E("~");if(e=E(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/))return new i.Quoted(e[0],e[1]||e[2],n)},keyword:function(){var e;if(e=E(/^[_A-Za-z-][_A-Za-z0-9-]*/))return i.colors.hasOwnProperty(e)?new i.Color(i.colors[e].slice(1)):new i.Keyword(e)},call:function(){var e,n,r,s,a=o;if(!(e=/^([\w-]+|%|progid:[\w\.]+)\(/.exec(c[u])))return;e=e[1],n=e.toLowerCase();if(n==="url")return null;o+=e.length;if(n==="alpha"){s=E(this.alpha);if(typeof s!="undefined")return s}E("("),r=E(this.entities.arguments);if(!E(")"))return;if(e)return new i.Call(e,r,a,t.filename)},arguments:function(){var e=[],t;while(t=E(this.entities.assignment)||E(this.expression)){e.push(t);if(!E(","))break}return e},literal:function(){return E(this.entities.ratio)||E(this.entities.dimension)||E(this.entities.color)||E(this.entities.quoted)||E(this.entities.unicodeDescriptor)},assignment:function(){var e,t;if((e=E(/^\w+(?=\s?=)/i))&&E("=")&&(t=E(this.entity)))return new i.Assignment(e,t)},url:function(){var e;if(s.charAt(o)!=="u"||!E(/^url\(/))return;return e=E(this.entities.quoted)||E(this.entities.variable)||E(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",x(")"),new i.URL(e.value!=null||e instanceof i.Variable?e:new i.Anonymous(e),t.rootpath)},variable:function(){var e,n=o;if(s.charAt(o)==="@"&&(e=E(/^@@?[\w-]+/)))return new i.Variable(e,n,t.filename)},variableCurly:function(){var e,n,r=o;if(s.charAt(o)==="@"&&(n=E(/^@\{([\w-]+)\}/)))return new i.Variable("@"+n[1],r,t.filename)},color:function(){var e;if(s.charAt(o)==="#"&&(e=E(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/)))return new i.Color(e[1])},dimension:function(){var e,t=s.charCodeAt(o);if(t>57||t<43||t===47||t==44)return;if(e=E(/^([+-]?\d*\.?\d+)(px|%|em|pc|ex|in|deg|s|ms|pt|cm|mm|rad|grad|turn|dpi|dpcm|dppx|rem|vw|vh|vmin|vm|ch)?/))return new i.Dimension(e[1],e[2])},ratio:function(){var e,t=s.charCodeAt(o);if(t>57||t<48)return;if(e=E(/^(\d+\/\d+)/))return new i.Ratio(e[1])},unicodeDescriptor:function(){var e;if(e=E(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/))return new i.UnicodeDescriptor(e[0])},javascript:function(){var e,t=o,n;s.charAt(t)==="~"&&(t++,n=!0);if(s.charAt(t)!=="`")return;n&&E("~");if(e=E(/^`([^`]*)`/))return new i.JavaScript(e[1],o,n)}},variable:function(){var e;if(s.charAt(o)==="@"&&(e=E(/^(@[\w-]+)\s*:/)))return e[1]},shorthand:function(){var e,t;if(!N(/^[@\w.%-]+\/[@\w.-]+/))return;g();if((e=E(this.entity))&&E("/")&&(t=E(this.entity)))return new i.Shorthand(e,t);y()},mixin:{call:function(){var e=[],n,r,u=[],a=[],f,l,c,h,p,d,v,m=o,b=s.charAt(o),w,S,C=!1;if(b!=="."&&b!=="#")return;g();while(n=E(/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/))e.push(new i.Element(r,n,o)),r=E(">");if(E("(")){p=[];while(c=E(this.expression)){h=null,S=c;if(c.value.length==1){var k=c.value[0];k instanceof i.Variable&&E(":")&&(p.length>0&&(d&&T("Cannot mix ; and , as delimiter types"),v=!0),S=x(this.expression),h=w=k.name)}p.push(S),a.push({name:h,value:S});if(E(","))continue;if(E(";")||d)v&&T("Cannot mix ; and , as delimiter types"),d=!0,p.length>1&&(S=new i.Value(p)),u.push({name:w,value:S}),w=null,p=[],v=!1}x(")")}f=d?u:a,E(this.important)&&(C=!0);if(e.length>0&&(E(";")||N("}")))return new i.mixin.Call(e,f,m,t.filename,C);y()},definition:function(){var e,t=[],n,r,u,a,f,c=!1;if(s.charAt(o)!=="."&&s.charAt(o)!=="#"||N(/^[^{]*\}/))return;g();if(n=E(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/)){e=n[1];do{E(this.comment);if(s.charAt(o)==="."&&E(/^\.{3}/)){c=!0,t.push({variadic:!0});break}if(!(u=E(this.entities.variable)||E(this.entities.literal)||E(this.entities.keyword)))break;if(u instanceof i.Variable)if(E(":"))a=x(this.expression,"expected expression"),t.push({name:u.name,value:a});else{if(E(/^\.{3}/)){t.push({name:u.name,variadic:!0}),c=!0;break}t.push({name:u.name})}else t.push({value:u})}while(E(",")||E(";"));E(")")||(l=o,y()),E(this.comment),E(/^when/)&&(f=x(this.conditions,"expected condition")),r=E(this.block);if(r)return new i.mixin.Definition(e,t,r,f,c);y()}}},entity:function(){return E(this.entities.literal)||E(this.entities.variable)||E(this.entities.url)||E(this.entities.call)||E(this.entities.keyword)||E(this.entities.javascript)||E(this.comment)},end:function(){return E(";")||N("}")},alpha:function(){var e;if(!E(/^\(opacity=/i))return;if(e=E(/^\d+/)||E(this.entities.variable))return x(")"),new i.Alpha(e)},element:function(){var e,t,n,r;n=E(this.combinator),e=E(/^(?:\d+\.\d+|\d+)%/)||E(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||E("*")||E("&")||E(this.attribute)||E(/^\([^()@]+\)/)||E(/^[\.#](?=@)/)||E(this.entities.variableCurly),e||E("(")&&(r=E(this.entities.variableCurly)||E(this.entities.variable)||E(this.selector))&&E(")")&&(e=new i.Paren(r));if(e)return new i.Element(n,e,o)},combinator:function(){var e,t=s.charAt(o);if(t===">"||t==="+"||t==="~"||t==="|"){o++;while(s.charAt(o).match(/\s/))o++;return new i.Combinator(t)}return s.charAt(o-1).match(/\s/)?new i.Combinator(" "):new i.Combinator(null)},selector:function(){var e,t,n=[],r,u;if(E("("))return e=E(this.entity),E(")")?new i.Selector([new i.Element("",e,o)]):null;while(t=E(this.element)){r=s.charAt(o),n.push(t);if(r==="{"||r==="}"||r===";"||r===","||r===")")break}if(n.length>0)return new i.Selector(n)},attribute:function(){var e="",t,n,r;if(!E("["))return;if(t=E(/^(?:[_A-Za-z0-9-]|\\.)+/)||E(this.entities.quoted))(r=E(/^[|~*$^]?=/))&&(n=E(this.entities.quoted)||E(/^[\w-]+/))?e=[t,r,n.toCSS?n.toCSS():n].join(""):e=t;if(!E("]"))return;if(e)return"["+e+"]"},block:function(){var e;if(E("{")&&(e=E(this.primary))&&E("}"))return e},ruleset:function(){var e=[],n,r,u,a;g(),t.dumpLineNumbers&&(a=A(o,s,t));while(n=E(this.selector)){e.push(n),E(this.comment);if(!E(","))break;E(this.comment)}if(e.length>0&&(r=E(this.block))){var f=new i.Ruleset(e,r,t.strictImports);return t.dumpLineNumbers&&(f.debugInfo=a),f}l=o,y()},rule:function(){var e,t,n=s.charAt(o),r,a;g();if(n==="."||n==="#"||n==="&")return;if(e=E(this.variable)||E(this.property)){e.charAt(0)!="@"&&(a=/^([^@+\/'"*`(;{}-]*);/.exec(c[u]))?(o+=a[0].length-1,t=new i.Anonymous(a[1])):e==="font"?t=E(this.font):t=E(this.value),r=E(this.important);if(t&&E(this.end))return new i.Rule(e,t,r,f);l=o,y()}},"import":function(){var e,n,r=o;g();var s=E(/^@import(?:-(once))?\s+/);if(s&&(e=E(this.entities.quoted)||E(this.entities.url))){n=E(this.mediaFeatures);if(E(";"))return new i.Import(e,m,n,s[1]==="once",r,t.rootpath)}y()},mediaFeature:function(){var e,t,n=[];do if(e=E(this.entities.keyword))n.push(e);else if(E("(")){t=E(this.property),e=E(this.entity);if(!E(")"))return null;if(t&&e)n.push(new i.Paren(new i.Rule(t,e,null,o,!0)));else{if(!e)return null;n.push(new i.Paren(e))}}while(e);if(n.length>0)return new i.Expression(n)},mediaFeatures:function(){var e,t=[];do if(e=E(this.mediaFeature)){t.push(e);if(!E(","))break}else if(e=E(this.entities.variable)){t.push(e);if(!E(","))break}while(e);return t.length>0?t:null},media:function(){var e,n,r,u;t.dumpLineNumbers&&(u=A(o,s,t));if(E(/^@media/)){e=E(this.mediaFeatures);if(n=E(this.block))return r=new i.Media(n,e),t.dumpLineNumbers&&(r.debugInfo=u),r}},directive:function(){var e,n,r,u,a,f,l,c,h,p;if(s.charAt(o)!=="@")return;if(n=E(this["import"])||E(this.media))return n;g(),e=E(/^@[a-z-]+/);if(!e)return;l=e,e.charAt(1)=="-"&&e.indexOf("-",2)>0&&(l="@"+e.slice(e.indexOf("-",2)+1));switch(l){case"@font-face":c=!0;break;case"@viewport":case"@top-left":case"@top-left-corner":case"@top-center":case"@top-right":case"@top-right-corner":case"@bottom-left":case"@bottom-left-corner":case"@bottom-center":case"@bottom-right":case"@bottom-right-corner":case"@left-top":case"@left-middle":case"@left-bottom":case"@right-top":case"@right-middle":case"@right-bottom":c=!0;break;case"@page":case"@document":case"@supports":case"@keyframes":c=!0,h=!0;break;case"@namespace":p=!0}h&&(e+=" "+(E(/^[^{]+/)||"").trim());if(c){if(r=E(this.block))return new i.Directive(e,r)}else if((n=p?E(this.expression):E(this.entity))&&E(";")){var d=new i.Directive(e,n);return t.dumpLineNumbers&&(d.debugInfo=A(o,s,t)),d}y()},font:function(){var e=[],t=[],n,r,s,o;while(o=E(this.shorthand)||E(this.entity))t.push(o);e.push(new i.Expression(t));if(E(","))while(o=E(this.expression)){e.push(o);if(!E(","))break}return new i.Value(e)},value:function(){var e,t=[],n;while(e=E(this.expression)){t.push(e);if(!E(","))break}if(t.length>0)return new i.Value(t)},important:function(){if(s.charAt(o)==="!")return E(/^! *important/)},sub:function(){var e;if(E("(")&&(e=E(this.expression))&&E(")"))return e},multiplication:function(){var e,t,n,r;if(e=E(this.operand)){while(!N(/^\/[*\/]/)&&(n=E("/")||E("*"))&&(t=E(this.operand)))r=new i.Operation(n,[r||e,t]);return r||e}},addition:function(){var e,t,n,r;if(e=E(this.multiplication)){while((n=E(/^[-+]\s+/)||!w(s.charAt(o-1))&&(E("+")||E("-")))&&(t=E(this.multiplication)))r=new i.Operation(n,[r||e,t]);return r||e}},conditions:function(){var e,t,n=o,r;if(e=E(this.condition)){while(E(",")&&(t=E(this.condition)))r=new i.Condition("or",r||e,t,n);return r||e}},condition:function(){var e,t,n,r,s=o,u=!1;E(/^not/)&&(u=!0),x("(");if(e=E(this.addition)||E(this.entities.keyword)||E(this.entities.quoted))return(r=E(/^(?:>=|=<|[<=>])/))?(t=E(this.addition)||E(this.entities.keyword)||E(this.entities.quoted))?n=new i.Condition(r,e,t,s,u):T("expected expression"):n=new i.Condition("=",e,new i.Keyword("true"),s,u),x(")"),E(/^and/)?new i.Condition("and",n,E(this.condition)):n},operand:function(){var e,t=s.charAt(o+1);s.charAt(o)==="-"&&(t==="@"||t==="(")&&(e=E("-"));var n=E(this.sub)||E(this.entities.dimension)||E(this.entities.color)||E(this.entities.variable)||E(this.entities.call);return e?new i.Operation("*",[new i.Dimension(-1),n]):n},expression:function(){var e,t,n=[],r;while(e=E(this.addition)||E(this.entity))n.push(e);if(n.length>0)return new i.Expression(n)},property:function(){var e;if(e=E(/^(\*?-?[_a-z0-9-]+)\s*:/))return e[1]}}}};if(r.mode==="browser"||r.mode==="rhino")r.Parser.importer=function(e,t,n,r){!/^([a-z-]+:)?\//.test(e)&&t.length>0&&(e=t[0]+e),w({href:e,title:e,type:r.mime,contents:r.contents,files:r.files,rootpath:r.rootpath,entryPath:r.entryPath,relativeUrls:r.relativeUrls},function(e,i,s,o,u,a){e&&typeof r.errback=="function"?r.errback.call(null,a,t,n,r):n.call(null,e,i,a)},!0)};(function(e){function t(t){return e.functions.hsla(t.h,t.s,t.l,t.a)}function n(t,n){return t instanceof e.Dimension&&t.unit=="%"?parseFloat(t.value*n/100):r(t)}function r(t){if(t instanceof e.Dimension)return parseFloat(t.unit=="%"?t.value/100:t.value);if(typeof t=="number")return t;throw{error:"RuntimeError",message:"color functions take numbers as parameters"}}function i(e){return Math.min(1,Math.max(0,e))}e.functions={rgb:function(e,t,n){return this.rgba(e,t,n,1)},rgba:function(t,i,s,o){var u=[t,i,s].map(function(e){return n(e,256)});return o=r(o),new e.Color(u,o)},hsl:function(e,t,n){return this.hsla(e,t,n,1)},hsla:function(e,t,n,i){function u(e){return e=e<0?e+1:e>1?e-1:e,e*6<1?o+(s-o)*e*6:e*2<1?s:e*3<2?o+(s-o)*(2/3-e)*6:o}e=r(e)%360/360,t=r(t),n=r(n),i=r(i);var s=n<=.5?n*(t+1):n+t-n*t,o=n*2-s;return this.rgba(u(e+1/3)*255,u(e)*255,u(e-1/3)*255,i)},hsv:function(e,t,n){return this.hsva(e,t,n,1)},hsva:function(e,t,n,i){e=r(e)%360/360*360,t=r(t),n=r(n),i=r(i);var s,o;s=Math.floor(e/60%6),o=e/60-s;var u=[n,n*(1-t),n*(1-o*t),n*(1-(1-o)*t)],a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return this.rgba(u[a[s][0]]*255,u[a[s][1]]*255,u[a[s][2]]*255,i)},hue:function(t){return new e.Dimension(Math.round(t.toHSL().h))},saturation:function(t){return new e.Dimension(Math.round(t.toHSL().s*100),"%")},lightness:function(t){return new e.Dimension(Math.round(t.toHSL().l*100),"%")},red:function(t){return new e.Dimension(t.rgb[0])},green:function(t){return new e.Dimension(t.rgb[1])},blue:function(t){return new e.Dimension(t.rgb[2])},alpha:function(t){return new e.Dimension(t.toHSL().a)},luma:function(t){return new e.Dimension(Math.round((.2126*(t.rgb[0]/255)+.7152*(t.rgb[1]/255)+.0722*(t.rgb[2]/255))*t.alpha*100),"%")},saturate:function(e,n){var r=e.toHSL();return r.s+=n.value/100,r.s=i(r.s),t(r)},desaturate:function(e,n){var r=e.toHSL();return r.s-=n.value/100,r.s=i(r.s),t(r)},lighten:function(e,n){var r=e.toHSL();return r.l+=n.value/100,r.l=i(r.l),t(r)},darken:function(e,n){var r=e.toHSL();return r.l-=n.value/100,r.l=i(r.l),t(r)},fadein:function(e,n){var r=e.toHSL();return r.a+=n.value/100,r.a=i(r.a),t(r)},fadeout:function(e,n){var r=e.toHSL();return r.a-=n.value/100,r.a=i(r.a),t(r)},fade:function(e,n){var r=e.toHSL();return r.a=n.value/100,r.a=i(r.a),t(r)},spin:function(e,n){var r=e.toHSL(),i=(r.h+n.value)%360;return r.h=i<0?360+i:i,t(r)},mix:function(t,n,r){r||(r=new e.Dimension(50));var i=r.value/100,s=i*2-1,o=t.toHSL().a-n.toHSL().a,u=((s*o==-1?s:(s+o)/(1+s*o))+1)/2,a=1-u,f=[t.rgb[0]*u+n.rgb[0]*a,t.rgb[1]*u+n.rgb[1]*a,t.rgb[2]*u+n.rgb[2]*a],l=t.alpha*i+n.alpha*(1-i);return new e.Color(f,l)},greyscale:function(t){return this.desaturate(t,new e.Dimension(100))},contrast:function(e,t,n,r){return e.rgb?(typeof n=="undefined"&&(n=this.rgba(255,255,255,1)),typeof t=="undefined"&&(t=this.rgba(0,0,0,1)),typeof r=="undefined"?r=.43:r=r.value,(.2126*(e.rgb[0]/255)+.7152*(e.rgb[1]/255)+.0722*(e.rgb[2]/255))*e.alpha<r?n:t):null},e:function(t){return new e.Anonymous(t instanceof e.JavaScript?t.evaluated:t)},escape:function(t){return new e.Anonymous(encodeURI(t.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},"%":function(t){var n=Array.prototype.slice.call(arguments,1),r=t.value;for(var i=0;i<n.length;i++)r=r.replace(/%[sda]/i,function(e){var t=e.match(/s/i)?n[i].value:n[i].toCSS();return e.match(/[A-Z]$/)?encodeURIComponent(t):t});return r=r.replace(/%%/g,"%"),new e.Quoted('"'+r+'"',r)},unit:function(t,n){return new e.Dimension(t.value,n?n.toCSS():"")},round:function(e,t){var n=typeof t=="undefined"?0:t.value;return this._math(function(e){return e.toFixed(n)},e)},ceil:function(e){return this._math(Math.ceil,e)},floor:function(e){return this._math(Math.floor,e)},_math:function(t,n){if(n instanceof e.Dimension)return new e.Dimension(t(parseFloat(n.value)),n.unit);if(typeof n=="number")return t(n);throw{type:"Argument",message:"argument must be a number"}},argb:function(t){return new e.Anonymous(t.toARGB())},percentage:function(t){return new e.Dimension(t.value*100,"%")},color:function(t){if(t instanceof e.Quoted)return new e.Color(t.value.slice(1));throw{type:"Argument",message:"argument must be a string"}},iscolor:function(t){return this._isa(t,e.Color)},isnumber:function(t){return this._isa(t,e.Dimension)},isstring:function(t){return this._isa(t,e.Quoted)},iskeyword:function(t){return this._isa(t,e.Keyword)},isurl:function(t){return this._isa(t,e.URL)},ispixel:function(t){return t instanceof e.Dimension&&t.unit==="px"?e.True:e.False},ispercentage:function(t){return t instanceof e.Dimension&&t.unit==="%"?e.True:e.False},isem:function(t){return t instanceof e.Dimension&&t.unit==="em"?e.True:e.False},_isa:function(t,n){return t instanceof n?e.True:e.False},multiply:function(e,t){var n=e.rgb[0]*t.rgb[0]/255,r=e.rgb[1]*t.rgb[1]/255,i=e.rgb[2]*t.rgb[2]/255;return this.rgb(n,r,i)},screen:function(e,t){var n=255-(255-e.rgb[0])*(255-t.rgb[0])/255,r=255-(255-e.rgb[1])*(255-t.rgb[1])/255,i=255-(255-e.rgb[2])*(255-t.rgb[2])/255;return this.rgb(n,r,i)},overlay:function(e,t){var n=e.rgb[0]<128?2*e.rgb[0]*t.rgb[0]/255:255-2*(255-e.rgb[0])*(255-t.rgb[0])/255,r=e.rgb[1]<128?2*e.rgb[1]*t.rgb[1]/255:255-2*(255-e.rgb[1])*(255-t.rgb[1])/255,i=e.rgb[2]<128?2*e.rgb[2]*t.rgb[2]/255:255-2*(255-e.rgb[2])*(255-t.rgb[2])/255;return this.rgb(n,r,i)},softlight:function(e,t){var n=t.rgb[0]*e.rgb[0]/255,r=n+e.rgb[0]*(255-(255-e.rgb[0])*(255-t.rgb[0])/255-n)/255;n=t.rgb[1]*e.rgb[1]/255;var i=n+e.rgb[1]*(255-(255-e.rgb[1])*(255-t.rgb[1])/255-n)/255;n=t.rgb[2]*e.rgb[2]/255;var s=n+e.rgb[2]*(255-(255-e.rgb[2])*(255-t.rgb[2])/255-n)/255;return this.rgb(r,i,s)},hardlight:function(e,t){var n=t.rgb[0]<128?2*t.rgb[0]*e.rgb[0]/255:255-2*(255-t.rgb[0])*(255-e.rgb[0])/255,r=t.rgb[1]<128?2*t.rgb[1]*e.rgb[1]/255:255-2*(255-t.rgb[1])*(255-e.rgb[1])/255,i=t.rgb[2]<128?2*t.rgb[2]*e.rgb[2]/255:255-2*(255-t.rgb[2])*(255-e.rgb[2])/255;return this.rgb(n,r,i)},difference:function(e,t){var n=Math.abs(e.rgb[0]-t.rgb[0]),r=Math.abs(e.rgb[1]-t.rgb[1]),i=Math.abs(e.rgb[2]-t.rgb[2]);return this.rgb(n,r,i)},exclusion:function(e,t){var n=e.rgb[0]+t.rgb[0]*(255-e.rgb[0]-e.rgb[0])/255,r=e.rgb[1]+t.rgb[1]*(255-e.rgb[1]-e.rgb[1])/255,i=e.rgb[2]+t.rgb[2]*(255-e.rgb[2]-e.rgb[2])/255;return this.rgb(n,r,i)},average:function(e,t){var n=(e.rgb[0]+t.rgb[0])/2,r=(e.rgb[1]+t.rgb[1])/2,i=(e.rgb[2]+t.rgb[2])/2;return this.rgb(n,r,i)},negation:function(e,t){var n=255-Math.abs(255-t.rgb[0]-e.rgb[0]),r=255-Math.abs(255-t.rgb[1]-e.rgb[1]),i=255-Math.abs(255-t.rgb[2]-e.rgb[2]);return this.rgb(n,r,i)},tint:function(e,t){return this.mix(this.rgb(255,255,255),e,t)},shade:function(e,t){return this.mix(this.rgb(0,0,0),e,t)}}})(n("./tree")),function(e){e.colors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(n("./tree")),function(e){e.Alpha=function(e){this.value=e},e.Alpha.prototype={toCSS:function(){return"alpha(opacity="+(this.value.toCSS?this.value.toCSS():this.value)+")"},eval:function(e){return this.value.eval&&(this.value=this.value.eval(e)),this}}}(n("../tree")),function(e){e.Anonymous=function(e){this.value=e.value||e},e.Anonymous.prototype={toCSS:function(){return this.value},eval:function(){return this},compare:function(e){if(!e.toCSS)return-1;var t=this.toCSS(),n=e.toCSS();return t===n?0:t<n?-1:1}}}(n("../tree")),function(e){e.Assignment=function(e,t){this.key=e,this.value=t},e.Assignment.prototype={toCSS:function(){return this.key+"="+(this.value.toCSS?this.value.toCSS():this.value)},eval:function(t){return this.value.eval?new e.Assignment(this.key,this.value.eval(t)):this}}}(n("../tree")),function(e){e.Call=function(e,t,n,r){this.name=e,this.args=t,this.index=n,this.filename=r},e.Call.prototype={eval:function(t){var n=this.args.map(function(e){return e.eval(t)}),r;if(this.name in e.functions)try{r=e.functions[this.name].apply(e.functions,n);if(r!=null)return r}catch(i){throw{type:i.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(i.message?": "+i.message:""),index:this.index,filename:this.filename}}return new e.Anonymous(this.name+"("+n.map(function(e){return e.toCSS(t)}).join(", ")+")")},toCSS:function(e){return this.eval(e).toCSS()}}}(n("../tree")),function(e){e.Color=function(e,t){Array.isArray(e)?this.rgb=e:e.length==6?this.rgb=e.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=e.split("").map(function(e){return parseInt(e+e,16)}),this.alpha=typeof t=="number"?t:1},e.Color.prototype={eval:function(){return this},toCSS:function(){return this.alpha<1?"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(", ")+")":"#"+this.rgb.map(function(e){return e=Math.round(e),e=(e>255?255:e<0?0:e).toString(16),e.length===1?"0"+e:e}).join("")},operate:function(t,n){var r=[];n instanceof e.Color||(n=n.toColor());for(var i=0;i<3;i++)r[i]=e.operate(t,this.rgb[i],n.rgb[i]);return new e.Color(r,this.alpha+n.alpha)},toHSL:function(){var e=this.rgb[0]/255,t=this.rgb[1]/255,n=this.rgb[2]/255,r=this.alpha,i=Math.max(e,t,n),s=Math.min(e,t,n),o,u,a=(i+s)/2,f=i-s;if(i===s)o=u=0;else{u=a>.5?f/(2-i-s):f/(i+s);switch(i){case e:o=(t-n)/f+(t<n?6:0);break;case t:o=(n-e)/f+2;break;case n:o=(e-t)/f+4}o/=6}return{h:o*360,s:u,l:a,a:r}},toARGB:function(){var e=[Math.round(this.alpha*255)].concat(this.rgb);return"#"+e.map(function(e){return e=Math.round(e),e=(e>255?255:e<0?0:e).toString(16),e.length===1?"0"+e:e}).join("")},compare:function(e){return e.rgb?e.rgb[0]===this.rgb[0]&&e.rgb[1]===this.rgb[1]&&e.rgb[2]===this.rgb[2]&&e.alpha===this.alpha?0:-1:-1}}}(n("../tree")),function(e){e.Comment=function(e,t){this.value=e,this.silent=!!t},e.Comment.prototype={toCSS:function(e){return e.compress?"":this.value},eval:function(){return this}}}(n("../tree")),function(e){e.Condition=function(e,t,n,r,i){this.op=e.trim(),this.lvalue=t,this.rvalue=n,this.index=r,this.negate=i},e.Condition.prototype.eval=function(e){var t=this.lvalue.eval(e),n=this.rvalue.eval(e),r=this.index,i,i=function(e){switch(e){case"and":return t&&n;case"or":return t||n;default:if(t.compare)i=t.compare(n);else{if(!n.compare)throw{type:"Type",message:"Unable to perform comparison",index:r};i=n.compare(t)}switch(i){case-1:return e==="<"||e==="=<";case 0:return e==="="||e===">="||e==="=<";case 1:return e===">"||e===">="}}}(this.op);return this.negate?!i:i}}(n("../tree")),function(e){e.Dimension=function(e,t){this.value=parseFloat(e),this.unit=t||null},e.Dimension.prototype={eval:function(){return this},toColor:function(){return new e.Color([this.value,this.value,this.value])},toCSS:function(){var e=this.value+this.unit;return e},operate:function(t,n){return new e.Dimension(e.operate(t,this.value,n.value),this.unit||n.unit)},compare:function(t){return t instanceof e.Dimension?t.value>this.value?-1:t.value<this.value?1:t.unit&&this.unit!==t.unit?-1:0:-1}}}(n("../tree")),function(e){e.Directive=function(t,n){this.name=t,Array.isArray(n)?(this.ruleset=new e.Ruleset([],n),this.ruleset.allowImports=!0):this.value=n},e.Directive.prototype={toCSS:function(e,t){return this.ruleset?(this.ruleset.root=!0,this.name+(t.compress?"{":" {\n  ")+this.ruleset.toCSS(e,t).trim().replace(/\n/g,"\n  ")+(t.compress?"}":"\n}\n")):this.name+" "+this.value.toCSS()+";\n"},eval:function(t){var n=this;return this.ruleset&&(t.frames.unshift(this),n=new e.Directive(this.name),n.ruleset=this.ruleset.eval(t),t.frames.shift()),n},variable:function(t){return e.Ruleset.prototype.variable.call(this.ruleset,t)},find:function(){return e.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return e.Ruleset.prototype.rulesets.apply(this.ruleset)}}}(n("../tree")),function(e){e.Element=function(t,n,r){this.combinator=t instanceof e.Combinator?t:new e.Combinator(t),typeof n=="string"?this.value=n.trim():n?this.value=n:this.value="",this.index=r},e.Element.prototype.eval=function(t){return new e.Element(this.combinator,this.value.eval?this.value.eval(t):this.value,this.index)},e.Element.prototype.toCSS=function(e){var t=this.value.toCSS?this.value.toCSS(e):this.value;return t==""&&this.combinator.value.charAt(0)=="&"?"":this.combinator.toCSS(e||{})+t},e.Combinator=function(e){e===" "?this.value=" ":this.value=e?e.trim():""},e.Combinator.prototype.toCSS=function(e){return{"":""," ":" ",":":" :","+":e.compress?"+":" + ","~":e.compress?"~":" ~ ",">":e.compress?">":" > ","|":e.compress?"|":" | "}[this.value]}}(n("../tree")),function(e){e.Expression=function(e){this.value=e},e.Expression.prototype={eval:function(t){return this.value.length>1?new e.Expression(this.value.map(function(e){return e.eval(t)})):this.value.length===1?this.value[0].eval(t):this},toCSS:function(e){return this.value.map(function(t){return t.toCSS?t.toCSS(e):""}).join(" ")}}}(n("../tree")),function(e){e.Import=function(t,n,r,i,s,o){var u=this;this.once=i,this.index=s,this._path=t,this.features=r&&new e.Value(r),this.rootpath=o,t instanceof e.Quoted?this.path=/(\.[a-z]*$)|([\?;].*)$/.test(t.value)?t.value:t.value+".less":this.path=t.value.value||t.value,this.css=/css([\?;].*)?$/.test(this.path),this.css||n.push(this.path,function(t,n,r){t&&(t.index=s),r&&u.once&&(u.skip=r),u.root=n||new e.Ruleset([],[])})},e.Import.prototype={toCSS:function(e){var t=this.features?" "+this.features.toCSS(e):"";return this.css?(typeof this._path.value=="string"&&!/^(?:[a-z-]+:|\/)/.test(this._path.value)&&(this._path.value=this.rootpath+this._path.value),"@import "+this._path.toCSS()+t+";\n"):""},eval:function(t){var n,r=this.features&&this.features.eval(t);return this.skip?[]:this.css?this:(n=new e.Ruleset([],this.root.rules.slice(0)),n.evalImports(t),this.features?new e.Media(n.rules,this.features.value):n.rules)}}}(n("../tree")),function(e){e.JavaScript=function(e,t,n){this.escaped=n,this.expression=e,this.index=t},e.JavaScript.prototype={eval:function(t){var n,r=this,i={},s=this.expression.replace(/@\{([\w-]+)\}/g,function(n,i){return e.jsify((new e.Variable("@"+i,r.index)).eval(t))});try{s=new Function("return ("+s+")")}catch(o){throw{message:"JavaScript evaluation error: `"+s+"`",index:this.index}}for(var u in t.frames[0].variables())i[u.slice(1)]={value:t.frames[0].variables()[u].value,toJS:function(){return this.value.eval(t).toCSS()}};try{n=s.call(i)}catch(o){throw{message:"JavaScript evaluation error: '"+o.name+": "+o.message+"'",index:this.index}}return typeof n=="string"?new e.Quoted('"'+n+'"',n,this.escaped,this.index):Array.isArray(n)?new e.Anonymous(n.join(", ")):new e.Anonymous(n)}}}(n("../tree")),function(e){e.Keyword=function(e){this.value=e},e.Keyword.prototype={eval:function(){return this},toCSS:function(){return this.value},compare:function(t){return t instanceof e.Keyword?t.value===this.value?0:1:-1}},e.True=new e.Keyword("true"),e.False=new e.Keyword("false")}(n("../tree")),function(e){e.Media=function(t,n){var r=this.emptySelectors();this.features=new e.Value(n),this.ruleset=new e.Ruleset(r,t),this.ruleset.allowImports=!0},e.Media.prototype={toCSS:function(e,t){var n=this.features.toCSS(t);return this.ruleset.root=e.length===0||e[0].multiMedia,"@media "+n+(t.compress?"{":" {\n  ")+this.ruleset.toCSS(e,t).trim().replace(/\n/g,"\n  ")+(t.compress?"}":"\n}\n")},eval:function(t){t.mediaBlocks||(t.mediaBlocks=[],t.mediaPath=[]);var n=new e.Media([],[]);return this.debugInfo&&(this.ruleset.debugInfo=this.debugInfo,n.debugInfo=this.debugInfo),n.features=this.features.eval(t),t.mediaPath.push(n),t.mediaBlocks.push(n),t.frames.unshift(this.ruleset),n.ruleset=this.ruleset.eval(t),t.frames.shift(),t.mediaPath.pop(),t.mediaPath.length===0?n.evalTop(t):n.evalNested(t)},variable:function(t){return e.Ruleset.prototype.variable.call(this.ruleset,t)},find:function(){return e.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return e.Ruleset.prototype.rulesets.apply(this.ruleset)},emptySelectors:function(){var t=new e.Element("","&",0);return[new e.Selector([t])]},evalTop:function(t){var n=this;if(t.mediaBlocks.length>1){var r=this.emptySelectors();n=new e.Ruleset(r,t.mediaBlocks),n.multiMedia=!0}return delete t.mediaBlocks,delete t.mediaPath,n},evalNested:function(t){var n,r,i=t.mediaPath.concat([this]);for(n=0;n<i.length;n++)r=i[n].features instanceof e.Value?i[n].features.value:i[n].features,i[n]=Array.isArray(r)?r:[r];return this.features=new e.Value(this.permute(i).map(function(t){t=t.map(function(t){return t.toCSS?t:new e.Anonymous(t)});for(n=t.length-1;n>0;n--)t.splice(n,0,new e.Anonymous("and"));return new e.Expression(t)})),new e.Ruleset([],[])},permute:function(e){if(e.length===0)return[];if(e.length===1)return e[0];var t=[],n=this.permute(e.slice(1));for(var r=0;r<n.length;r++)for(var i=0;i<e[0].length;i++)t.push([e[0][i]].concat(n[r]));return t},bubbleSelectors:function(t){this.ruleset=new e.Ruleset(t.slice(0),[this.ruleset])}}}(n("../tree")),function(e){e.mixin={},e.mixin.Call=function(t,n,r,i,s){this.selector=new e.Selector(t),this.arguments=n,this.index=r,this.filename=i,this.important=s},e.mixin.Call.prototype={eval:function(t){var n,r,i,s=[],o=!1,u,a,f,l,c;i=this.arguments&&this.arguments.map(function(e){return{name:e.name,value:e.value.eval(t)}});for(u=0;u<t.frames.length;u++)if((n=t.frames[u].find(this.selector)).length>0){c=!0;for(a=0;a<n.length;a++){r=n[a],l=!1;for(f=0;f<t.frames.length;f++)if(!(r instanceof e.mixin.Definition)&&r===(t.frames[f].originalRuleset||t.frames[f])){l=!0;break}if(l)continue;if(r.matchArgs(i,t)){if(!r.matchCondition||r.matchCondition(i,t))try{Array.prototype.push.apply(s,r.eval(t,i,this.important).rules)}catch(h){throw{message:h.message,index:this.index,filename:this.filename,stack:h.stack}}o=!0}}if(o)return s}throw c?{type:"Runtime",message:"No matching definition was found for `"+this.selector.toCSS().trim()+"("+(i?i.map(function(e){var t="";return e.name&&(t+=e.name+":"),e.value.toCSS?t+=e.value.toCSS():t+="???",t}).join(", "):"")+")`",index:this.index,filename:this.filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.filename}}},e.mixin.Definition=function(t,n,r,i,s){this.name=t,this.selectors=[new e.Selector([new e.Element(null,t)])],this.params=n,this.condition=i,this.variadic=s,this.arity=n.length,this.rules=r,this._lookups={},this.required=n.reduce(function(e,t){return!t.name||t.name&&!t.value?e+1:e},0),this.parent=e.Ruleset.prototype,this.frames=[]},e.mixin.Definition.prototype={toCSS:function(){return""},variable:function(e){return this.parent.variable.call(this,e)},variables:function(){return this.parent.variables.call(this)},find:function(){return this.parent.find.apply(this,arguments)},rulesets:function(){return this.parent.rulesets.apply(this)},evalParams:function(t,n,r,i){var s=new e.Ruleset(null,[]),o,u,a=this.params.slice(0),f,l,c,h,p,d;if(r){r=r.slice(0);for(f=0;f<r.length;f++){u=r[f];if(h=u&&u.name){p=!1;for(l=0;l<a.length;l++)if(!i[l]&&h===a[l].name){i[l]=u.value.eval(t),s.rules.unshift(new e.Rule(h,u.value.eval(t))),p=!0;break}if(p){r.splice(f,1),f--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+r[f].name+" not found"}}}}d=0;for(f=0;f<a.length;f++){if(i[f])continue;u=r&&r[d];if(h=a[f].name)if(a[f].variadic&&r){o=[];for(l=d;l<r.length;l++)o.push(r[l].value.eval(t));s.rules.unshift(new e.Rule(h,(new e.Expression(o)).eval(t)))}else{c=u&&u.value;if(c)c=c.eval(t);else{if(!a[f].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+r.length+" for "+this.arity+")"};c=a[f].value.eval(n)}s.rules.unshift(new e.Rule(h,c)),i[f]=c}if(a[f].variadic&&r)for(l=d;l<r.length;l++)i[l]=r[l].value.eval(t);d++}return s},eval:function(t,n,r){var i=[],s=this.frames.concat(t.frames),o=this.evalParams(t,{frames:s},n,i),u,a,f,l;return o.rules.unshift(new e.Rule("@arguments",(new e.Expression(i)).eval(t))),a=r?this.parent.makeImportant.apply(this).rules:this.rules.slice(0),l=(new e.Ruleset(null,a)).eval({frames:[this,o].concat(s)}),l.originalRuleset=this,l},matchCondition:function(e,t){return this.condition&&!this.condition.eval({frames:[this.evalParams(t,{frames:this.frames.concat(t.frames)},e,[])].concat(t.frames)})?!1:!0},matchArgs:function(e,t){var n=e&&e.length||0,r,i;if(!this.variadic){if(n<this.required)return!1;if(n>this.params.length)return!1;if(this.required>0&&n>this.params.length)return!1}r=Math.min(n,this.arity);for(var s=0;s<r;s++)if(!this.params[s].name&&!this.params[s].variadic&&e[s].value.eval(t).toCSS()!=this.params[s].value.eval(t).toCSS())return!1;return!0}}}(n("../tree")),function(e){e.Operation=function(e,t){this.op=e.trim(),this.operands=t},e.Operation.prototype.eval=function(t){var n=this.operands[0].eval(t),r=this.operands[1].eval(t),i;if(n instanceof e.Dimension&&r instanceof e.Color){if(this.op!=="*"&&this.op!=="+")throw{name:"OperationError",message:"Can't substract or divide a color from a number"};i=r,r=n,n=i}if(!n.operate)throw{name:"OperationError",message:"Operation on an invalid type"};return n.operate(this.op,r)},e.operate=function(e,t,n){switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n}}}(n("../tree")),function(e){e.Paren=function(e){this.value=e},e.Paren.prototype={toCSS:function(e){return"("+this.value.toCSS(e)+")"},eval:function(t){return new e.Paren(this.value.eval(t))}}}(n("../tree")),function(e){e.Quoted=function(e,t,n,r){this.escaped=n,this.value=t||"",this.quote=e.charAt(0),this.index=r},e.Quoted.prototype={toCSS:function(){return this.escaped?this.value:this.quote+this.value+this.quote},eval:function(t){var n=this,r=this.value.replace(/`([^`]+)`/g,function(r,i){return(new e.JavaScript(i,n.index,!0)).eval(t).value}).replace(/@\{([\w-]+)\}/g,function(r,i){var s=(new e.Variable("@"+i,n.index)).eval(t);return s instanceof e.Quoted?s.value:s.toCSS()});return new e.Quoted(this.quote+r+this.quote,r,this.escaped,this.index)},compare:function(e){if(!e.toCSS)return-1;var t=this.toCSS(),n=e.toCSS();return t===n?0:t<n?-1:1}}}(n("../tree")),function(e){e.Ratio=function(e){this.value=e},e.Ratio.prototype={toCSS:function(e){return this.value},eval:function(){return this}}}(n("../tree")),function(e){e.Rule=function(t,n,r,i,s){this.name=t,this.value=n instanceof e.Value?n:new e.Value([n]),this.important=r?" "+r.trim():"",this.index=i,this.inline=s||!1,t.charAt(0)==="@"?this.variable=!0:this.variable=!1},e.Rule.prototype.toCSS=function(e){return this.variable?"":this.name+(e.compress?":":": ")+this.value.toCSS(e)+this.important+(this.inline?"":";")},e.Rule.prototype.eval=function(t){return new e.Rule(this.name,this.value.eval(t),this.important,this.index,this.inline)},e.Rule.prototype.makeImportant=function(){return new e.Rule(this.name,this.value,"!important",this.index,this.inline)},e.Shorthand=function(e,t){this.a=e,this.b=t},e.Shorthand.prototype={toCSS:function(e){return this.a.toCSS(e)+"/"+this.b.toCSS(e)},eval:function(){return this}}}(n("../tree")),function(e){e.Ruleset=function(e,t,n){this.selectors=e,this.rules=t,this._lookups={},this.strictImports=n},e.Ruleset.prototype={eval:function(t){var n=this.selectors&&this.selectors.map(function(e){return e.eval(t)}),r=new e.Ruleset(n,this.rules.slice(0),this.strictImports),i;r.originalRuleset=this,r.root=this.root,r.allowImports=this.allowImports,this.debugInfo&&(r.debugInfo=this.debugInfo),t.frames.unshift(r),(r.root||r.allowImports||!r.strictImports)&&r.evalImports(t);for(var s=0;s<r.rules.length;s++)r.rules[s]instanceof e.mixin.Definition&&(r.rules[s].frames=t.frames.slice(0));var o=t.mediaBlocks&&t.mediaBlocks.length||0;for(var s=0;s<r.rules.length;s++)r.rules[s]instanceof e.mixin.Call&&(i=r.rules[s].eval(t),r.rules.splice.apply(r.rules,[s,1].concat(i)),s+=i.length-1,r.resetCache());for(var s=0,u;s<r.rules.length;s++)u=r.rules[s],u instanceof e.mixin.Definition||(r.rules[s]=u.eval?u.eval(t):u);t.frames.shift();if(t.mediaBlocks)for(var s=o;s<t.mediaBlocks.length;s++)t.mediaBlocks[s].bubbleSelectors(n);return r},evalImports:function(t){var n,r;for(n=0;n<this.rules.length;n++)this.rules[n]instanceof e.Import&&(r=this.rules[n].eval(t),typeof r.length=="number"?(this.rules.splice.apply(this.rules,[n,1].concat(r)),n+=r.length-1):this.rules.splice(n,1,r),this.resetCache())},makeImportant:function(){return new e.Ruleset(this.selectors,this.rules.map(function(e){return e.makeImportant?e.makeImportant():e}),this.strictImports)},matchArgs:function(e){return!e||e.length===0},resetCache:function(){this._rulesets=null,this._variables=null,this._lookups={}},variables:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(t,n){return n instanceof e.Rule&&n.variable===!0&&(t[n.name]=n),t},{})},variable:function(e){return this.variables()[e]},rulesets:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(t){return t instanceof e.Ruleset||t instanceof e.mixin.Definition})},find:function(t,n){n=n||this;var r=[],i,s,o=t.toCSS();return o in this._lookups?this._lookups[o]:(this.rulesets().forEach(function(i){if(i!==n)for(var o=0;o<i.selectors.length;o++)if(s=t.match(i.selectors[o])){t.elements.length>i.selectors[o].elements.length?Array.prototype.push.apply(r,i.find(new e.Selector(t.elements.slice(1)),n)):r.push(i);break}}),this._lookups[o]=r)},toCSS:function(t,n){var r=[],i=[],s=[],o=[],u=[],a,f,l;this.root||this.joinSelectors(u,t,this.selectors);for(var c=0;c<this.rules.length;c++){l=this.rules[c];if(l.rules||l instanceof e.Media)o.push(l.toCSS(u,n));else if(l instanceof e.Directive){var h=l.toCSS(u,n);if(l.name==="@charset"){if(n.charset){l.debugInfo&&(o.push(e.debugInfo(n,l)),o.push((new e.Comment("/* "+h.replace(/\n/g,"")+" */\n")).toCSS(n)));continue}n.charset=!0}o.push(h)}else l instanceof e.Comment?l.silent||(this.root?o.push(l.toCSS(n)):i.push(l.toCSS(n))):l.toCSS&&!l.variable?i.push(l.toCSS(n)):l.value&&!l.variable&&i.push(l.value.toString())}o=o.join("");if(this.root)r.push(i.join(n.compress?"":"\n"));else if(i.length>0){f=e.debugInfo(n,this),a=u.map(function(e){return e.map(function(e){return e.toCSS(n)}).join("").trim()}).join(n.compress?",":",\n");for(var c=i.length-1;c>=0;c--)s.indexOf(i[c])===-1&&s.unshift(i[c]);i=s,r.push(f+a+(n.compress?"{":" {\n  ")+i.join(n.compress?"":"\n  ")+(n.compress?"}":"\n}\n"))}return r.push(o),r.join("")+(n.compress?"\n":"")},joinSelectors:function(e,t,n){for(var r=0;r<n.length;r++)this.joinSelector(e,t,n[r])},joinSelector:function(t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y;for(i=0;i<r.elements.length;i++)f=r.elements[i],f.value==="&"&&(u=!0);if(!u){if(n.length>0)for(i=0;i<n.length;i++)t.push(n[i].concat(r));else t.push([r]);return}g=[],a=[[]];for(i=0;i<r.elements.length;i++){f=r.elements[i];if(f.value!=="&")g.push(f);else{y=[],g.length>0&&this.mergeElementsOnToSelectors(g,a);for(s=0;s<a.length;s++){l=a[s];if(n.length==0)l.length>0&&(l[0].elements=l[0].elements.slice(0),l[0].elements.push(new e.Element(f.combinator,"",0))),y.push(l);else for(o=0;o<n.length;o++)c=n[o],h=[],p=[],v=!0,l.length>0?(h=l.slice(0),m=h.pop(),d=new e.Selector(m.elements.slice(0)),v=!1):d=new e.Selector([]),c.length>1&&(p=p.concat(c.slice(1))),c.length>0&&(v=!1,d.elements.push(new e.Element(f.combinator,c[0].elements[0].value,0)),d.elements=d.elements.concat(c[0].elements.slice(1))),v||h.push(d),h=h.concat(p),y.push(h)}a=y,g=[]}}g.length>0&&this.mergeElementsOnToSelectors(g,a);for(i=0;i<a.length;i++)t.push(a[i])},mergeElementsOnToSelectors:function(t,n){var r,i;if(n.length==0){n.push([new e.Selector(t)]);return}for(r=0;r<n.length;r++)i=n[r],i.length>0?i[i.length-1]=new e.Selector(i[i.length-1].elements.concat(t)):i.push(new e.Selector(t))}}}(n("../tree")),function(e){e.Selector=function(e){this.elements=e},e.Selector.prototype.match=function(e){var t=this.elements,n=t.length,r,i,s,o;r=e.elements.slice(e.elements.length&&e.elements[0].value==="&"?1:0),i=r.length,s=Math.min(n,i);if(i===0||n<i)return!1;for(o=0;o<s;o++)if(t[o].value!==r[o].value)return!1;return!0},e.Selector.prototype.eval=function(t){return new e.Selector(this.elements.map(function(e){return e.eval(t)}))},e.Selector.prototype.toCSS=function(e){return this._css?this._css:(this.elements[0].combinator.value===""?this._css=" ":this._css="",this._css+=this.elements.map(function(t){return typeof t=="string"?" "+t.trim():t.toCSS(e)}).join(""),this._css)}}(n("../tree")),function(e){e.UnicodeDescriptor=function(e){this.value=e},e.UnicodeDescriptor.prototype={toCSS:function(e){return this.value},eval:function(){return this}}}(n("../tree")),function(e){e.URL=function(e,t){this.value=e,this.rootpath=t},e.URL.prototype={toCSS:function(){return"url("+this.value.toCSS()+")"},eval:function(t){var n=this.value.eval(t),r;return typeof n.value=="string"&&!/^(?:[a-z-]+:|\/)/.test(n.value)&&(r=this.rootpath,n.quote||(r=r.replace(/[\(\)'"\s]/g,function(e){return"\\"+e})),n.value=r+n.value),new e.URL(n,this.rootpath)}}}(n("../tree")),function(e){e.Value=function(e){this.value=e,this.is="value"},e.Value.prototype={eval:function(t){return this.value.length===1?this.value[0].eval(t):new e.Value(this.value.map(function(e){return e.eval(t)}))},toCSS:function(e){return this.value.map(function(t){return t.toCSS(e)}).join(e.compress?",":", ")}}}(n("../tree")),function(e){e.Variable=function(e,t,n){this.name=e,this.index=t,this.file=n},e.Variable.prototype={eval:function(t){var n,r,i=this.name;i.indexOf("@@")==0&&(i="@"+(new e.Variable(i.slice(1))).eval(t).value);if(this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+i,filename:this.file,index:this.index};this.evaluating=!0;if(n=e.find(t.frames,function(e){if(r=e.variable(i))return r.value.eval(t)}))return this.evaluating=!1,n;throw{type:"Name",message:"variable "+i+" is undefined",filename:this.file,index:this.index}}}}(n("../tree")),function(e){e.debugInfo=function(t,n){var r="";if(t.dumpLineNumbers&&!t.compress)switch(t.dumpLineNumbers){case"comments":r=e.debugInfo.asComment(n);break;case"mediaquery":r=e.debugInfo.asMediaQuery(n);break;case"all":r=e.debugInfo.asComment(n)+e.debugInfo.asMediaQuery(n)}return r},e.debugInfo.asComment=function(e){return"/* line "+e.debugInfo.lineNumber+", "+e.debugInfo.fileName+" */\n"},e.debugInfo.asMediaQuery=function(e){return"@media -sass-debug-info{filename{font-family:"+("file://"+e.debugInfo.fileName).replace(/[\/:.]/g,"\\$&")+"}line{font-family:\\00003"+e.debugInfo.lineNumber+"}}\n"},e.find=function(e,t){for(var n=0,r;n<e.length;n++)if(r=t.call(e,e[n]))return r;return null},e.jsify=function(e){return Array.isArray(e.value)&&e.value.length>1?"["+e.value.map(function(e){return e.toCSS(!1)}).join(", ")+"]":e.toCSS(!1)}}(n("./tree"));var o=/^(file|chrome(-extension)?|resource|qrc|app):/.test(location.protocol);r.env=r.env||(location.hostname=="127.0.0.1"||location.hostname=="0.0.0.0"||location.hostname=="localhost"||location.port.length>0||o?"development":"production"),r.async=r.async||!1,r.fileAsync=r.fileAsync||!1,r.poll=r.poll||(o?1e3:1500);if(r.functions)for(var u in r.functions)r.tree.functions[u]=r.functions[u];var a=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(location.hash);a&&(r.dumpLineNumbers=a[1]),r.watch=function(){return r.watchMode||(r.env="development",f()),this.watchMode=!0},r.unwatch=function(){return clearInterval(r.watchTimer),this.watchMode=!1},/!watch/.test(location.hash)&&r.watch();var l=null;if(r.env!="development")try{l=typeof e.localStorage=="undefined"?null:e.localStorage}catch(c){}var h=document.getElementsByTagName("link"),p=/^text\/(x-)?less$/;r.sheets=[];for(var d=0;d<h.length;d++)(h[d].rel==="stylesheet/less"||h[d].rel.match(/stylesheet/)&&h[d].type.match(p))&&r.sheets.push(h[d]);var v="";r.modifyVars=function(e){var t=v;for(name in e)t+=(name.slice(0,1)==="@"?"":"@")+name+": "+(e[name].slice(-1)===";"?e[name]:e[name]+";");(new r.Parser).parse(t,function(e,t){S(t.toCSS(),r.sheets[r.sheets.length-1])})},r.refresh=function(e){var t,n;t=n=new Date,g(function(e,r,i,s,o){o.local?C("loading "+s.href+" from cache."):(C("parsed "+s.href+" successfully."),S(r.toCSS(),s,o.lastModified)),C("css for "+s.href+" generated in "+(new Date-n)+"ms"),o.remaining===0&&C("css generated in "+(new Date-t)+"ms"),n=new Date},e),m()},r.refreshStyles=m,r.refresh(r.env==="development"),typeof define=="function"&&define.amd&&define("less",[],function(){return r})})(window);(function(){function log(args){console.log("$f.fireEvent",[].slice.call(args));}
function clone(obj){if(!obj||typeof obj!='object'){return obj;}
var temp=new obj.constructor();for(var key in obj){if(obj.hasOwnProperty(key)){temp[key]=clone(obj[key]);}}
return temp;}
function each(obj,fn){if(!obj){return;}
var name,i=0,length=obj.length;if(length===undefined){for(name in obj){if(fn.call(obj[name],name,obj[name])===false){break;}}}else{for(var value=obj[0];i<length&&fn.call(value,i,value)!==false;value=obj[++i]){}}
return obj;}
function el(id){return document.getElementById(id);}
function extend(to,from,skipFuncs){if(typeof from!='object'){return to;}
if(to&&from){each(from,function(name,value){if(!skipFuncs||typeof value!='function'){to[name]=value;}});}
return to;}
function select(query){var index=query.indexOf(".");if(index!=-1){var tag=query.slice(0,index)||"*";var klass=query.slice(index+1,query.length);var els=[];each(document.getElementsByTagName(tag),function(){if(this.className&&this.className.indexOf(klass)!=-1){els.push(this);}});return els;}}
function stopEvent(e){e=e||window.event;if(e.preventDefault){e.stopPropagation();e.preventDefault();}else{e.returnValue=false;e.cancelBubble=true;}
return false;}
function bind(to,evt,fn){to[evt]=to[evt]||[];to[evt].push(fn);}
function makeId(){return"_"+(""+Math.random()).slice(2,10);}
var Clip=function(json,index,player){var self=this,cuepoints={},listeners={};self.index=index;if(typeof json=='string'){json={url:json};}
extend(this,json,true);each(("Begin*,Start,Pause*,Resume*,Seek*,Stop*,Finish*,LastSecond,Update,BufferFull,BufferEmpty,BufferStop").split(","),function(){var evt="on"+this;if(evt.indexOf("*")!=-1){evt=evt.slice(0,evt.length-1);var before="onBefore"+evt.slice(2);self[before]=function(fn){bind(listeners,before,fn);return self;};}
self[evt]=function(fn){bind(listeners,evt,fn);return self;};if(index==-1){if(self[before]){player[before]=self[before];}
if(self[evt]){player[evt]=self[evt];}}});extend(this,{onCuepoint:function(points,fn){if(arguments.length==1){cuepoints.embedded=[null,points];return self;}
if(typeof points=='number'){points=[points];}
var fnId=makeId();cuepoints[fnId]=[points,fn];if(player.isLoaded()){player._api().fp_addCuepoints(points,index,fnId);}
return self;},update:function(json){extend(self,json);if(player.isLoaded()){player._api().fp_updateClip(json,index);}
var conf=player.getConfig();var clip=(index==-1)?conf.clip:conf.playlist[index];extend(clip,json,true);},_fireEvent:function(evt,arg1,arg2,target){if(evt=='onLoad'){each(cuepoints,function(key,val){if(val[0]){player._api().fp_addCuepoints(val[0],index,key);}});return false;}
target=target||self;if(evt=='onCuepoint'){var fn=cuepoints[arg1];if(fn){return fn[1].call(player,target,arg2);}}
if(arg1&&"onBeforeBegin,onMetaData,onStart,onUpdate,onResume".indexOf(evt)!=-1){extend(target,arg1);if(arg1.metaData){if(!target.duration){target.duration=arg1.metaData.duration;}else{target.fullDuration=arg1.metaData.duration;}}}
var ret=true;each(listeners[evt],function(){ret=this.call(player,target,arg1,arg2);});return ret;}});if(json.onCuepoint){var arg=json.onCuepoint;self.onCuepoint.apply(self,typeof arg=='function'?[arg]:arg);delete json.onCuepoint;}
each(json,function(key,val){if(typeof val=='function'){bind(listeners,key,val);delete json[key];}});if(index==-1){player.onCuepoint=this.onCuepoint;}};var Plugin=function(name,json,player,fn){var self=this,listeners={},hasMethods=false;if(fn){extend(listeners,fn);}
each(json,function(key,val){if(typeof val=='function'){listeners[key]=val;delete json[key];}});extend(this,{animate:function(props,speed,fn){if(!props){return self;}
if(typeof speed=='function'){fn=speed;speed=500;}
if(typeof props=='string'){var key=props;props={};props[key]=speed;speed=500;}
if(fn){var fnId=makeId();listeners[fnId]=fn;}
if(speed===undefined){speed=500;}
json=player._api().fp_animate(name,props,speed,fnId);return self;},css:function(props,val){if(val!==undefined){var css={};css[props]=val;props=css;}
json=player._api().fp_css(name,props);extend(self,json);return self;},show:function(){this.display='block';player._api().fp_showPlugin(name);return self;},hide:function(){this.display='none';player._api().fp_hidePlugin(name);return self;},toggle:function(){this.display=player._api().fp_togglePlugin(name);return self;},fadeTo:function(o,speed,fn){if(typeof speed=='function'){fn=speed;speed=500;}
if(fn){var fnId=makeId();listeners[fnId]=fn;}
this.display=player._api().fp_fadeTo(name,o,speed,fnId);this.opacity=o;return self;},fadeIn:function(speed,fn){return self.fadeTo(1,speed,fn);},fadeOut:function(speed,fn){return self.fadeTo(0,speed,fn);},getName:function(){return name;},getPlayer:function(){return player;},_fireEvent:function(evt,arg,arg2){if(evt=='onUpdate'){var json=player._api().fp_getPlugin(name);if(!json){return;}
extend(self,json);delete self.methods;if(!hasMethods){each(json.methods,function(){var method=""+this;self[method]=function(){var a=[].slice.call(arguments);var ret=player._api().fp_invoke(name,method,a);return ret==='undefined'||ret===undefined?self:ret;};});hasMethods=true;}}
var fn=listeners[evt];if(fn){var ret=fn.apply(self,arg);if(evt.slice(0,1)=="_"){delete listeners[evt];}
return ret;}
return self;}});};function Player(wrapper,params,conf){var self=this,api=null,isUnloading=false,html,commonClip,playlist=[],plugins={},listeners={},playerId,apiId,playerIndex,activeIndex,swfHeight,wrapperHeight;extend(self,{id:function(){return playerId;},isLoaded:function(){return(api!==null&&api.fp_play!==undefined&&!isUnloading);},getParent:function(){return wrapper;},hide:function(all){if(all){wrapper.style.height="0px";}
if(self.isLoaded()){api.style.height="0px";}
return self;},show:function(){wrapper.style.height=wrapperHeight+"px";if(self.isLoaded()){api.style.height=swfHeight+"px";}
return self;},isHidden:function(){return self.isLoaded()&&parseInt(api.style.height,10)===0;},load:function(fn){if(!self.isLoaded()&&self._fireEvent("onBeforeLoad")!==false){var onPlayersUnloaded=function(){if(html&&!flashembed.isSupported(params.version)){wrapper.innerHTML="";}
if(fn){fn.cached=true;bind(listeners,"onLoad",fn);}
flashembed(wrapper,params,{config:conf});};var unloadedPlayersNb=0;each(players,function(){this.unload(function(wasUnloaded){if(++unloadedPlayersNb==players.length){onPlayersUnloaded();}});});}
return self;},unload:function(fn){if(html.replace(/\s/g,'')!==''){if(self._fireEvent("onBeforeUnload")===false){if(fn){fn(false);}
return self;}
isUnloading=true;try{if(api){api.fp_close();self._fireEvent("onUnload");}}catch(error){}
var clean=function(){api=null;wrapper.innerHTML=html;isUnloading=false;if(fn){fn(true);}};if(/WebKit/i.test(navigator.userAgent)&&!/Chrome/i.test(navigator.userAgent)){setTimeout(clean,0);}else{clean();}}
else if(fn){fn(false);}
return self;},getClip:function(index){if(index===undefined){index=activeIndex;}
return playlist[index];},getCommonClip:function(){return commonClip;},getPlaylist:function(){return playlist;},getPlugin:function(name){var plugin=plugins[name];if(!plugin&&self.isLoaded()){var json=self._api().fp_getPlugin(name);if(json){plugin=new Plugin(name,json,self);plugins[name]=plugin;}}
return plugin;},getScreen:function(){return self.getPlugin("screen");},getControls:function(){return self.getPlugin("controls")._fireEvent("onUpdate");},getLogo:function(){try{return self.getPlugin("logo")._fireEvent("onUpdate");}catch(ignored){}},getPlay:function(){return self.getPlugin("play")._fireEvent("onUpdate");},getConfig:function(copy){return copy?clone(conf):conf;},getFlashParams:function(){return params;},loadPlugin:function(name,url,props,fn){if(typeof props=='function'){fn=props;props={};}
var fnId=fn?makeId():"_";self._api().fp_loadPlugin(name,url,props,fnId);var arg={};arg[fnId]=fn;var p=new Plugin(name,null,self,arg);plugins[name]=p;return p;},getState:function(){return self.isLoaded()?api.fp_getState():-1;},play:function(clip,instream){var p=function(){if(clip!==undefined){self._api().fp_play(clip,instream);}else{self._api().fp_play();}};if(self.isLoaded()){p();}else if(isUnloading){setTimeout(function(){self.play(clip,instream);},50);}else{self.load(function(){p();});}
return self;},getVersion:function(){var js="flowplayer.js 3.2.10";if(self.isLoaded()){var ver=api.fp_getVersion();ver.push(js);return ver;}
return js;},_api:function(){if(!self.isLoaded()){throw"Flowplayer "+self.id()+" not loaded when calling an API method";}
return api;},setClip:function(clip){each(clip,function(key,val){if(typeof val=='function'){bind(listeners,key,val);delete clip[key];}else if(key=='onCuepoint'){$f(wrapper).getCommonClip().onCuepoint(clip[key][0],clip[key][1]);}});self.setPlaylist([clip]);return self;},getIndex:function(){return playerIndex;},bufferAnimate:function(enable){api.fp_bufferAnimate(enable===undefined||enable);return self;},_swfHeight:function(){return api.clientHeight;}});each(("Click*,Load*,Unload*,Keypress*,Volume*,Mute*,Unmute*,PlaylistReplace,ClipAdd,Fullscreen*,FullscreenExit,Error,MouseOver,MouseOut").split(","),function(){var name="on"+this;if(name.indexOf("*")!=-1){name=name.slice(0,name.length-1);var name2="onBefore"+name.slice(2);self[name2]=function(fn){bind(listeners,name2,fn);return self;};}
self[name]=function(fn){bind(listeners,name,fn);return self;};});each(("pause,resume,mute,unmute,stop,toggle,seek,getStatus,getVolume,setVolume,getTime,isPaused,isPlaying,startBuffering,stopBuffering,isFullscreen,toggleFullscreen,reset,close,setPlaylist,addClip,playFeed,setKeyboardShortcutsEnabled,isKeyboardShortcutsEnabled").split(","),function(){var name=this;self[name]=function(a1,a2){if(!self.isLoaded()){return self;}
var ret=null;if(a1!==undefined&&a2!==undefined){ret=api["fp_"+name](a1,a2);}else{ret=(a1===undefined)?api["fp_"+name]():api["fp_"+name](a1);}
return ret==='undefined'||ret===undefined?self:ret;};});self._fireEvent=function(a){if(typeof a=='string'){a=[a];}
var evt=a[0],arg0=a[1],arg1=a[2],arg2=a[3],i=0;if(conf.debug){log(a);}
if(!self.isLoaded()&&evt=='onLoad'&&arg0=='player'){api=api||el(apiId);swfHeight=self._swfHeight();each(playlist,function(){this._fireEvent("onLoad");});each(plugins,function(name,p){p._fireEvent("onUpdate");});commonClip._fireEvent("onLoad");}
if(evt=='onLoad'&&arg0!='player'){return;}
if(evt=='onError'){if(typeof arg0=='string'||(typeof arg0=='number'&&typeof arg1=='number')){arg0=arg1;arg1=arg2;}}
if(evt=='onContextMenu'){each(conf.contextMenu[arg0],function(key,fn){fn.call(self);});return;}
if(evt=='onPluginEvent'||evt=='onBeforePluginEvent'){var name=arg0.name||arg0;var p=plugins[name];if(p){p._fireEvent("onUpdate",arg0);return p._fireEvent(arg1,a.slice(3));}
return;}
if(evt=='onPlaylistReplace'){playlist=[];var index=0;each(arg0,function(){playlist.push(new Clip(this,index++,self));});}
if(evt=='onClipAdd'){if(arg0.isInStream){return;}
arg0=new Clip(arg0,arg1,self);playlist.splice(arg1,0,arg0);for(i=arg1+1;i<playlist.length;i++){playlist[i].index++;}}
var ret=true;if(typeof arg0=='number'&&arg0<playlist.length){activeIndex=arg0;var clip=playlist[arg0];if(clip){ret=clip._fireEvent(evt,arg1,arg2);}
if(!clip||ret!==false){ret=commonClip._fireEvent(evt,arg1,arg2,clip);}}
each(listeners[evt],function(){ret=this.call(self,arg0,arg1);if(this.cached){listeners[evt].splice(i,1);}
if(ret===false){return false;}
i++;});return ret;};function init(){if($f(wrapper)){$f(wrapper).getParent().innerHTML="";playerIndex=$f(wrapper).getIndex();players[playerIndex]=self;}else{players.push(self);playerIndex=players.length-1;}
wrapperHeight=parseInt(wrapper.style.height,10)||wrapper.clientHeight;playerId=wrapper.id||"fp"+makeId();apiId=params.id||playerId+"_api";params.id=apiId;html=wrapper.innerHTML;if(typeof conf=='string'){conf={clip:{url:conf}};}
conf.playerId=playerId;conf.clip=conf.clip||{};if(wrapper.getAttribute("href",2)&&!conf.clip.url){conf.clip.url=wrapper.getAttribute("href",2);}
commonClip=new Clip(conf.clip,-1,self);conf.playlist=conf.playlist||[conf.clip];var index=0;each(conf.playlist,function(){var clip=this;if(typeof clip=='object'&&clip.length){clip={url:""+clip};}
each(conf.clip,function(key,val){if(val!==undefined&&clip[key]===undefined&&typeof val!='function'){clip[key]=val;}});conf.playlist[index]=clip;clip=new Clip(clip,index,self);playlist.push(clip);index++;});each(conf,function(key,val){if(typeof val=='function'){if(commonClip[key]){commonClip[key](val);}else{bind(listeners,key,val);}
delete conf[key];}});each(conf.plugins,function(name,val){if(val){plugins[name]=new Plugin(name,val,self);}});if(!conf.plugins||conf.plugins.controls===undefined){plugins.controls=new Plugin("controls",null,self);}
plugins.canvas=new Plugin("canvas",null,self);html=wrapper.innerHTML;function doClick(e){if(/iPad|iPhone|iPod/i.test(navigator.userAgent)&&!/.flv$/i.test(playlist[0].url)&&!checkForIpadSupport()){return true;}
if(!self.isLoaded()&&self._fireEvent("onBeforeClick")!==false){self.load();}
return stopEvent(e);}
function checkForIpadSupport(){return self.hasiPadSupport&&self.hasiPadSupport();}
function installPlayer(){if(html.replace(/\s/g,'')!==''){if(wrapper.addEventListener){wrapper.addEventListener("click",doClick,false);}else if(wrapper.attachEvent){wrapper.attachEvent("onclick",doClick);}}else{if(wrapper.addEventListener&&!checkForIpadSupport()){wrapper.addEventListener("click",stopEvent,false);}
self.load();}}
setTimeout(installPlayer,0);}
if(typeof wrapper=='string'){var node=el(wrapper);if(!node){throw"Flowplayer cannot access element: "+wrapper;}
wrapper=node;init();}else{init();}}
var players=[];function Iterator(arr){this.length=arr.length;this.each=function(fn){each(arr,fn);};this.size=function(){return arr.length;};var self=this;for(name in Player.prototype){self[name]=function(){var args=arguments;self.each(function(){this[name].apply(this,args);});};}}
window.flowplayer=window.$f=function(){var instance=null;var arg=arguments[0];if(!arguments.length){each(players,function(){if(this.isLoaded()){instance=this;return false;}});return instance||players[0];}
if(arguments.length==1){if(typeof arg=='number'){return players[arg];}else{if(arg=='*'){return new Iterator(players);}
each(players,function(){if(this.id()==arg.id||this.id()==arg||this.getParent()==arg){instance=this;return false;}});return instance;}}
if(arguments.length>1){var params=arguments[1],conf=(arguments.length==3)?arguments[2]:{};if(typeof params=='string'){params={src:params};}
params=extend({bgcolor:"#000000",version:[10,1],expressInstall:"http://releases.flowplayer.org/swf/expressinstall.swf",cachebusting:false},params);if(typeof arg=='string'){if(arg.indexOf(".")!=-1){var instances=[];each(select(arg),function(){instances.push(new Player(this,clone(params),clone(conf)));});return new Iterator(instances);}else{var node=el(arg);return new Player(node!==null?node:clone(arg),clone(params),clone(conf));}}else if(arg){return new Player(arg,clone(params),clone(conf));}}
return null;};extend(window.$f,{fireEvent:function(){var a=[].slice.call(arguments);var p=$f(a[0]);return p?p._fireEvent(a.slice(1)):null;},addPlugin:function(name,fn){Player.prototype[name]=fn;return $f;},each:each,extend:extend});if(typeof jQuery=='function'){jQuery.fn.flowplayer=function(params,conf){if(!arguments.length||typeof arguments[0]=='number'){var arr=[];this.each(function(){var p=$f(this);if(p){arr.push(p);}});return arguments.length?arr[arguments[0]]:new Iterator(arr);}
return this.each(function(){$f(this,clone(params),conf?clone(conf):{});});};}})();(function(){var IE=document.all,URL='http://www.adobe.com/go/getflashplayer',JQUERY=typeof jQuery=='function',RE=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,GLOBAL_OPTS={width:'100%',height:'100%',id:"_"+(""+Math.random()).slice(9),allowfullscreen:true,allowscriptaccess:'always',quality:'high',version:[3,0],onFail:null,expressInstall:null,w3c:false,cachebusting:false};if(window.attachEvent){window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};});}
function extend(to,from){if(from){for(var key in from){if(from.hasOwnProperty(key)){to[key]=from[key];}}}
return to;}
function map(arr,func){var newArr=[];for(var i in arr){if(arr.hasOwnProperty(i)){newArr[i]=func(arr[i]);}}
return newArr;}
window.flashembed=function(root,opts,conf){if(typeof root=='string'){root=document.getElementById(root.replace("#",""));}
if(!root){return;}
if(typeof opts=='string'){opts={src:opts};}
return new Flash(root,extend(extend({},GLOBAL_OPTS),opts),conf);};var f=extend(window.flashembed,{conf:GLOBAL_OPTS,getVersion:function(){var fo,ver;try{ver=navigator.plugins["Shockwave Flash"].description.slice(16);}catch(e){try{fo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");ver=fo&&fo.GetVariable("$version");}catch(err){try{fo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");ver=fo&&fo.GetVariable("$version");}catch(err2){}}}
ver=RE.exec(ver);return ver?[1*ver[1],1*ver[(ver[1]*1>9?2:3)]*1]:[0,0];},asString:function(obj){if(obj===null||obj===undefined){return null;}
var type=typeof obj;if(type=='object'&&obj.push){type='array';}
switch(type){case'string':obj=obj.replace(new RegExp('(["\\\\])','g'),'\\$1');obj=obj.replace(/^\s?(\d+\.?\d*)%/,"$1pct")
return'"'+obj+'"';case'array':return'['+map(obj,function(el){return f.asString(el);}).join(',')+']';case'function':return'"function()"';case'object':var str=[];for(var prop in obj){if(obj.hasOwnProperty(prop)){str.push('"'+prop+'":'+f.asString(obj[prop]));}}
return'{'+str.join(',')+'}';}
return String(obj).replace(/\s/g," ").replace(/\'/g,"\"");},getHTML:function(opts,conf){opts=extend({},opts);var html='<object width="'+opts.width+'" height="'+opts.height+'" id="'+opts.id+'" name="'+opts.id+'"';if(opts.cachebusting){opts.src+=((opts.src.indexOf("?")!=-1?"&":"?")+Math.random());}
if(opts.w3c||!IE){html+=' data="'+opts.src+'" type="application/x-shockwave-flash"';}else{html+=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"';}
html+='>';if(opts.w3c||IE){html+='<param name="movie" value="'+opts.src+'" />';}
opts.width=opts.height=opts.id=opts.w3c=opts.src=null;opts.onFail=opts.version=opts.expressInstall=null;for(var key in opts){if(opts[key]){html+='<param name="'+key+'" value="'+opts[key]+'" />';}}
var vars="";if(conf){for(var k in conf){if(conf[k]){var val=conf[k];vars+=k+'='+(/function|object/.test(typeof val)?f.asString(val):val)+'&';}}
vars=vars.slice(0,-1);html+='<param name="flashvars" value=\''+vars+'\' />';}
html+="</object>";return html;},isSupported:function(ver){return VERSION[0]>ver[0]||VERSION[0]==ver[0]&&VERSION[1]>=ver[1];}});var VERSION=f.getVersion();function Flash(root,opts,conf){if(f.isSupported(opts.version)){root.innerHTML=f.getHTML(opts,conf);}else if(opts.expressInstall&&f.isSupported([6,65])){root.innerHTML=f.getHTML(extend(opts,{src:opts.expressInstall}),{MMredirectURL:encodeURIComponent(location.href),MMplayerType:'PlugIn',MMdoctitle:document.title});}else{if(!root.innerHTML.replace(/\s/g,'')){root.innerHTML="<h2>Flash version "+opts.version+" or greater is required</h2>"+"<h3>"+
(VERSION[0]>0?"Your version is "+VERSION:"You have no flash plugin installed")+"</h3>"+
(root.tagName=='A'?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+URL+"'>here</a></p>");if(root.tagName=='A'||root.tagName=="DIV"){root.onclick=function(){location.href=URL;};}}
if(opts.onFail){var ret=opts.onFail.call(this);if(typeof ret=='string'){root.innerHTML=ret;}}}
if(IE){window[opts.id]=document.getElementById(opts.id);}
extend(this,{getRoot:function(){return root;},getOptions:function(){return opts;},getConf:function(){return conf;},getApi:function(){return root.firstChild;}});}
if(JQUERY){jQuery.tools=jQuery.tools||{version:'3.2.10'};jQuery.tools.flashembed={conf:GLOBAL_OPTS};jQuery.fn.flashembed=function(opts,conf){return this.each(function(){$(this).data("flashembed",flashembed(this,opts,conf));});};}})();$f.addPlugin('qualityselector',function qualityselector(articleId,bitrates,videoURL){var self=this;this.shouldDisplayQualitySelector=false;this.qTimer=null;this.articleId=articleId;this.videoURL=videoURL;var containerClass='flow_quality_container';var qualitySelectorClass='flow_quality_selector';var qualityListClass='flow_quality_list';var parent=self.getParent();var container=api.bh('div',{cl:containerClass,id:containerClass+'_'+articleId});parent.parentNode.appendChild(container);var qSelector=api.bh('div',{cl:qualitySelectorClass+' hidden',id:qualitySelectorClass+'_'+articleId});container.appendChild(qSelector);var profiles=(!!bitrates)?bitrates.profiles:null;function sortByBitrate(a,b){return parseInt(b.bitrate)-parseInt(a.bitrate);}
function setBitrates(fileName,baseUrl){qSelector.innerHTML='';if(!!profiles&&profiles.length>1){profiles.sort(sortByBitrate);var ul=api.bh('ul',{cl:qualityListClass,id:qualityListClass+'_'+articleId});qSelector.appendChild(ul);for(var i=0;i<profiles.length;i++){var q=(profiles[i].extension.indexOf('high')>-1)?'Høy':(profiles[i].extension.indexOf('medium')>-1)?'Normal':'Lav';q+=' '+profiles[i].width;var li=api.bh('li');ul.appendChild(li);if(fileName==profiles[i].filename){li.innerHTML=q;}else{var a=api.bh('a',{id:'quality_'+i,href:'javascript:;',ih:q});a.onclick=function(){var index=this.id.replace('quality_','');self.play({scaling:'fit',url:baseUrl+'/'+profiles[index].filename});qSelector.className=qSelector.className.replace('visible','hidden');qSelector.innerHTML='';self.shouldDisplayQualitySelector=false;};li.appendChild(a);}}}else{container.parentNode.removeChild(container);}}
function getFilename(url){var urlParts=url.split('/');return urlParts[urlParts.length-1];}
function existsInProfiles(filename,profiles){if(profiles!=null){for(var i=0;i<profiles.length;i++){if(profiles[i].filename==filename){return true;}}}
return false;}
function getClipFilenameToPlay(clipURL,defaultClipURL,profiles){var filename=getFilename(clipURL);if(defaultClipURL!=null&&!existsInProfiles(filename,profiles)){filename=getFilename(defaultClipURL);}
return filename;}
qSelector.onmouseover=function(){if(self.qTimer)clearTimeout(self.qTimer);this.className=this.className.replace('hidden','visible');};parent.onmouseover=function(e){if(self.qTimer)clearTimeout(self.qTimer);if(self.shouldDisplayQualitySelector){if(!e)var e=window.event;var relTarg=e.relatedTarget||e.fromElement;qSelector.className=qSelector.className.replace('hidden','visible');}};parent.onmousemove=function(e){if(self.qTimer)clearTimeout(self.qTimer);if(self.shouldDisplayQualitySelector){qSelector.className=qSelector.className.replace('hidden','visible');self.qTimer=setTimeout(function(){qSelector.className=qSelector.className.replace('visible','hidden');},2500);}};parent.onmouseout=function(e){if(self.qTimer)clearTimeout(self.qTimer);if(self.shouldDisplayQualitySelector){if(!e)var e=window.event;var relTarg=e.relatedTarget||e.toElement;if(relTarg==null||relTarg.tagName=='A'||relTarg.tagName=='LI'||relTarg.id==container.id||relTarg.id==qualityListClass+'_'+self.articleId||relTarg.id==qSelector.id){return;}
if(relTarg.id!=container.id){qSelector.className=qSelector.className.replace('visible','hidden');}}};this.onStart(function(clip){self.shouldDisplayQualitySelector=true;var filename=getClipFilenameToPlay(clip.completeUrl,self.videoURL,profiles);var urlParts=self.videoURL.split('/');urlParts.pop();var baseUrl=urlParts.join('/');if(bitrates){qSelector.style.display='block';setBitrates(filename,baseUrl);}});return this;});$f.addPlugin('apicontrolbar',function apicontrolbar(bitrates){function fixE(e){if(typeof e=='undefined'){e=window.event;}
if(typeof e.layerX=='undefined'){e.layerX=e.offsetX;}
if(typeof e.layerY=='undefined'){e.layerY=e.offsetY;}
return e;}
function w(e){return e.clientWidth;}
function offset(e){return e.offsetLeft;}
function Draggable(o,min,max,offset){var dragging=false;function foo(){}
o.onDragStart=o.onDragStart||foo;o.onDragEnd=o.onDragEnd||foo;o.onDrag=o.onDrag||foo;function move(x){var ret=true;if(x>max){x=max;ret=false;}
if(x<min){x=min;ret=false;}
o.style.left=x+"px";return ret;}
function end(){document.onmousemove=o.ontouchmove=null;document.onmouseup=o.ontouchend=null;o.onDragEnd(parseInt(o.style.left,10));dragging=false;}
function drag(e){e=e.touches?e.touches.item(0):e;e=fixE(e);var x=e.clientX-offset;if(move(x)){dragging=true;o.onDrag(x);}
return false;}
o.onmousedown=o.ontouchstart=function(e){e=fixE(e);o.onDragStart(parseInt(o.style.left,10));document.onmousemove=o.ontouchmove=drag;document.onmouseup=o.ontouchend=end;return false;};this.dragTo=function(x){if(move(x)){o.onDragEnd(x);}};this.setMax=function(val){max=val;};this.isDragging=function(){return dragging;};return this;}
function sortByBitrate(a,b){return parseInt(b.bitrate)-parseInt(a.bitrate);}
function toTime(sec){var h=Math.floor(sec/3600);var min=Math.floor(sec/60);sec=sec-(min*60);if(h>=1){min-=h*60;return pad(h)+":"+pad(min)+":"+pad(sec);}
return pad(min)+":"+pad(sec);}
function pad(val){val=parseInt(val,10);return val>=10?val:"0"+val;}
function getTime(time,duration){return"<strong>"+toTime(time)+"</strong> / <span>"+toTime(duration)+"</span>";}
function getProfiles(profiles){var bl='';for(var i=0;i<profiles.length;i++){var q=(profiles[i].extension.indexOf('high')>-1)?'Høy':(profiles[i].extension.indexOf('medium')>-1)?'Normal':'Lav';q+=' '+profiles[i].width;bl+='<li><a id="quality_'+i+'" href="#">'+q+'</a></li>';}
return bl;}
var player=this;var container=player.getParent();var shouldDisplayControlBar=false;var progressBarId='flow_progress_bar';var indicatorId='flow_progress_indicator';var playButtonId='flow_play_button';var bitratesButtonId='flow_quality_selector';var fullscreenButtonId='flow_fullscreen_button';var bitratesListId='flow_bitrates';var timeId='flow_time';var playHeadId='flow_playHead';var bufferId='flow_buffer_indicator';var muteButtonId='flow_mute_button';var volumeBarId='flow_volume_bar';var volumeId='flow_volume';var volumeBackdropId='flow_volume_backdrop';var volumeHeadId='flow_volume_head';var progress=null;var template=''+'<div id="'+progressBarId+'">'+'<div id="'+indicatorId+'">'+'<a id="'+playHeadId+'"></a>'+'</div>'+'</div>'+'<button id="'+playButtonId+'" class="pause"> </button>'+'<div id="'+timeId+'"><strong>00:00</strong> / <span>00:00</span></div>'+'<button id="'+fullscreenButtonId+'" class="fullscreen"></button>'+'<button id="'+bitratesButtonId+'" class="profiles">VELG KVALITET</button>'+'<ul id="'+bitratesListId+'"></ul>'+'<div id="'+volumeBarId+'">'+'<div id="'+volumeBackdropId+'"></div>'+'<div id="'+volumeId+'">'+'<a id="'+volumeHeadId+'"></a>'+'</div>'+'</div>'+'<button id="'+muteButtonId+'" class="mute"></button>';var controlbar=api.bh('div',{id:'flow_control_bar'});controlbar.style.width=container.offsetWidth+'px';container.parentNode.appendChild(controlbar);controlbar.innerHTML=template;var progressBar=document.getElementById(progressBarId);var progressIndicator=document.getElementById(indicatorId);var playButton=document.getElementById(playButtonId);var bitratesButton=document.getElementById(bitratesButtonId);var bitratesList=document.getElementById(bitratesListId);var timeContainer=document.getElementById(timeId);var playHead=document.getElementById(playHeadId);var volumeContainer=document.getElementById(volumeBarId);var volumeBar=document.getElementById(volumeId);var volumeBall=document.getElementById(volumeHeadId);var volumeBackdrop=document.getElementById(volumeBackdropId);var muteButton=document.getElementById(muteButtonId);var fullscreenButton=document.getElementById(fullscreenButtonId);var profiles=(!!bitrates)?bitrates.profiles:null;if(!!profiles&&profiles.length>1){profiles.sort(sortByBitrate);bitratesList.innerHTML=getProfiles(profiles);bitratesList.style.left=bitratesButton.offsetLeft+'px';var qualityButtons=bitratesList.getElementsByTagName('a');for(var j=0;j<qualityButtons.length;j++){qualityButtons[j].onclick=function(e){var index=this.id.replace('quality_','');if(!!progress)window.clearInterval(progress);player.play('http://muvi.api.no/download/'+profiles[index].filename);controlbar.className='hidden';bitratesList.style.display='none';shouldDisplayControlBar=false;};}}else{bitratesButton.parentNode.removeChild(bitratesButton);}
var trackWidth=w(progressBar);var ballWidth=w(playHead);var head=new Draggable(playHead,0,0,offset(controlbar)+offset(progressBar)+(ballWidth/2));var volHead=new Draggable(volumeBall,0,0,offset(volumeContainer)+offset(volumeBackdrop)+(w(volumeBall)*2));progressBar.onclick=function(e){e=fixE(e);if(e.target==playHead){return false;}
head.dragTo(e.layerX-ballWidth/2);};volumeBackdrop.onclick=volumeBar.onclick=function(e){e=fixE(e);if(e.target==volumeBall){return false;}
volHead.dragTo(e.layerX-w(volumeBall)/2);};volHead.setMax(volumeBackdrop.offsetWidth);function getMax(len,total){return parseInt(Math.min(len/total*trackWidth,trackWidth-ballWidth/2),10);}
player.onStart(function(clip){var status=player.getStatus();shouldDisplayControlBar=true;if(!!progress)clearInterval(progress);progress=setInterval(function setProgress(){var status=player.getStatus();var x=getMax(status.bufferEnd,clip.duration);head.setMax(progressBar.offsetWidth-playHead.offsetWidth);if(!player.isPaused()&&!head.isDragging()){x=getMax(status.time,clip.duration);progressIndicator.style.width=x+"px";playHead.style.left=(x-ballWidth/2)+"px";}
timeContainer.innerHTML=getTime(player.getTime(),clip.duration);},100);});bitratesButton.onclick=function(e){bitratesList.style.display=(bitratesList.style.display=='block'?'none':'block');};playButton.onclick=function(e){(player.getState()==3)?player.pause():player.resume();};player.onPause(function(){playButton.className='play'});player.onResume(function(){playButton.className='pause';});container.onmouseover=function(e){if(shouldDisplayControlBar){if(!e)var e=window.event;var relTarg=e.relatedTarget||e.fromElement;controlbar.className='visible';}};container.onmouseout=function(e){if(shouldDisplayControlBar){if(!e)var e=window.event;var relTarg=e.relatedTarget||e.toElement;if(relTarg==null||relTarg.tagName=='BUTTON'||relTarg.id==progressBarId||relTarg.id==indicatorId||relTarg.id==bitratesListId||relTarg.id==playHeadId||relTarg.id==volumeBarId){return;}
if(relTarg.id!=controlbar.id){controlbar.className='hidden';bitratesList.style.display='none';}}};playHead.onDragEnd=function(x){var to=parseInt(x/trackWidth*100,10)+"%";progressIndicator.style.width=x+"px";if(player.isLoaded()){player.seek(to);}};playHead.onDrag=function(x){progressIndicator.style.width=x+'px';};volumeBall.onDragEnd=function(x){var to=parseInt(x/w(volumeBackdrop)*100,10);player.setVolume(to);volumeBar.style.width=x+'px';};volumeBall.onDrag=function(x){var to=parseInt(x/w(volumeBackdrop)*100,10);player.setVolume(to);volumeBar.style.width=x+'px';};muteButton.onclick=function(){};return this;});var api=api||{};api.Streamsense_log=function(articleId,sitestatId,nedstatParams,articleTitle,publishedDate){var reportUrl='http://int.sitestat.com/amedia/mainsite/s?'+encodeURI(articleTitle),sSense=new ns_.StreamSense('video_'+articleId);console.log('video_'+articleId);for(var key in nedstatParams){if(nedstatParams[key]=='football'){sSense.setAttribute(key,nedstatParams[key]);}}
sSense.setAttributes({ns_st_ty:'vod',ns_st_dt:publishedDate,ns_st_pl:articleTitle,ns_st_pr:articleTitle,ns_st_ep:'1',a_virtual:sitestatId});sSense.setPixelURL(reportUrl);return sSense;};if(typeof(ns_)=="undefined"){ns_=new Object()}ns_.extend=function(a,c){for(var b in c){a[b]=c[b]}return a};ns_.encode=encodeURIComponent?encodeURIComponent:function(a){return escape(a).replace(/\//g,"%2F")};ns_.b={};ns_.b.ie=false;ns_.b.ie9=ns_.b.ie&&document.addEventListener;ns_.b.sf=navigator.vendor?/apple/i.test(navigator.vendor):false;ns_.b.ch=window.chrome?true:false;ns_.b.ff=/firefox/i.test(navigator.userAgent);ns_.b.op=window.opera?true:false;if(typeof(ns_)=="undefined"){ns_=new Object()}ns_.dt={initDate:new Date().getTime(),lastRun:new Date().getTime(),delta:0,intervalID:null,intervalTime:1000,intervalRuns:0,timedObserver:function(){var a=ns_.dt.getTime();ns_.dt.intervalID=setTimeout(ns_.dt.timedObserver,ns_.dt.intervalTime);ns_.dt.intervalRuns++;var b=a-ns_.dt.lastRun-ns_.dt.intervalTime;if(b>(ns_.dt.intervalTime*2)||b<-(ns_.dt.intervalTime*2)){ns_.dt.delta+=b;a-=b}ns_.dt.lastRun=a},getTime:function(){var a=new Date().getTime();return a-ns_.dt.delta}};ns_.dt.timedObserver();ns_.extend(Function.prototype,(function(){var e=Array.prototype.slice;function d(k,h){var j=k.length,i=h.length;while(i--){k[j+i]=h[i]}return k}function f(i,h){i=e.call(i,0);return d(i,h)}function a(){return this.STargumentIsSuper()?["$super"]:[""]}function c(){return/^[\s\(]*function[^(]*\(\s*\$super/.test(this.toString())}function b(j){if(arguments.length<2&&typeof arguments[0]=="undefined"){return this}var h=this,i=e.call(arguments,1);return function(){var k=f(i,arguments);return h.apply(j,k)}}function g(i){var h=this;return function(){var j=d([h.STbind(this)],arguments);return i.apply(this,j)}}return{STargumentNames:a,STargumentIsSuper:c,STbind:b,STwrap:g}})());ns_.Class={extend:function(c,a){if(arguments.length==1){a=c,c=null}if(typeof(c)=="function"){var b=function(){return this.initialize.apply(this,arguments)};b.prototype=new c()}else{var b=function(){}}if(a){ns_.Class.inherit(b.prototype,a)}return b},inherit:function(e,b,h){if(arguments.length==3){var c=e[h],d=b[h],g=d;var a;if(e&&g.STargumentIsSuper()){d=(function(f){return function(){return f.apply(this,arguments)}})(c).STwrap(g)}else{d=function(){var j=this.parent;this.parent=c;var f=g.apply(this,arguments);j?this.parent=j:delete this.parent;return f}}d.valueOf=function(){return g};d.toString=function(){return g.toString()};e[h]=d}else{for(var i in b){if(e[i]&&typeof(b[i])=="function"){ns_.Class.inherit(e,b,i)}else{e[i]=b[i]}}}return e}};if(typeof(ns_.ar)=="undefined"){ns_.ar={push:function(){for(var b=0,a=arguments.length;b<a;b++){this[this.length]=arguments[b]}},splice:function(){var j=ns_.ar.create(),d=arguments;if(d.length<=1){return j}else{if(d.length>2){for(var f=2,c=d.length;f<c;f++){j.push(d[f])}}}var b=this.slice(0,d[0]);var e=this.slice(d[0],d[0]+d[1]);var h=this.slice(d[0]+d[1]);var g=b.concat(j,h);this.length=0;for(var f=0,c=g.length;f<c;f++){this.push(g[f])}return e},shift:function(){for(var d=0,a=this[0],c=this.length-1;d<c;d++){this[d]=this[d+1]}this.length--;return a}}}ns_.ar.create=function(){var c=[];for(var a in c){delete c[a]}for(var d=0,b=arguments.length;d<b;d++){c[c.length]=arguments[d]}return c};ns_.ar.indexOf=function(c,b){var a=-1;ns_.ar.each(c,function(e,d){if(e==b){a=d}},this);return a};ns_.ar.merge=function(){var a=ns_.ar.create();ns_.ar.each(arguments,function(b){ns_.ar.each(b,function(d,c){a[c]=d})},this);return a};ns_.ar.pair=function(c,b){var a=ns_.ar.create();ns_.ar.each(b,function(e,d){a.push(d+c+e)},this);return a};ns_.ar.each=function(g,f,d){try{if(typeof(f)=="function"){d=typeof(d)!="undefined"?d:this.each.caller;if(typeof g.length!="number"||typeof g[0]=="undefined"){var b=typeof(g.__proto__)!="undefined";for(var c in g){if((!b||(b&&typeof(g.__proto__[c])=="undefined"))&&typeof g[c]!="function"){f.call(d,g[c],c)}}}else{for(var c=0,a=g.length;c<a;c++){f.call(d,g[c],c)}}}}catch(h){}};if(typeof(ns_.dom)=="undefined"){ns_.dom={cache:{},getElementsByTagName:function(b,c){var a,b=b,c=document.getElementById(c)||document;if(c.getElementsByTagName){a=c.getElementsByTagName(b)}else{if(c.all&&c.all.tags){a=c.all.tags(b)}}return a||[]},addEvent:(document.addEventListener&&!document.attachEvent)?(function(a,c,b){a.addEventListener(c,b,false);if(ns_.dom.cache){ns_.dom.cache.add(a,c,b,false)}return true}):(document.attachEvent)?(function(a,c,b){var d;if(typeof a.addEventListener!="undefined"&&(!a.attachEvent)){d=a.addEventListener(c,b)}else{c=(c.substring(0,1)==c.substring(0,1).toUpperCase()?c:"on"+c);d=a.attachEvent(c,b)}if(d&&ns_.dom.cache){ns_.dom.cache.add(a,c,b,false)}return d}):(function(c,b,a){if(document.layers&&c==document&&b.toLowerCase()=="click"){b="mouseup";c.captureEvents(Event.MOUSEUP)}var d=c["on"+b];if(typeof d!="function"){c["on"+b]=a}else{c["on"+b]=function(f){if(d){d(f)}a(f)}}if(ns_.dom.cache){ns_.dom.cache.add(c,b,a,false)}return true}),removeEvent:function(a,c,b){ns_.dom.cache.del(a,c,b)}}}ns_.dom.cache={_events:ns_.ar.create(),add:function(b,d,c,a){this._events.push(arguments)},del:function(a,c,b){ns_.ar.each(this._events,function(e,d){if(!!!b&&e[0]==a&&e[1]==c){this.detach(e[0],e[1],e[2],e[3]);this._events.splice(d,1);throw"Event found"}else{if(!!b&&e[0]==a&&e[1]==c&&e[2]==b){this.detach(e[0],e[1],e[2],e[3]);this._events.splice(d,1);throw"Event found"}}},ns_.dom.cache)},detach:function(b,d,c,a){if(typeof b.removeEventListener!="undefined"){if(ns_.b.ie){b.removeEventListener(d,c)}else{b.removeEventListener(d,c,a)}}else{if(b.detachEvent){b.detachEvent(d,c)}}},flush:function(){try{ns_.ar.each(this._events,function(c,b){if(typeof c!="undefined"){this.detach(c[0],c[1],c[2],c[3]);this._events.splice(b,1)}},ns_.dom.cache)}catch(a){}}};ns_.dom.addEvent(window,"unload",ns_.dom.cache.flush.STbind(ns_.dom.cache));ns_.Error={};ns_.Class.extend((function(){var c=false;function e(g){c=!!g}function f(g){var h=[new Date()];h=h.concat([("0"+h[0].getHours()).slice(-2),("0"+h[0].getMinutes()).slice(-2),("0"+h[0].getSeconds()).slice(-2),("00"+h[0].getMilliseconds()).slice(-3)]);g=f.caller[0]="["+h[1]+":"+h[2]+":"+h[3]+"."+h[4]+"] "+g;return true}function b(j){for(var h=0,g=arguments.length;h<g;h++){f(arguments[h])}a()}function d(j){for(var h=0,g=arguments.length;h<g;h++){f(arguments[h])}a();if(c){throw j}return false}function a(){if(c&&typeof(console)=="object"){if(console[a.caller.name]){console[a.caller.name].apply(console,a.caller.arguments)}else{if(console.log){for(var h=0,g=a.caller.arguments.length;h<g;h++){console.log(a.caller.arguments[h])}}}}else{if(c&&(!a.caller.name||a.caller.name=="error")){for(var h=0,g=a.caller.arguments.length;h<g;h++){alert(a.caller.arguments[h])}}}}ns_.Class.inherit(ns_.Error,{log:b,debug:b,error:d,setDebug:e})})());ns_.MediaEvents={STREAM_START:"onStart",STREAM_PAUSE:"onPause",STREAM_STOP:"onStop",STREAM_RESUME:"onResume",STREAM_METADATA:"onReceiveMetaData",STREAM_SEND_DATA:"onSendData",STREAM_CHANGE:"onChange",STREAM_ERROR:"onError",STREAM_LOADING:"onLoading",STREAM_LOADED:"onLoaded",STREAM_UNLOAD:"onUnload",STREAM_VOLUME:"onVolume",STREAM_SEEK:"onSeek",PLAYHEAD_UPDATE:"onPlayHeadUpdate"};ns_.MediaEvent=function(e){if(typeof(e)!="string"){return null}var b={type:e,target:null,created:ns_.dt.getTime(),_a:{playHeadPosition:0}};if(arguments.length>1){for(var d=1,a=arguments.length;d<a;d++){for(var c in arguments[d]){if(c=="target"){b[c]=arguments[d][c]}else{b._a[c]=arguments[d][c]}}}}return b};ns_.DispatcherEvents={STREAM_START:"stream:start",STREAM_PAUSE:"stream:pause",STREAM_STOP:"stream:stop",STREAM_RESUME:"stream:resume",STREAM_METADATA:"stream:metadata",STREAM_SEND_DATA:"stream:senddata",STREAM_CHANGE:"stream:change",STREAM_ERROR:"stream:error",STREAM_LOADING:"stream:loading",STREAM_LOADED:"stream:loaded",STREAM_UNLOAD:"stream:unload",STREAM_VOLUME:"stream:volume",STREAM_SEEK:"stream:change",PLAYHEAD_UPDATE:"stream:change",MEDIA_CHANGE:"media:change"};ns_.StreamSenseEvents={PLAYLIST_END:"ss:playlistend",SHUTDOWN:"ss:shutdown",PLAY:"ss:play",PAUSE:"ss:pause",END:"ss:end",KEEP_ALIVE:"ss:keep-alive",HEARTBEAT:"ss:heartbeat",DISPATCH:"ss:dispatch",MEASURE:"ss:measure"};if(typeof(ns_.dict)=="undefined"){ns_.dict={}}ns_.dict.Labels=function(){return{measurementType:{name:"type",value:"hidden"},measurementDate:{name:"_t"},scriptVersion:{name:"st_sv",value:null},urlContainer:{name:"jspageurl"},eventCounter:{name:"st_ec"},error:{name:"st_er",value:null},eventType:{name:"st_ev",value:null},indexOfClipInPlaylist:{name:"st_cn"},programTitle:{name:"st_pr"},episodeTitle:{name:"st_ep"},episodePart:{name:"st_pn"},episodeTotalLength:{name:"st_el"},productionDate:{name:"st_dt"},type:{name:"st_ty"},bitrate:{name:"st_br"},stationName:{name:"st_st"},length:{name:"st_cl"},bandwidth:{name:"st_ub"},buffering:{name:"st_bt"},playerType:{name:"st_mp"},playerVersion:{name:"st_mv"},fee:{name:"st_fee"},totalPlayedTimeOfClip:{name:"st_pt"},playSequenceOfClip:{name:"st_sq"},playHeadPosition:{name:"st_po"},pausesSequenceOfClip:{name:"st_pc"},resolution:{name:"st_cs"},volume:{name:"st_vo"},windowState:{name:"st_ws"},playlistTitle:{name:"st_pl"},episodeParts:{name:"st_tp"},playlistLengthOfClips:{name:"st_ca"},playlistBufferTimeOfClips:{name:"st_bp"},playlistTotalPlayedTimeOfClips:{name:"st_pa"},playlistId:{name:"st_id"},playlistSequence:{name:"st_sp"},playlistPausesOfClips:{name:"st_pp"},playlistFirstPlay:{name:"st_pb",value:1},playlistLastEnd:{name:"st_pe",value:1},playlistNumberOfClips:{name:"st_cp"},heartbeatCounter:{name:"st_hc"},contentURL:{name:"st_cu"}}};ns_.EventDispatcher=ns_.Class.extend({_chain:null,_events:null,buildChain:function(){if(!this._chain){this._chain=ns_.ar.create();if(this._events){for(var a in this._events){this._chain[a]=null}}}},listen:function(b,a){if(!a instanceof Function){throw{message:"Listener isn't a function"}}this.buildChain();if(!this._chain[b]){this._chain[b]=ns_.ar.create(a)}else{this._chain[b].push(a)}},listened:function(a){if(((typeof this._chain[a]=="undefined")||(this._chain[a]==null)||(this._chain[a].length<=0))){return false}else{return true}},unlisten:function(c,b){if(!this.listened(c)){return false}for(var a=0;a<this._chain[c].length;a++){if(this._chain[c][a]===b){this._chain[c].splice(a,1)}}},fire:function(d,c){this.buildChain();c=[{target:this,type:d}].concat(c);for(var b in this._events){if(b==d&&typeof(this[d])=="function"){if(this[d].apply(this,c)==false){return false}}}if(!this.listened(d)){return false}for(var b=0,a=this._chain[d].length;b<a;b++){if(this._chain[d][b].apply(this,c)==false){return false}}}});ns_.Component=ns_.Class.extend(ns_.EventDispatcher,{_s:null,_a:null,_u:null,initialize:function(a){this._a={};this._u=ns_.ar.create();if(a){this._s=a}else{this._s=this}},set:function(c,b,a){if(!c||(ns_.ar.indexOf(this._u,c)!=-1&&!!!a)){return false}else{if(a){if(ns_.ar.indexOf(this._u,c)==-1){this._u.push(c)}}}this._a[c]=b;return true},get:function(a){if(a&&typeof this._a[a]!="undefined"){return this._a[a]}else{return null}},setAttribute:function(b,a){return this.set(b,a,true)},setAttributes:function(b){for(var a in b){this.set(a,b[a],true)}},getAttribute:function(a){return this.get(a)},getAttributes:function(c){var a={};for(var b in c){a[b]=this.get(b)}return a},getAllAttributes:function(){var a={};for(var b in this._a){a[b]=this._a[b]}return a}});ns_.Dispatcher=ns_.Class.extend(ns_.Component,(function(){this._ssEventQueue;this.last;function e($super,l){$super(l);this._ssEventQueue=ns_.ar.create();this._events={"ss:play":null,"ss:pause":null,"ss:end":null,"ss:keep-alive":null,"ss:heartbeat":null,"ss:playlistend":null,"ss:dispatch":null,"ss:measure":null}}function c(l){if(!l){return false}this._ssEventQueue.push(l)}function h(p){var n=false;for(var o=0,m=this._ssEventQueue.length;o<m;o++){if(this._ssEventQueue[o]===p){n=this._ssEventQueue.splice(o,1)}}return n}function i(r,q){var n,m,p;var l=ns_.ar.indexOf(this._ssEventQueue,r);p=l>-1?this._ssEventQueue[l]:false;q=p?p.type:q;if(r&&p==r){if(l>0){n=this._ssEventQueue[ns_.ar.indexOf(this._ssEventQueue,r)-1]}m=this._ssEventQueue[ns_.ar.indexOf(this._ssEventQueue,r)+1]}else{p=r;n=this._ssEventQueue[this._ssEventQueue.length-1]}if(!n){n=this.last}try{if(q&&(n||q=="play")&&(!n||q!=n.type)&&(!n||!(q=="pause"&&n.type=="end"))&&(!n||!(q=="pause"&&n.type=="play"&&!n.sent))){return true}else{return false}}catch(o){return false}}function g(o,m){var l=false;var n=o.substring(o.indexOf(":")+1);if(this.semaphore(false,n)||m._a.forced){l=new ns_.Measurement(this._s,n,m)}return l}function b(l,m){var n=this.dispatch(l.type,m);if(n){if(!m._a.forced){if(!m.target.isBuffering()&&this.semaphore(n,n.type)){n.send()}else{n.cancel()}}else{n.send(true)}}}function k(l,m){var n=this.dispatch(l.type,m);if(n){if(!m._a.forced){if(this.semaphore(n,n.type)){n.send()}else{n.cancel()}}else{n.send(true)}}}function a(l,m){var n=this.dispatch(l.type,m);if(n){if(!m._a.forced){if(this.semaphore(n,n.type)){n.send()}else{n.cancel()}}else{n.send(true)}}}function d(l,m){var n=this.dispatch(l.type,m);if(n){n.send()}}function j(n){var o=this._s._player.snapshot(),q=this._s._playlist._clip;o.forced=true;var l=new ns_.MediaEvent("heartbeat",o);l._a.totalPlayedTimeOfClip=q._playbackTime+(l.created-q._playbackStartTime);var p=this.dispatch(n.type,l);p.labels.heartbeatCounter.value=this._s._heart.counter;if(p){p.send()}}function f(l,m){this._s.fire(ns_.StreamSenseEvents.DISPATCH,m)}return{"ss:play":b,"ss:pause":k,"ss:end":a,"ss:keep-alive":d,"ss:heartbeat":j,"ss:dispatch":f,semaphore:i,enqueue:c,dequeue:h,dispatch:g,initialize:e}})());ns_.MediaComponent=ns_.Class.extend(ns_.Component,{initialize:function($super,a){if(a){$super(a)}}});ns_.Measurement=ns_.Class.extend(ns_.Component,{type:"",date:0,prefix:"ns_",succeeded:true,sent:false,pixel:null,initialize:function($super,b,d,c){$super(b);this.labels=new ns_.dict.Labels();this.custom={};this.date=c.created;if(d&&typeof this.eventTypes[d]!="undefined"){this.type=this.labels.eventType.value=d;if(this.type=="heartbeat"){this.labels.eventType.value="hb"}if(c&&c._a){for(var a in c._a){if(typeof this.labels[a]!="undefined"){this.labels[a].value=c._a[a]}}}this.measure()}this.labels.measurementDate.value=this.date;this.custom.ns_ts=this.date},labels:{},eventTypes:{play:{mandatory:["measurementDate","measurementType","scriptVersion","eventCounter","eventType","indexOfClipInPlaylist","episodeTitle","episodePart","buffering","playerType","playerVersion","playSequenceOfClip","playHeadPosition","episodeParts","playlistId","playlistSequence","bandwidth"],playlist:["playlistFirstPlay"],optionals:["programTitle","episodeTotalLength","productionDate","type","length","fee","resolution","bitrate","volume","windowState","playlistTitle","playlistLengthOfClips","error","stationName","contentURL","urlContainer"]},pause:{mandatory:["measurementDate","measurementType","scriptVersion","eventCounter","eventType","indexOfClipInPlaylist","episodeTitle","episodePart","length","buffering","playerType","playerVersion","playHeadPosition","pausesSequenceOfClip","totalPlayedTimeOfClip","volume","episodeParts","playlistId","playlistSequence","bandwidth"],playlist:["playlistBufferTimeOfClips","playlistTotalPlayedTimeOfClips","playlistPausesOfClips","playlistLengthOfClips"],optionals:["programTitle","episodeTotalLength","productionDate","type","fee","resolution","windowState","playlistTitle","bitrate","stationName","error","urlContainer","contentURL"]},end:{mandatory:["measurementDate","measurementType","scriptVersion","eventCounter","eventType","indexOfClipInPlaylist","episodeTitle","episodePart","length","buffering","playerType","playerVersion","playHeadPosition","pausesSequenceOfClip","totalPlayedTimeOfClip","volume","episodeParts","playlistId","playlistSequence","bandwidth"],playlist:["playlistBufferTimeOfClips","playlistTotalPlayedTimeOfClips","playlistPausesOfClips","playlistLastEnd","playlistLengthOfClips"],optionals:["programTitle","episodeTotalLength","productionDate","type","fee","resolution","windowState","playlistTitle","bitrate","stationName","error","contentURL","urlContainer"]},"keep-alive":{mandatory:["measurementDate","measurementType","eventCounter","eventType","episodeTitle","playHeadPosition","playlistId"],optionals:["programTitle","playlistTitle","contentURL"]},heartbeat:{mandatory:["measurementDate","measurementType","scriptVersion","eventCounter","eventType","indexOfClipInPlaylist","episodeTitle","episodePart","length","buffering","playerType","playerVersion","playHeadPosition","pausesSequenceOfClip","totalPlayedTimeOfClip","volume","episodeParts","playlistId","playlistSequence","bandwidth","heartbeatCounter"],playlist:["playlistBufferTimeOfClips","playlistTotalPlayedTimeOfClips","playlistPausesOfClips","playlistLengthOfClips"],optionals:["programTitle","episodeTotalLength","productionDate","type","fee","resolution","windowState","playlistTitle","bitrate","stationName","error","contentURL","urlContainer"]}},bulkSet:function(b){for(var a in b){if(typeof this.labels[a]!="undefined"){this.labels[a].value=b[a]}else{this.custom[a]=b[a]}}},measure:function(){if(!!!this.type||!!!this.labels.eventType.value){return}this._s.fire(ns_.StreamSenseEvents.MEASURE,this);this._s._d.enqueue(this)},send:function(c){var b=this._s._d.last?this._s._d.last.type=="end":false,a=this._s._d.last?this._s._d.last.type=="pause":false;if(this.type!="heartbeat"&&this.type!="custom"&&this.type!="keep-alive"){this._s._d.last=this}if((this.type=="end"&&this._s._playlist._ended)||(b&&this.type=="play")||(a&&!this._s._playlist._ended)){if(!this._s._shutdown){window.setTimeout(this.preprocessPlaylistLabels.STbind(this,this.getPixelURL(),c),this._s.cfg.PLAYLIST_END_TIMER)}else{this.request(this.getPixelURL(),c)}}else{this.request(this.getPixelURL(),c)}this._s._d.dequeue(this);this._s._d.fire(ns_.StreamSenseEvents.DISPATCH,this)},preprocessPlaylistLabels:function(c,d){if((this.type=="play"||this.type=="end")&&!(((this.type=="play"&&this._s._playlist._sequence==1&&this._s._playlist._eventCounter<=2))||(this.type=="end"&&this._s._playlist._ended))){if(this.type=="play"){c=this.getPixelURL()}var e=this.eventTypes[this.type].playlist;for(var a in e){if(typeof this.labels[e[a]]!="undefined"){var b=[((typeof this.labels[e[a]].prefix=="undefined"||this.labels[e[a]].prefix)?this.prefix:""),this.labels[e[a]].name].join("");c=c.replace(new RegExp(b+"=[^&]*&","gi"),"")}}}this.request(c,d)},request:function(a,b){this.pixel=(ns_.b.ie)?new Image():(b&&this.type=="end"&&this._s._shutdown&&this.labels.playlistLastEnd.value)?document.body.appendChild(document.createElement("img")):new Image();if(b&&!this._s._shutdown){this.pixel.style.display="none"}if(!this._s._shutdown){this.pixel.onload=(function(c){return function(d){if(!d){d=event;var f=this}else{var f=d.target}var e=c._s;c.sent=true}})(this);this.pixel.onerror=this.pixel.onload}if(ns_.b.ie||!(this.type=="end"&&this._s._shutdown)){this.pixel.src=a}else{document.write(["<h","tml><h","ead><me","ta http",'-equiv="refresh" content="0;url=',document.location.href,'"/></h',"ead>","<bo","dy><scr",'ipt>var date = "',this.date,'"; if ((new Date().getTime()-date) < 500){ var p = new Image(); p.src ="',a,'"}</scr',"ipt></b","ody></h","tml>"].join(""))}},cancel:function(){this.sent=false;this.succeeded=false;this._s._d.dequeue(this)},serialize:function(){var e=ns_.ar.create();var g=this.eventTypes[this.type];for(var b in g){var k=g[b];for(var f=0,d=k.length;f<d;f++){var h=this.labels[k[f]];var c=typeof(h.value);if((c=="undefined"||h.value==="")&&b=="optionals"){continue}else{if(c=="undefined"){h.value=this._s.cfg.DEFAULT_VALUE_STR}}var a=[((typeof h.prefix=="undefined"||h.prefix)?this.prefix:""),h.name].join("");var j=c=="number"?Math.round(h.value*Math.pow(10,2))/Math.pow(10,2):h.value;e.push([a,"=",ns_.encode(typeof j=="string"?j:String(j))].join(""))}}for(var h in this.custom){var j=this.custom[h];if(j&&j!=""){e.push([h,"=",ns_.encode(j)].join(""))}}return e.join("&")},getPixelURL:function(){return[this._s.getPixelURL(),"&",this.serialize()].join("")}});ns_.Heart=ns_.Class.extend(ns_.EventDispatcher,(function(){var c=500;this._s;this.interval;this.pulses;this.pulse;this.counter;this.beats;this.lapse;this.pause;function a(g){this._s=g;this.pulses=ns_.ar.create();this["heart:tick"]=this.onTick.STbind(this);this._s._d.listen("ss:dispatch",this["ss:dispatch"].STbind(this))}function e(){this.counter=0;this.beats=0;this.lapse=0;this.pause=0;if(this.pulses.length>0){this.pulse=this.pulses[0]}else{this.pulse=null}}function d(g){if(!(g.tempo==0&&g.limit==0)){this.pulses.push(g);if(this.pulses.length==1){this.pulse=this.pulses[0];this.reset()}}}function b(){var g=ns_.dt.getTime();if(this.pulse){if((g-this.lapse)>=this.pulse.tempo){this.beats++;this.counter++;this._s._d.fire("ss:heartbeat");this.lapse=g;if(this.pulse.limit!=0&&this.beats==this.pulse.limit){this.beats=0;if(ns_.ar.indexOf(this.pulses,this.pulse)+1<this.pulses.length){this.pulse=this.pulses[ns_.ar.indexOf(this.pulses,this.pulse)+1]}else{this["ss:dispatch"](null,{type:"end"})}}}}this.interval=window.setTimeout(this["heart:tick"],this._tick)}function f(g,h){switch(h.type){case"play":if(this.pulse){this.lapse=h.date-this.pause;this.interval=window.setTimeout(this["heart:tick"],this._tick)}break;case"pause":if(this.pulse){this.pause=h.date-this.lapse;this.counter=0}case"end":window.clearTimeout(this.interval);if(h.type=="end"){this.reset()}break}}return{"ss:dispatch":f,onTick:b,reset:e,addPulse:d,initialize:a}})());ns_.Heart.Pulse=function(b,a){this.limit=a;this.tempo=b};ns_.Playlist=ns_.Class.extend(ns_.Component,{isClipActive:function(a){if(!!a&&!!this._clip&&this._clip===a){return true}else{return false}},addNewClip:function(a){var b=new ns_.Clip(this._s,this,!a);this.addClip(b,!a);return b},addClip:function(b,a){if(ns_.ar.indexOf(this._clips,b)==-1){this._clips.push(b);if(!b.get("episodeTitle")){this._indexes.push(b)}}if(!!a){this.setClip(b)}this.fire(ns_.DispatcherEvents.MEDIA_CHANGE,[this,b]);return this._clips.length},setClip:function(a){if(ns_.ar.indexOf(this._clips,a)==-1){this.addClip(a,false)}if(this._clip){this._clip.deactivate()}this._clip=a;this._clip.activate();return this._clip},getBufferTimeOfClips:function(){for(var b=0,c=0,a=this._clips.length;c<a;c++){b+=Number(this._clips[c]._bufferingTime)}return b},getPausesOfClips:function(){for(var b=0,c=0,a=this._clips.length;c<a;c++){b+=Number(this._clips[c]._pauses)}return b},getTotalPlaybackTime:function(d){for(var b=0,c=0,a=this._clips.length;c<a;c++){if(this._clips[c]==this._clip){b+=Number(d.labels.totalPlayedTimeOfClip.value)}else{b+=Number(this._clips[c]._playbackTime)}}return Number(b)+Number(this._clipPlaybackTime)},getTotalLength:function(){for(var b=0,c=0,a=this._clips.length;c<a;c++){b+=Number(this._clips[c].get("length"))}return b},buildEpisode:function(){var c=ns_.ar.create();var e=this._clip.get("programTitle");var d=this._clip.get("episodeTitle");if(e&&d){for(var b=0,a=this._clips.length;b<a;b++){if(this._clips[b].get("programTitle")==e&&this._clips[b].get("episodeTitle")==d){c.push(this._clips[b])}}}if(!c.length){c.push(this._clip)}return c},getEpisodeTotalLength:function(){var d=0;if(!!this._clip.get("episodeTotalLength")){return this._clip.get("episodeTotalLength")}else{var e=this.buildEpisode();for(var c=0,b=e.length;c<b;c++){var a=Number(e[c].get("length"));d=d+a}}return d},getEpisodePart:function(){var a=this.buildEpisode();var b=ns_.ar.indexOf(a,this._clip);if(b==-1){return 1}return b+1},getEpisodeParts:function(){var a=this.buildEpisode();return a.length},getClipIndex:function(){var a=ns_.ar.indexOf(this._indexes,this._clip);if(a==-1){return 1}return a+1},getNumberOfClips:function(){return this._clips.length},getID:function(){return ns_.dt.getTime()+"_"+this._index},initialize:function($super,b,a){$super(b);this._events={"media:change":null,"ss:dispatch":null,"ss:measure":null,onReceiveMetaData:null};this._index=++this._s._playlistCount;this._id=this.getID();this._clip=null;this._clips=ns_.ar.create();this._started=false;this._sequence=1;this._eventCounter=1;this._pauses=0;this._ended=false;this._indexes=ns_.ar.create();this._clipPlaybackTime=0;this["onReceiveMetaData_cb"]=this["onReceiveMetaData"].STbind(this);this["onStreamChange_cb"]=this["stream:change"].STbind(this);this["onMeasure_cb"]=this["ss:measure"].STbind(this);this["onDispatch_cb"]=this["ss:dispatch"].STbind(this);if(a){this.activate()}},reset:function(){for(var b=0,a=this._clips.length;b<a;b++){this._clips[b].reset()}this._started=false;this._pauses=0;this._sequence=1;this._ended=false;this._id=this.getID();this._clipPlaybackTime=0;this._eventCounter=1},loop:function(){this._sequence++},activate:function(){this._s.listen("ss:measure",this["onMeasure_cb"]);this._s.listen("ss:dispatch",this["onDispatch_cb"])},deactivate:function(){this._s.unlisten("ss:measure",this["onMeasure_cb"]);this._s.unlisten("ss:dispatch",this["onDispatch_cb"])},listenClip:function(a){a.listen("onReceiveMetaData",this["onReceiveMetaData_cb"])},unlistenClip:function(a){a.unlisten("onReceiveMetaData",this["onReceiveMetaData_cb"])},onReceiveMetaData:function(a,c){for(var b in c._a){switch(b){case"playlistTitle":this.set(b,c._a[b]);break}}},"stream:change":function(a,b){this._ended=false},"media:change":function(b,a,c){this._ended=false;this.listenClip(c)},"ss:measure":function(a,b){this.set("playlistLengthOfClips",this.getTotalLength());this.set("indexOfClipInPlaylist",ns_.ar.indexOf(this._clips,this._clip)+1);this.set("playlistBufferTimeOfClips",this.getBufferTimeOfClips());this.set("playlistPausesOfClips",this.getPausesOfClips());this.set("playlistTotalPlayedTimeOfClips",this.getTotalPlaybackTime(b));this.set("playlistSequence",this._sequence);this.set("episodeTitle",this.getClipIndex());this.set("episodeParts",this.getEpisodeParts());this.set("episodePart",this.getEpisodePart());if(this.get("episodeParts")>1){this.set("episodeTotalLength",this.getEpisodeTotalLength())}if(!!this.get("playlistTitle")&&this.get("playlistTitle")!=""){this.set("programTitle",this.get("playlistTitle"))}this.set("playlistFirstPlay",1);this.set("playlistLastEnd",1);this.set("playlistId",this._id);this.set("eventCounter",this._eventCounter);b.bulkSet(this.getAllAttributes())},"ss:dispatch":function(a,b){switch(b.type){case"play":this._started=true;this._eventCounter++;break;case"pause":this._pauses++;this._eventCounter++;break;case"keep-alive":this._eventCounter++;break;case"end":window.setTimeout((function(){if(this._ended){this.reset()}}).STbind(this),this._s.cfg.PLAYLIST_END_TIMER);break}}});ns_.Clip=ns_.Class.extend(ns_.Component,{reset:function(){this._playlist._clipPlaybackTime+=Number(this._playbackTime?this._playbackTime:0);this._bufferingStart=this._bufferingTime=this._playbackStartPos=this._playbackStartTime=this._playbackTime=0;this._starts=this._pauses=0;this._states={isPlaying:false,isBuffering:false,isSeeking:false,isStopped:false,isPaused:false}},initialize:function($super,d,a,c){if(d){$super(d)}this._events={};for(var b in ns_.MediaEvents){this._events[ns_.MediaEvents[b]]=null}this._events.onBufferStart=null;this._events.onBufferEnd=null;this._playlist=a;this.listen(ns_.MediaEvents.STREAM_CHANGE,this._playlist.onStreamChange_cb);this.reset();this._states={isPlaying:false,isBuffering:false,isSeeking:false,isStopped:false,isPaused:false};if(!!c){this.activate()}},activate:function(){this.deactivate();if(!this.onMeasure_cb){this.onMeasure_cb=this.onMeasure.STbind(this)}this._s.listen(ns_.StreamSenseEvents.MEASURE,this.onMeasure_cb);if(!this.onDispatch_cb){this.onDispatch_cb=this.onDispatch.STbind(this)}this._s.listen(ns_.StreamSenseEvents.DISPATCH,this.onDispatch_cb);this.fire(ns_.MediaEvents.STREAM_CHANGE,this)},deactivate:function(){if(!this._playlist.isClipActive(this)){return}this._s.unlisten(ns_.StreamSenseEvents.MEASURE,this.onMeasure_cb);this._s.unlisten(ns_.StreamSenseEvents.DISPATCH,this.onDispatch_cb)},isPlaying:function(){return this._states.isPlaying&&this._playlist.isClipActive(this)},isBuffering:function(){return this._states.isBuffering&&this._playlist.isClipActive(this)},isStopped:function(){return this._states.isStopped},isPaused:function(){return this._states.isPaused&&this._playlist.isClipActive(this)},onStart:function(a,b){this.reset();if(b._a.length>0){this.set("length",b._a.length)}this._s.fire(ns_.DispatcherEvents.STREAM_START,b)},onPause:function(a,b){b._a.totalPlayedTimeOfClip=this._playbackTime+(b.created-this._playbackStartTime);this._s.fire(ns_.DispatcherEvents.STREAM_PAUSE,b)},onResume:function(a,b){this._s.fire(ns_.DispatcherEvents.STREAM_RESUME,b)},onBufferStart:function(a,b){this._states.isBuffering=true;this._bufferingStart=b.created},onBufferEnd:function(a,b){this._states.isBuffering=false;if(b.created<this._bufferingStart){this._bufferingTime+=this._bufferingStart-b.created}else{this._bufferingTime+=b.created-this._bufferingStart}},onStop:function(a,b){var c=this._s._d;this._s._playlist._ended=true;if(c.last&&c.last.type=="play"){b._a.totalPlayedTimeOfClip=this._playbackTime+(b.created-this._playbackStartTime)}else{b._a.totalPlayedTimeOfClip=this._playbackTime}this._s.fire(ns_.DispatcherEvents.STREAM_STOP,b)},onSeek:function(a,b){this._states.isSeeking=true;if((typeof b._a.seekStart!="undefined")&&(typeof b._a.seekEnd!="undefined")){b._a.playHeadPosition=b._a.seekStart;if(this.isPlaying()){this.fire(ns_.MediaEvents.STREAM_PAUSE,b);b._a.playHeadPosition=b._a.seekEnd;b.created=ns_.dt.getTime();this.fire(ns_.MediaEvents.STREAM_RESUME,b)}}this._states.isSeeking=false},onReceiveMetaData:function(a,c){for(var b in c._a){switch(b){case"length":this.set(b,c._a[b]);break}}},onError:function(a,b){this._s.fire(ns_.DispatcherEvents.STREAM_ERROR,b)},onMeasure:function(a,b){this.set("playSequenceOfClip",this._starts+1);this.set("pausesSequenceOfClip",this._pauses);this.set("buffering",this._bufferingTime);b.bulkSet(this.getAllAttributes());if((b.type=="pause"||b.type=="end")&&Number(b.labels.totalPlayedTimeOfClip.value)>0){this._playbackTime=Number(b.labels.totalPlayedTimeOfClip.value)}},onDispatch:function(a,b){switch(b.type){case"play":this._playbackStartTime=b.date;this._playbackStartPos=b.labels.playHeadPosition.value;this._states.isPlaying=true;this._states.isPaused=false;this._states.isStopped=false;this._starts++;break;case"pause":this._states.isPlaying=false;this._states.isPaused=true;this._states.isStopped=false;this._playbackStartTime=b.date;this._playbackStartPos=b.labels.playHeadPosition.value;this._pauses++;this._playbackTime=Number(b.labels.totalPlayedTimeOfClip.value);break}}});if(typeof(ns_)=="undefined"){ns_=new Object()}if(typeof(ns_.dt)=="undefined"){ns_.dt={getTime:function(){return new Date().getTime()}}}if(typeof(ns_.cookie)=="undefined"){ns_.cookie={}}ns_.cookie.create=function(c,f,d,h,e,g){if(d){var b=new Date();if(typeof(d)=="number"){b.setTime(ns_.dt.getTime()+(d*1000))}else{if(d.getTime){b.setTime(d.getTime())}}var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=[c,"=",f,a,"; path=",h?h:"/",e?"; domain="+e:"",g?"; secure":""].join("")};ns_.cookie.read=function(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null};ns_.cookie.erase=function(a){ns_.cookie.create(a,"",-1)};if(typeof(ns_)=="undefined"){ns_=new Object()}if(typeof(ns_.Loader)=="undefined"){ns_.Loader={config:{}}}ns_.Loader.setup=function(b){for(var a in b){switch(a){case"type":case"attributes":ns_.Loader.config[a]=b[a]}}};ns_.Loader.load=function(f){try{var c=document.getElementsByTagName("HEAD").item(0);var a=document.createElement("SCRIPT");a.type=ns_.Loader.config.type||"text/javascript";a.src=f;if(ns_.Loader.config.attributes){for(var b in ns_.Loader.config.attributes){a.setAttribute(b,ns_.Loader.config.attributes[b])}}c.appendChild(a)}catch(d){}};ns_.Loader.loadFromScriptSource=function(f,h){if(!h||!f||!document.getElementsByTagName){return}var b=new RegExp(f+"(?:\\.min)?\\.js(?:\\?.*"+h+"=([^&]*))+","i");var n=document.getElementsByTagName("SCRIPT");for(var g=0,d=n.length;g<d;g++){if(b.test(n[g].src)){var a=n[g].src.match(b)[1].split(",");var k=n[g].src.replace(b,"");for(var e=0,c=a.length;e<c;e++){ns_.Loader.load(k+a[e]+(/\.min\./i.test(n[g].src)?".min.js":".js"))}}}};ns_.Loader.loadFromScriptSource("streamsense","load");ns_.StreamSense=ns_.Class.extend(ns_.Component,(function(){var k={TIMER_DELAY:500,KEEP_ALIVE_DELAY:20*60*1000,DEFAULT_ERROR_STR:"STREAMSENSE_ERROR_UNKNOWN",DEFAULT_VALUE_STR:"%STATICTEXT_UNKNOWN%",DEBUG:false,PLAYLIST_END_TIMER:500,LOAD_COMPONENTS:ns_.ar.create()};var e="4.1.0";var z=0;var n=ns_.ar.create();this._shutdown;this._counterName;this._errors;this._events;this._d;this._player;this._playlist;this.MediaComps;this._instanceIndex;this._playlistCount;this._keepAliveTimer;this._heart;function a($super,H,E,G){$super(null);this._shutdown=false;G=G||{};for(var F in this.cfg){G[F]=(typeof(G[F])!="undefined")?G[F]:this.cfg[F]}this.cfg=G;this._errors=ns_.ar.create();ns_.Error.setDebug(this.cfg.DEBUG);this._events={};for(var F in ns_.DispatcherEvents){this._events[ns_.DispatcherEvents[F]]=null}for(var F in ns_.StreamSenseEvents){this._events[ns_.StreamSenseEvents[F]]=null}this.labels=new ns_.dict.Labels();z++;n.push(this);this._instanceIndex=z;this._playlistCount=0;if(!!E){this.setPixelURL(E)}this._d=new ns_.Dispatcher(this);if(this.cfg.LOAD_COMPONENTS.length>0){for(var F=0,D=this.cfg.LOAD_COMPONENTS.length;F<D;F++){this.registerMediaComponent(this.cfg.LOAD_COMPONENTS[F])}}if(ns_.b.ff){window.setTimeout(function(J,I){return function(){J.setPlayer(I)}}(this,H),this.cfg.TIMER_DELAY/2)}else{j.call(this,H)}this._heart=new ns_.Heart(this);this._heart.addPulse(new ns_.Heart.Pulse(10000,6));this._heart.addPulse(new ns_.Heart.Pulse(60000,0));ns_.dom.addEvent(window,"beforeunload",this.shutdown.STbind(this));ns_.dom.addEvent(window,"unload",this.shutdown.STbind(this))}function y(D){if(!!D){if(D.indexOf("?")==-1){D+="?video"}else{if(D.indexOf("?")==(D.length-1)){D+="video"}}return this._counterName=D}}function p(){if(!!this._counterName){return this._counterName}else{if(window.ns_p&&typeof ns_p.src==="string"){return this.setPixelURL(ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""))}else{if(window.ns_pixelUrl){return this.setPixelURL(window.ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""))}else{return this.setPixelURL(document.location.href.replace(/#.*/,""))}}}}function j(D){if(this._player&&this._player.deactivate){this._player.deactivate()}if(typeof(D)=="string"){D=document.getElementById(D)}this._player=w.call(this,D);if(!this._player){return ns_.Error.info("StreamSense.setPlayer: unable to set player ["+typeof(D)+"] = "+D)}}function q(){if(this._player){return this._player}else{return false}}function C(D){if(this._playlist){this._playlist.deactivate()}if(!D){return this._playlist=new ns_.Playlist(this,true)}else{return this._playlist=D}}function x(){if(!this._playlist){return this.setPlaylist()}else{return this._playlist}}function c(D){if(!D){return this.getPlaylist().addNewClip()}else{return this.getPlaylist().addClip(D,true)}}function t(D){if(!D){return this.getPlaylist().addNewClip(true)}else{return this.getPlaylist().addClip(D)}}function i(){if(this.getPlaylist()._clip){return this.getPlaylist()._clip}else{return this.setClip()}}function g(E,F,D){if(this.getPlayer()&&this.getPlayer()._nativeLabels){this.getPlayer()._nativeLabels.push(E);this.getPlayer()._realLabels.push(F)}return this.setAttribute(F,D)}function u(){return z}function v(){return this._instanceIndex}function s(G){if(typeof this.MediaComps=="undefined"){this.MediaComps=ns_.ar.create()}var D=true;for(var F=0,E=this.MediaComps.length;F<E;F++){if(this.MediaComps[F].prototype.isEligible===G.prototype.isEligible){this.MediaComps[F].prototype.deactivate();D=this.MediaComps[F]=G}}if(!G||!D){return ns_.Error.info("registerMediaComponent got a wrong reference: ["+typeof(G)+"] = "+G)}this.MediaComps.push(G);this.MediaComps[G.prototype.getNickname()]=G}function w(F){if(typeof this.MediaComps=="undefined"){return setTimeout((function(H,G){return function(){H.setPlayer.call(H,G)}})(this,F),500)}for(var E=0,D=this.MediaComps.length;E<D;E++){if(this.MediaComps[E].prototype.isEligible(F)){return new this.MediaComps[E](this,F)}}}function b(D,E){this._d.fire(ns_.StreamSenseEvents.PLAY,E)}function d(D,E){this._d.fire(ns_.StreamSenseEvents.PAUSE,E)}function l(D,E){this._d.fire(ns_.StreamSenseEvents.PLAY,E)}function h(D,E){this._d.fire(ns_.StreamSenseEvents.END,E)}function f(D,E){if(E.text){var F=/;/.test(E.text)?E.text.replace(/;/g,ns_.encode(";")):E.text;this._errors.push((F||F=="")?F:this.cfg.DEFAULT_ERROR_STR)}}function m(D,E){this.set("scriptVersion",[e,";JS"].join(""));this.set("error",this._errors.join(";"));this.set("urlContainer",document.location.href);E.bulkSet(this.getAllAttributes())}function A(D,E){this._errors=ns_.ar.create();switch(E.type){case"play":case"keep-alive":this._keepAliveTimer=window.setTimeout((function(F){return function(){var G=F._player.snapshot();G.forced=true;F._d.fire("ss:keep-alive",new ns_.MediaEvent("keep-alive",G))}})(this),this.cfg.KEEP_ALIVE_DELAY);break;case"pause":case"end":window.clearTimeout(this._keepAliveTimer);this._keepAliveTimer=null;break}}function B(E,D){try{if(this._d.last&&this._d.last.type!="end"){var F=this.getPlayer().snapshot();F.forced=true;var H=new ns_.MediaEvent(ns_.MediaEvents.STREAM_STOP,F);this.getClip().fire(ns_.MediaEvents.STREAM_STOP,H)}this.getClip().deactivate();this.getPlaylist().deactivate();this.getPlayer().deactivate()}catch(G){}}function r(D){if(!this._shutdown){this._shutdown=true;this.fire(ns_.StreamSenseEvents.SHUTDOWN,D)}}function o(D){if(typeof D=="undefined"){D=0}for(var F=0,E=n.length;F<E;F++){if(n[F]._instanceIndex==D+1){return n[F]}}return this.prototype}return{registerMediaComponent:s,"stream:start":b,"stream:pause":d,"stream:resume":l,"stream:stop":h,"stream:error":f,"ss:measure":m,"ss:dispatch":A,"ss:shutdown":B,shutdown:r,initialize:a,setPixelURL:y,getPixelURL:p,setPlayer:j,getPlayer:q,setPlaylist:C,getPlaylist:x,getClip:i,setClip:c,setAttributeASX:g,getCount:u,getIndex:v,getStreamSense:o,cfg:k}})());ns_.StreamSense.getStreamSense=ns_.StreamSense.prototype.getStreamSense;if(typeof(ns_)=="undefined"){ns_=new Object()}ns_.HTML5MediaComponent=ns_.Class.extend(ns_.MediaComponent,{_nickName:"html5",_clip:null,_player:null,_playlist:null,_events:{},_seekStart:null,_wasBuffering:false,_listeners:{loadstart:function(a){if(!this._clip){this.setClip()}},loadedmetadata:function(a){if(!this._clip){this.setClip()}},playing:function(a){if(this.getClip()._starts==0){this.getClip().fire("onStart",new ns_.MediaEvent("onPlay",this.snapshot()))}else{this.getClip().fire("onResume",new ns_.MediaEvent("onPlay",this.snapshot()))}},pause:function(a){this.getClip().fire("onPause",new ns_.MediaEvent("onPause",this.snapshot()))},ended:function(a){this.getClip().fire("onStop",new ns_.MediaEvent("onStop",this.snapshot()))},seeking:function(a){this._seekStart=this.getPosition()},seeked:function(b){var a=this.snapshot();a.seekStart=this._seekStart;a.seekEnd=a.playHeadPosition;this.getClip().fire(ns_.MediaEvents.STREAM_SEEK,new ns_.MediaEvent(ns_.MediaEvents.STREAM_SEEK,a));this._seekStart=null}},initialize:function($super,c,b){$super(c);this.listeners={};for(var a in this._listeners){this.listeners[a]=this._listeners[a].STbind(this)}for(var a in ns_.DispatcherEvents){this._events[ns_.DispatcherEvents[a]]=null}this._s.registerMediaComponent(ns_.HTML5MediaComponent);if(b){this.activate(b)}},activate:function(a){this._player=a;this._s.registerMediaComponent(ns_.HTML5MediaComponent);this.bindEvents();if(!this["onMeasure_cb"]){this["onMeasure_cb"]=this.onMeasure.STbind(this)}this._s.listen("ss:measure",this["onMeasure_cb"]);if(!this["onMediaChange_cb"]){this["onMediaChange_cb"]=this.onMediaChange.STbind(this)}this.getPlaylist().listen(ns_.DispatcherEvents.MEDIA_CHANGE,this["onMediaChange_cb"])},deactivate:function(){if(!this._player){return false}this.unbindEvents();this._s.unlisten("ss:measure",this["onMeasure_cb"]);this.getPlaylist().unlisten(ns_.DispatcherEvents.MEDIA_CHANGE,this["onMediaChange_cb"])},bindEvents:function(){for(var a in this.listeners){ns_.dom.addEvent(this._player,a,this.listeners[a])}},unbindEvents:function(){for(var a in this.listeners){ns_.dom.removeEvent(this._player,a)}},listenClip:function(){if(!this._clip){return false}var b;for(var a in ns_.MediaEvents){b=ns_.MediaEvents[a];if(typeof this[b]!="undefined"&&typeof this[b].STbind!="undefined"){if(!this[b+"_cb"]){this[b+"_cb"]=this[b].STbind(this)}this._clip.listen(b,this[b+"_cb"])}}},unlistenClip:function(){if(!this._clip){return false}var b;for(var a in ns_.MediaEvents){b=ns_.MediaEvents[a];if(typeof this[b]!="undefined"&&typeof this[b].STbind!="undefined"){this._clip.unlisten(b,this[b+"_cb"])}}},getNickname:function(){return this._nickName},setClip:function(){if(this._clip&&this.getPlaylist().isClipActive(this._clip)){if(this._clip.isPlaying()||this._clip.isPaused()){this._clip.fire("onStop",new ns_.MediaEvent("onStop",this.snapshot()))}this.unlistenClip();this._clip=oClip;this.listenClip()}else{if(this._clip){this.listenClip()}else{this._clip=this.getPlaylist().addNewClip();this.listenClip()}}return this._clip},getClip:function(){if(!!this._clip){return this._clip}else{if(this.getPlaylist()._clips.length==0){return this.setClip()}}},setPlaylist:function(){return this._s.setPlaylist()},getPlaylist:function(){return this._s.getPlaylist()},isPlaying:function(){var a=false;if(this._player.readyState>=this._player.HAVE_FUTURE_DATA&&!this._player.paused&&!this._player.ended){a=true}return a},isPaused:function(){var a=this._player.paused;return a},isEligible:function(a){try{if(a.nodeName.toLowerCase()=="video"&&a.NETWORK_IDLE){return true}}catch(b){return false}return true},snapshot:function(){var a={};a.target=this.getClip();a.playHeadPosition=this.getPosition();a.length=this.getLength();a.volume=this.getVolume();return a},isLooping:function(){if(this._player.getAttribute("loop")){return true}else{return false}},getPosition:function(){return(this._player.currentTime*1000).toFixed(0)},getLength:function(){return(this._player.duration*1000).toFixed(0)},getVolume:function(){if(!this._player.muted){return(this._player.volume*100).toFixed(0)}else{return 0}},getPlaylistName:function(){return document.title},getPlayerVersion:function(){return 0},getBandWidth:function(){return 0},getResolution:function(){return[this._player.videoWidth,"x",this._player.videoHeight].join("")},onMeasure:function(a,b){this.setAttribute("bitrate",0);this.setAttribute("playerType","HTML5");this.setAttribute("playerVersion",this.getPlayerVersion());this.setAttribute("bandwidth",this.getBandWidth());this.setAttribute("resolution",this.getResolution());b.bulkSet(this.getAllAttributes())},onMediaChange:function(b,a,c){this._clip=c}});(function(){if(typeof(ns_)!="undefined"&&typeof(ns_.StreamSense)!="undefined"){ns_.StreamSense.getStreamSense().registerMediaComponent(ns_.HTML5MediaComponent)}else{setTimeout(arguments.callee,500)}})();(function(){"use strict";var apilib;apilib=function apilib(){return new apilib.core.Init},apilib.core=apilib.prototype={Init:function Init(){return this.VERSION="0.1.0",this.docEl=document.documentElement,this.log=this.log(!0,!0),this.utils=this.utils(),this.vendorPrefix=this.vendor(),this.appCache={},this.support={history:this.supportHistory(),localStorage:this.supportLocalStorage(),geoLocation:this.supportGeoLocation(),appCache:this.supportApplicationCache(),overflowScrolling:this.supportOverflowScrolling(),touch:this.supportTouchEvents()},this.screen={width:this.docEl.clientWidth,height:this.docEl.clientHeight},this},extend:function extend(obj){var prop;for(prop in obj)obj.hasOwnProperty(prop)&&(apilib.core[prop]=obj[prop])},getElementById:function getElementById(id){return document.getElementById(id)},querySelectorAll:function querySelectorAll(query){return document.querySelectorAll(query)},getElementsByIds:function getElementsByIds(arrayOfIds){var elements={},element,i,li=arrayOfIds.length;for(i=0;i<li;i+=1)element=apilib.core.getElementById(arrayOfIds[i]),element&&(elements[arrayOfIds[i]]=element);return elements},vendor:function vendor(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":typeof window.opera!="undefined"?"O":""},supportHistory:function supportHistory(){return!!window.history&&!!window.history.pushState},supportLocalStorage:function supportLocalStorage(){return!!window.hasOwnProperty&&!!window.hasOwnProperty("localStorage")},supportGeoLocation:function supportGeoLocation(){return!!navigator.geolocation},supportApplicationCache:function supportApplicationCache(){return!!window.applicationCache},supportOverflowScrolling:function supportOverflowScrolling(){return typeof this.docEl.style.webkitOverflowScrolling=="string"},supportTouchEvents:function supportTouchEvents(){return typeof document.createTouch!="undefined"}},apilib.core.Init.prototype=apilib.core,apilib.extend=apilib.core.extend;if(window.apilib)throw new Error("apilib library already defined");window.apilib=apilib})(),Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement){"use strict";if(this===void 0||this===null)throw new TypeError;var t=Object(this),len=t.length>>>0;if(len===0)return-1;var n=0;arguments.length>0&&(n=Number(arguments[1]),n!==n?n=0:n!==0&&n!==Infinity&&n!==-Infinity&&(n=(n>0||-1)*Math.floor(Math.abs(n))));if(n>=len)return-1;var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++)if(k in t&&t[k]===searchElement)return k;return-1}),function(lib){"use strict";lib.extend({utils:function utils(){return{punctatePrice:function punctatePrice(value,punctator){var expression=/(-?[0-9]+)([0-9]{3})/,result=[],val=expression.exec(value),previous;while(val){if(!val)break;previous=val,result.unshift(val[2]),val=expression.exec(val[1])}return previous&&result.unshift(previous[1]),result.join(punctator)||value},readFormValues:function readFormValues(elements){var values=[],key,value,i;for(i=0;i<elements.length;i+=1)key=elements[i].name,value=elements[i].value,key&&value&&values.push([encodeURIComponent(key),"=",encodeURIComponent(value)].join(""));return values}}}})}(window.apilib),function(lib){"use strict";lib.extend({log:function log(local,remote){function logToConsole(msg){}function logToRemote(msg){if(remote){var logObj,parsedLogObj,xhr;logObj={id:id,messages:msg},parsedLogObj=JSON.stringify(logObj),xhr=new XMLHttpRequest,xhr.open("POST","/admin/xhrlog",!0),xhr.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),xhr.send(parsedLogObj)}}var id=((1+Math.random())*65536).toString(16)+(new Date).getTime().toString().substring(6),enabled=local||remote?!0:!1,batchDo=!1,batchLog=[];return{msg:function msg(){if(enabled){var args=Array.prototype.slice.call(arguments);batchDo?batchLog.push(args):(logToConsole(args),logToRemote([args]))}return this},batchStart:function batchStart(){return enabled&&(batchDo=!0),this},batchEnd:function batchEnd(){if(enabled){var l,i;batchDo=!1,logToRemote(batchLog),l=batchLog.length;for(i=0;i<l;i+=1)logToConsole(batchLog[i]);batchLog=[]}return this}}}})}(window.apilib);var JSON;JSON||(JSON={}),function(){"use strict";function f(n){return n<10?"0"+n:n}function quote(string){return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c=="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];value&&typeof value=="object"&&typeof value.toJSON=="function"&&(value=value.toJSON(key)),typeof rep=="function"&&(value=rep.call(holder,key,value));switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";gap+=indent,partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1)partial[i]=str(i,value)||"null";return v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&typeof rep=="object"){length=rep.length;for(i=0;i<length;i+=1)typeof rep[i]=="string"&&(k=rep[i],v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v))}else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));return v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b"," ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(value,replacer,space){var i;gap="",indent="";if(typeof space=="number")for(i=0;i<space;i+=1)indent+=" ";else typeof space=="string"&&(indent=space);rep=replacer;if(!replacer||typeof replacer=="function"||typeof replacer=="object"&&typeof replacer.length=="number")return str("",{"":value});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value=="object")for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=walk(value,k),v!==undefined?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){"use strict";Date.cultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0},Date.prototype._toString=Date.prototype.toString,Date.prototype.toString=function(format){var self=this,p=function fix(s){return s<10?"0"+s:s},ci=Date.cultureInfo;return format?format.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(format){switch(format){case"hh":return p(self.getHours()<13?self.getHours():self.getHours()-12);case"h":return self.getHours()<13?self.getHours():self.getHours()-12;case"HH":return p(self.getHours());case"H":return self.getHours();case"mm":return p(self.getMinutes());case"m":return self.getMinutes();case"ss":return p(self.getSeconds());case"s":return self.getSeconds();case"yyyy":return self.getFullYear();case"yy":return self.getFullYear().toString().substring(2,4);case"dddd":return ci.dayNames[self.getDay()];case"ddd":return ci.abbreviatedDayNames[self.getDay()];case"dd":return p(self.getDate());case"d":return self.getDate().toString();case"MMMM":return ci.monthNames[self.getMonth()];case"MMM":return ci.abbreviatedMonthNames[self.getMonth()];case"MM":return p(self.getMonth()+1);case"M":return self.getMonth()+1;case"t":return self.getHours()<12?ci.amDesignator.substring(0,1):ci.pmDesignator.substring(0,1);case"tt":return self.getHours()<12?ci.amDesignator:ci.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()}}(),function(lib){"use strict";lib.extend({html:function html(customTags){function Tags(){}function tag(name){return function(attributeObj,text,isHtml){var tagName=name,element,innerTxt,key;tagName==="fragment"?element=document.createDocumentFragment():element=document.createElement(tagName);if(attributeObj)for(key in attributeObj)attributeObj.hasOwnProperty(key)&&(key==="cls"||key==="clazz"?element.setAttribute("className",attributeObj[key])||element.setAttribute("class",attributeObj[key]):key==="fur"?element.setAttribute("for",attributeObj[key]):key.substring(0,5)==="data_"?element.setAttribute([key.substring(0,4),"-",key.substring(5)].join(""),attributeObj[key]):element.setAttribute(key,attributeObj[key]));return text&&!isHtml&&(innerTxt=document.createTextNode(text),element.appendChild(innerTxt)),text&&isHtml&&(element.innerHTML=text),{getElement:function getElement(){return element},appendChild:function appendChild(tagObj){return typeof tagObj=="object"&&element&&tagObj.getElement()&&element.appendChild(tagObj.getElement()),this}}}}function builder(name,varObj){var fragment=document.createDocumentFragment(),templat=templates[name].call(null,tagFunctions,varObj),key=0;if(templat.elements)for(key in templat.elements)templat.elements.hasOwnProperty(key)&&(templat.elements[key]=templat.elements[key].getElement());return{fragment:fragment.appendChild(templat.getElement()),elements:templat.elements}}var legalTags=customTags||["div","p","span","a","img","em","b","strong","button","form","fieldset","legend","input","select","option","label","ul","ol","li","h1","h2","h3","fragment"],tagFunctions,templates={},i,utils=this.utils;tagFunctions=new Tags;for(i=0;i<legalTags.length;i+=1)Tags.prototype[legalTags[i]]=tag(legalTags[i]);return{register:function register(name,template){templates[name]=template},remove:function remove(name){delete templates[name]},renderAndAppend:function renderAndAppend(name,varObj,parentElement,onRender){var elemensObj=builder(name,varObj);return parentElement.appendChild(elemensObj.fragment),onRender&&typeof onRender=="function"&&onRender.call(this,elemensObj.fragment,elemensObj.elements),elemensObj},renderAndPrepend:function renderAndPrepend(name,varObj,parentElement,onRender){var elemensObj=builder(name,varObj);return parentElement.firstElementChild?parentElement.insertBefore(elemensObj.fragment,parentElement.firstElementChild):parentElement.appendChild(elemensObj.fragment),onRender&&typeof onRender=="function"&&onRender.call(this,elemensObj.fragment,elemensObj.elements),elemensObj},renderAndReplace:function renderAndReplace(name,varObj,element,onRender){var elemensObj=builder(name,varObj),parentElement=element.parentNode;return parentElement.replaceChild(elemensObj.fragment,element),onRender&&typeof onRender=="function"&&onRender.call(this,elemensObj.fragment,elemensObj.elements),elemensObj},renderAndReturn:function renderAndReturn(name,varObj,onRender){var elemensObj=builder(name,varObj);return onRender&&typeof onRender=="function"&&onRender.call(this,elemensObj.fragment,elemensObj.elements),elemensObj},removeElement:function removeElement(element){var parentElement;element&&(parentElement=element.parentNode,parentElement.removeChild(element))},removeChildElements:function removeChildElements(element){if(element.hasChildNodes())while(element.childNodes.length>=1)element.removeChild(element.firstChild)}}}})}(window.apilib);window.Swipe=function(element,options){if(!element)return null;var _this=this;this.options=options||{};this.index=this.options.startSlide||0;this.speed=this.options.speed||200;this.setupcallback=this.options.setupCallback||function(){};this.slidecallback=this.options.transitionCallback||function(){};this.delay=this.options.auto||0;this.dir=0;this.thumbsEl=this.options.thumbsEl||'a';this.buttonEl=this.options.buttonEl||'button';this.buttons=element.getElementsByTagName(this.buttonEl);this.container=element.getElementsByTagName('div')[0];this.element=this.container.children[0];this.carouselWidth=this.element.offsetWidth;this.thumbs=this.element.getElementsByTagName('a');this.container.style.overflow='hidden';this.setup();this.begin();if(this.element.children.length>this.visibleThumbs){this.updateButtonStates();}
if(this.element.addEventListener){this.element.addEventListener('touchstart',this,false);this.element.addEventListener('touchmove',this,false);this.element.addEventListener('touchend',this,false);this.element.addEventListener('webkitTransitionEnd',this,false);this.element.addEventListener('msTransitionEnd',this,false);this.element.addEventListener('oTransitionEnd',this,false);this.element.addEventListener('transitionend',this,false);window.addEventListener('resize',this,false);}};Swipe.prototype={setup:function(e){this.slides=this.element.children;this.length=this.slides.length;this.thumbWidth=this.thumbs[0].offsetWidth;this.visibleThumbs=0;if(this.length<2)return null;this.width=this.container.offsetWidth;if(!this.width)return null;this.container.style.visibility='hidden';this.element.style.width=(this.slides.length*this.thumbWidth)+'px';this.visibleThumbs=this.getVisibleThumbs();this.slide(this.index,0);this.container.style.visibility='visible';this.setupcallback(e,this.index,this.visibleThumbs,this.length);},getVisibleThumbs:function(){"use strict";var thumbs=Math.floor(this.width/(this.thumbWidth));thumbs=!!thumbs?thumbs:1;if(thumbs<1)thumbs=1;return thumbs;},showShades:function(b){"use strict";var pane=this.container,classNames=pane.className.split(' '),i,j=b.length;while(j>0){i=classNames.length;j--;var newClassName=j===0?'leftShade':'rightShade';if(!!b[j]){while(i>0){i--;if(classNames[i]===newClassName){return}}
classNames.push(newClassName);}else{while(i>0){i--;if(classNames[i]===newClassName){classNames.splice(i,1);}}}}
pane.setAttribute('class',classNames.join(' '));},whichTransitionEvent:function(){"use strict";var t;var el=document.createElement('fakeelement');var transitions={'transition':'transitionEnd','OTransition':'oTransitionEnd','MSTransition':'msTransitionEnd','MozTransition':'transitionend','WebkitTransition':'webkitTransitionEnd'};for(t in transitions){if(el.style[t]!==undefined){return transitions[t];}}},slide:function(index,duration){"use strict";var dir;var target;var newPosition;var style=this.element.style;if(duration==undefined){duration=this.speed;}
if(index<0){index=0;}
this.animationOffset=Math.max((this.thumbWidth),this.visibleThumbs*(this.thumbWidth));if(this.whichTransitionEvent()!==undefined){style.webkitTransitionDuration=style.MozTransitionDuration=style.msTransitionDuration=style.OTransitionDuration=style.transitionDuration=duration+'ms';style.MozTransform=style.webkitTransform='translate3d('+-(index*this.thumbWidth)+'px,0,0)';style.msTransform=style.OTransform='translateX('+-(index*this.thumbWidth)+'px)';}else{dir=this.dir;newPosition=dir===-1?+-(index*this.thumbWidth):+-(index*this.thumbWidth);var self=this;(function animate(){var nextPosition=self.element.offsetLeft+(30*dir);var maxVal=(Math.max(nextPosition,newPosition)+'px');var minVal=(Math.min(nextPosition,newPosition)+'px');self.element.style.left=(dir===-1)?maxVal:minVal;if(self.element.offsetLeft===newPosition){return;}
if(dir===-1&&self.element.offsetLeft<newPosition)return;if(dir===1&&self.element.offsetLeft>newPosition)return;setTimeout(animate,10);})();}
this.index=index;this.dir=0;this.updateButtonStates();},getPos:function(){return this.index;},prev:function(delay,e){this.delay=delay||0;this.dir=1;clearTimeout(this.interval);if(this.index)this.slide(this.index-this.visibleThumbs,this.speed);this.slidecallback(e,this.index,this.slides[this.index]);},next:function(delay,e){this.delay=delay||0;this.dir=-1;clearTimeout(this.interval);if(this.index+this.getVisibleThumbs()<this.length){this.slide(this.index+this.visibleThumbs,this.speed);}
else{this.slide(0,this.speed);}
this.slidecallback(e,this.index,this.slides[this.index]);},disableButtons:function(b){"use strict";var i=b.length;while(i>0){i--;!!b[i]?this.buttons[i].setAttribute('disabled',''):this.buttons[i].removeAttribute('disabled');}},updateButtonStates:function(){"use strict";switch(this.index){case 0:if(this.length<this.getVisibleThumbs()||this.length==this.getVisibleThumbs()){this.disableButtons([1,1]);}else{this.disableButtons([1,0]);this.showShades([0,1]);}
break;default:this.disableButtons([0,0]);this.showShades([0,1]);}},begin:function(){var _this=this;this.interval=(this.delay)?setTimeout(function(){_this.next(_this.delay);},this.delay):0;},stop:function(){this.delay=0;clearTimeout(this.interval);},resume:function(){this.delay=this.options.auto||0;this.begin();},handleEvent:function(e){switch(e.type){case'touchstart':this.onTouchStart(e);break;case'touchmove':this.onTouchMove(e);break;case'touchend':this.onTouchEnd(e);break;case'webkitTransitionEnd':case'msTransitionEnd':case'oTransitionEnd':case'transitionend':this.transitionEnd(e);break;case'resize':this.setup();break;}},transitionEnd:function(e){if(this.delay)this.begin();this.slidecallback(e,this.index,this.slides[this.index]);},onTouchStart:function(e){this.start={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,time:Number(new Date())};this.isScrolling=undefined;this.deltaX=0;this.element.style.MozTransitionDuration=this.element.style.webkitTransitionDuration=0;},onTouchMove:function(e){if(e.touches.length>1||e.scale&&e.scale!==1)return;this.deltaX=e.touches[0].pageX-this.start.pageX;if(typeof this.isScrolling=='undefined'){this.isScrolling=!!(this.isScrolling||Math.abs(this.deltaX)<Math.abs(e.touches[0].pageY-this.start.pageY));}
if(!this.isScrolling){e.preventDefault();clearTimeout(this.interval);this.deltaX=this.deltaX/((!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0)?(Math.abs(this.deltaX)/(this.index*this.width)+1):1);this.element.style.MozTransform=this.element.style.webkitTransform='translate3d('+(this.deltaX-this.index*this.thumbWidth)+'px,0,0)';}},onTouchEnd:function(e){var isValidSlide=Number(new Date())-this.start.time<450&&Math.abs(this.deltaX)>20||Math.abs(this.deltaX)>this.width/2,isPastBounds=!this.index&&this.deltaX>0||this.index+this.visibleThumbs==this.length&&this.deltaX<0;if(!this.isScrolling){this.slide(this.index+(isValidSlide&&!isPastBounds?(this.deltaX<0?this.visibleThumbs:-this.visibleThumbs):0),this.speed);}}};config={facebox:{loadingImage:'/componada/resources/web/gfx/facebox/loading.gif',closeImage:'/componada/resources/web/gfx/facebox/closelabel.png',fconfig:'id="auth_iframe" frameBorder="0" scrolling="no" border="0" marginWidth="0" marginHeight="0"',faceboxHtml:'\
    <div id="facebox" style="display:none;"> \
      <div class="popup"> \
        <div class="message"></div> \
        <div class="content"></div> \
        <a href="#" class="close">\
        <img src="/componada/resources/web/gfx/facebox/closelabel.png" title="close" class="close_image" /></a> \
      </div> \
    </div>'},auth:{tokenCookie:'apit',hanumanTokenCookie:'apiht',tokenUrl:'apir',userCookie:'apiu',cookies:{delimiter:{part:"&",pair:"="},expire:365},iframe:{width:500,height:400},logout:{iframe:{id:"logoutFrame",url:"/springLogout.html",config:'style="width: 0px; height: 0px; border: none;" '+'scrolling="no" width="0" height="0" border="0" '+'marginheight="0" marginwidth="0" frameBorder="0"'}},janus:{url:{context:'/API/janus',login:'/auth/login/',autologin:'/auth/tryautologin/',apiAutologin:'/hanuman/auth/tryautologin/',doApiLogin:'/hanuman/auth/login/doLogin.html',doZettLogin:'/zett/auth/login/doLogin.html',doRegisterNewspaperUser:'/hanuman/auth/registernewspaperuser/',doResetPassword:'/auth/passwordreset/',doSetPassword:'/auth/setpassword/',requestTokenForPrimaryUserAjax:'/hanuman/auth/request_token_primary_user/',requestTokenForSecondaryUserAjax:'/hanuman/auth/request_token_secondary_user/',requestTokenForTrialUserAjax:'/hanuman/auth/request_token_trial_user/',validation:'/auth/validatetoken/'}}},markup:{action:{login:'apiUserActionLogin',logout:'apiUserActionLogout',expand:'apiUserActionExpand',list:'apiUserActionList'},favourites:'apiFavouriteList',favourite:'apiFavourite',nodetype:'a'}};'use strict';if(!('filter'in Array.prototype)){Array.prototype.filter=function(filter,that){var other=[],v;for(var i=0,n=this.length;i<n;i++)
if(i in this&&filter.call(that,v=this[i],i,this))
other.push(v);return other;};}
var localObject,apiLoginBubble;var fav={render:new Array(),isLoggedIn:function isLoggedIn(){return auth.isLoggedIn();},isLocalStorage:function isLocalStorage(){try{return'localStorage'in window&&window['localStorage']!==null;}catch(e){return false;}},initFavourite:function(publicationId,advertId,message,renderFavourite,renderNotFavourite,isFavourite){this.render['activeFavourite']=renderFavourite;this.render['inactiveFavourite']=renderNotFavourite;this.isFavourite=isFavourite;this.publicationId=publicationId;if(auth.isLoggedIn()){if(auth.hashValue('stf')){fav.addFavourite(auth.hashValue('stf'),publicationId);}else{this.renderFavourite(advertId);}}else{this.renderFavourite(advertId);}
$(function(){$("body").click(function(e){if(e.target.className!=="favourite active"){$("#apiFavouriteBubble").removeClass("apiFavouriteBubbleExpanded");}
if(apiLoginBubble){apiLoginBubble.style.visibility='hidden';}});});$("#"+config.markup.favourites).click(function(e){e.preventDefault();if(e.target&&e.target.nodeName.toLowerCase()==config.markup.nodetype){if(auth.isLoggedIn()){fav.toggleFavourite(advertId,fav.publicationId);}else{if(fav.isLocalStorage()){fav.toggleFavouriteAnonymous(advertId,fav.publicationId);}else{auth.displayFavLogin(advertId,message);}}}});},initFavouriteList:function(publicationId,advertId,renderFavourite,renderNotFavourite,isFavourite){this.render['activeFavourite']=renderFavourite;this.render['inactiveFavourite']=renderNotFavourite;this.isFavourite=isFavourite;if(isFavourite){fav.delFavourite(advertId,publicationId,true);}else{fav.addFavourite(advertId,publicationId);}},initRemoveList:function(publicationId,advertId,renderFavourite,renderNotFavourite,isRevert){this.render['activeFavourite']=renderFavourite;this.render['inactiveFavourite']=renderNotFavourite;if(isRevert){fav.addFavourite(advertId,publicationId);}else{fav.delFavourite(advertId,publicationId,true);}},renderFavourite:function(id){switch(auth.isLoggedIn()){case true:$.get('/API/janus/auth/favourite/'+id+"/",function(data){if(data.advertId===id&&data.status==="SUCCESS"){fav.renderActiveFavourite(id);}else{if(fav.isLocalStorage()){fav.isFavouriteAnonymous(fav.getAllFavouritesAnonymous('favourites'),id)?fav.toDeleteFromProfile(fav.getAllFavouritesAnonymous('favourites'),id)?fav.renderInActiveFavourite(id):fav.renderActiveFavourite(id):fav.renderInActiveFavourite(id);}}});break;case false:if(fav.isLocalStorage()){fav.isFavouriteAnonymous(fav.getAllFavouritesAnonymous('favourites'),id)?fav.toDeleteFromProfile(fav.getAllFavouritesAnonymous('favourites'),id)?fav.renderInActiveFavourite(id):fav.renderActiveFavourite(id):fav.renderInActiveFavourite(id);}
break;default:return false;}},toggleFavourite:function(id,publicationId){if(fav.isFavourite(id)){fav.delFavourite(id,publicationId,true);}else{fav.addFavourite(id,publicationId);}},notFavouritePage:function(){var url=window.location.pathname;var currentPageName=url.substring(url.lastIndexOf('/')+1);return currentPageName!=="favoritter.html";},toggleFavouriteAnonymous:function(id,publicationId){if(fav.isFavourite(id)){fav.delFavouriteAnonymous(id,publicationId,true);}else{fav.addFavouriteAnonymous(id,publicationId,false);}},getAllFavouritesAnonymous:function getAllFavouritesAnonymous(name){var storageObject=localStorage.getItem(name);if(storageObject=='undefined'||!storageObject){return new Array;}else{storageObject=JSON.parse(storageObject);return storageObject.values;}},isFavouriteAnonymous:function isFavouriteAnonymous(list,id){if(!list)return false;return fav.getElementIndex(list,id)!=-1},toDeleteFromProfile:function toDeleteFromProfile(localObject,id){var elementIndex=fav.getElementIndex(localObject,id);return localObject[elementIndex].deleteFromProfile?true:false;},getElementIndex:function getElementIndex(localObject,id){var results=localObject.filter(function(item){return item.advertId==id;});return localObject.indexOf(results[0]);},delFavouriteAnonymous:function delFavouriteAnonymous(id,publicationId,anonymous){localObject=fav.getAllFavouritesAnonymous('favourites');var elementIndex=fav.getElementIndex(localObject,id);if(elementIndex!=-1){switch(anonymous){case true:if(localObject[elementIndex].inProfile){localObject[elementIndex].deleteFromProfile=true;}else{localObject.splice(elementIndex,1);}
fav.renderInActiveFavourite(id);break;case false:localObject.splice(elementIndex,1);break;default:break;}
try{fav.setLocalStorage(localObject);}catch(e){if(e.message=="QUOTA_EXCEEDED_ERR"){console.log("Maximum quota exeeded");}}}},setLocalStorage:function setLocalStorage(localStorageList){localStorage.setItem('favourites',JSON.stringify({values:localStorageList}));},addFavouriteAnonymous:function(id,publicationId,inProfile){localObject=fav.getAllFavouritesAnonymous('favourites');if(!localObject){localObject=[];}
if(!fav.isFavouriteAnonymous(localObject,id)){localObject.unshift({"publicationId":publicationId,"advertId":id,"inProfile":inProfile});}
var elementIndex=fav.getElementIndex(localObject,id);if(elementIndex!=-1){if(localObject[elementIndex].deleteFromProfile){localObject[elementIndex].deleteFromProfile=false;}}
try{fav.setLocalStorage(localObject);}catch(e){if(e.message=="QUOTA_EXCEEDED_ERR"){auth.displayFavLogin(id,"message");}}
if(!fav.isLoggedIn()){fav.renderActiveFavourite(id);fav.renderInfoBubble(id);}},logInBubble:function logInBubble(element,id){if(apiLoginBubble){apiLoginBubble.style.visibility='visible';}else{var status=document.createDocumentFragment();var divtag=document.createElement("div");divtag.id="apiLoginBubble";status.appendChild(divtag);var p=document.createElement("p");p.className+="bubble top";p.appendChild(document.createTextNode("Du er ikke lenger innlogget."));var login=document.createElement("a");login.className+="button";login.appendChild(document.createTextNode("Logg inn"));login.onclick=function(){id?auth.displayFavLogin(id):auth.displayLogin();};var cancel=document.createElement("a");cancel.className+="cancellink";cancel.appendChild(document.createTextNode("Avbryt"));cancel.onclick=function(){auth.logOut();};p.appendChild(login);p.appendChild(cancel);divtag.appendChild(p)
element.appendChild(status);apiLoginBubble=document.getElementById("apiLoginBubble");}},addFavourite:function(id,publicationId){if(auth.isLoggedIn()){jQuery.ajax({type:'POST',url:'/API/janus/auth/favourite/',contentType:'application/json',data:JSON.stringify({id:id,publicationId:publicationId}),dataType:'json',beforeSend:function(){$('#apiFavourite'+id).addClass('spinning');},error:function(response){if(response.status==401)
fav.logInBubble(document.getElementsByClassName("apiShareIcons")[0],id);$('#apiFavourite'+id).removeClass('spinning');},success:function(response){if(response.status==="SUCCESS"){fav.renderActiveFavourite(id);if(fav.notFavouritePage()){auth.hashValue('stf')?window.location.hash=auth.removeFromQueryHash('stf'):"";fav.renderInfoBubble();$('#apiFavourite'+id).removeClass('spinning');}
if(fav.isLocalStorage()){fav.addFavouriteAnonymous(id,publicationId,true);}}}});}else{if(fav.isLocalStorage()){fav.addFavouriteAnonymous(id,publicationId,false);}}},delFavourite:function(id,publicationId,render,callback){if(auth.isLoggedIn()){jQuery.ajax({type:'DELETE',url:'/API/janus/auth/favourite/',contentType:'application/json',data:JSON.stringify({id:id,publicationId:publicationId}),dataType:'json',beforeSend:function(){$('#apiFavourite'+id).addClass('spinning');},success:function(response){if(response.status==="SUCCESS"){render?fav.renderInActiveFavourite(id):"";render?$('#apiFavourite'+id).removeClass('spinning'):"";if(fav.isLocalStorage()){fav.delFavouriteAnonymous(id,publicationId,false)}
if(callback){callback();}}},error:function(response){if(response.status==401){fav.logInBubble(document.getElementsByClassName("apiShareIcons")[0]);$('#apiFavourite'+id).removeClass('spinning');}}});}else{if(fav.isLocalStorage()){fav.delFavouriteAnonymous(id,publicationId,true);return true;}}},renderInfoBubble:function(id){var showInfoBubble=fav.notFavouritePage();if(showInfoBubble){$("#apiFavouriteBubble").addClass("apiFavouriteBubbleExpanded");}},renderActiveFavourite:function(id){this.render['activeFavourite'](id);},renderInActiveFavourite:function(id){this.render['inactiveFavourite'](id);}};var apiFav=apiFav||{};apiFav.Syncronize=function Syncronize(callback){if(!fav.isLocalStorage()){return null;}};apiFav.Syncronize.prototype={updateProfile:function updateProfile(callback){var list=fav.getAllFavouritesAnonymous('favourites'),apiSyncronizeFlag,listArray=apiFav.Syncronize.prototype.favouriteArray(list,false);if(listArray.length>0){apiSyncronizeFlag=0;}else{callback();}
var updateSyncronizeFlag=function updateSyncronizeFlag(){apiSyncronizeFlag=apiSyncronizeFlag+1;if(apiSyncronizeFlag==list.length){callback();}};$.each(listArray.reverse(),function(n,favourite){switch(favourite.inProfile){case true:if(favourite.deleteFromProfile){fav.delFavourite(favourite.advertId,favourite.publicationId,false,function(){updateSyncronizeFlag();});}else{updateSyncronizeFlag();}
break;case false:jQuery.ajax({type:'POST',url:'/API/janus/auth/favourite/',contentType:'application/json',async:false,data:JSON.stringify({id:favourite.advertId,publicationId:favourite.publicationId}),dataType:'json',error:function(response){if(response.status==401){fav.logInBubble(document.getElementById("apiFavouriteResultList"));}},success:function(){updateSyncronizeFlag();}});break;default:break;}});},favouriteArray:function favouriteArray(favouriteList,setProfile){var localArray=new Array;$.each(favouriteList,function(n,favourite){if(setProfile){localArray.push({"publicationId":favourite.publicationId,"advertId":favourite.advertId,"inProfile":true});}else{localArray.push({"publicationId":favourite.publicationId,"advertId":favourite.advertId,"inProfile":favourite.inProfile,"deleteFromProfile":favourite.deleteFromProfile});}});return localArray;}};$.fn.serializeObject=function(){var o={};var a=this.serializeArray();$.each(a,function(){if(o[this.name]){if(!o[this.name].push){o[this.name]=[o[this.name]];}
o[this.name].push(this.value||'');}else{o[this.name]=this.value||'';}});return o;};var auth={render:new Array(),postLogin:new Array(),isFavourite:function(){},janusUrl:"",janusUseSSL:false,localJanus:"",publicationId:false,init:function(localJanus,janusUrl,janusUseSSL,publicationId){this.janusUrl=janusUrl;this.localJanus=localJanus;this.janusUseSSL=(janusUseSSL.toLowerCase()==='true');this.publicationId=publicationId;},initLogin:function(renderLogin,localJanus,janusUrl,janusUseSSL,publicationId){this.render['logIn']=renderLogin;this.render['loggedIn']=renderLogin;this.janusUrl=janusUrl;this.localJanus=localJanus;this.janusUseSSL=(janusUseSSL.toLowerCase()==='true');this.publicationId=publicationId;},renderLogin:function(){this.render['logIn'](false);},renderLoggedIn:function(){var user=auth.userFromCookie(),syncronize;if(this.render['loggedIn']){this.render['loggedIn'](true,user.email);}},getTokenCookie:function(){return($.cookie(config.auth.tokenCookie));},removeTokenCookie:function(){$.cookie(config.auth.tokenCookie,null,{path:'/',domain:auth.cookieDomain()});},getHanumanTokenCookie:function(){return($.cookie(config.auth.hanumanTokenCookie));},cookieDomain:function(){var hostname=window.location.hostname;var domain=hostname.substr(hostname.indexOf(".",0),hostname.length);if(domain.match(/^\.\w\w\.\w\w$/)){return hostname;}
return domain;},removeHanumanTokenCookie:function(){$.cookie(config.auth.hanumanTokenCookie,null,{path:'/',domain:auth.cookieDomain()});},isLoggedIn:function(){if(this.getTokenCookie()){return true;}
return false;},isLoggedInHanuman:function(){if(this.getHanumanTokenCookie()){return true;}
return false;},serializeObject:function(obj,delPart,delPair){var key,i=0,serialized='';if(!delPart){delPart=config.auth.cookies.delimiter.part;}
if(!delPair){delPair=config.auth.cookies.delimiter.pair;}
for(key in obj){if(obj.hasOwnProperty(key)&&typeof obj[key]!=='function'){if(i>0){serialized+=delPart;}
serialized+=key+delPair+obj[key];i+=1;}}
return serialized;},deserializeObject:function(str,delPart,delPair){if(!delPart){delPart=config.auth.cookies.delimiter.part;}
if(!delPair){delPair=config.auth.cookies.delimiter.pair;}
if(str[0]==='"'){str=str.substr(1,str.length-1);}
if(str[str.length-1]==='"'){str=str.substr(str[0],str.length-1);}
var obj={},arr=str.split(delPart);var p,i,length=arr.length;for(i=0;i<length;i++){p=arr[i].split(delPair);obj[p[0]]=p[1];}
return obj},hashValue:function(key){var qa=this.urlHashToArr();if(qa&&qa[key]){return qa[key];}},queryStringValue:function(key){var qa=this.queryStringToArr();if(qa&&qa[key]){return qa[key];}},queryStringToArr:function(){var res,pairs=window.location.search.substring(1).split('&');if(pairs){res=new Array()}
var p,i,length=pairs.length;for(i=0;i<length;i++){var pair=pairs[i].split('=');if(pair[1]){res[pair[0]]=decodeURIComponent(pair[1]);}}
return res;},urlHashToArr:function(){var res,pairs=window.location.hash.substring(1).split('&');if(pairs){res=new Array()}
var p,i,length=pairs.length;for(i=0;i<length;i++){var pair=pairs[i].split('=');if(pair[1]){res[pair[0]]=decodeURIComponent(pair[1]);}}
return res;},removeFromQueryString:function(key){var res="",urlparts=window.location.search.substring(1).split('&');if(urlparts.length>=2){var prefix=encodeURIComponent(key);for(var i=0;i<urlparts.length;i++){var part=urlparts[i].split("=");if(part[0]===prefix){urlparts.splice(i,1);}}
if(urlparts.length>0){res='?'+urlparts.join('&');}}
return res;},removeFromQueryHash:function(key){var res="",urlparts=window.location.hash.substring(1).split('&');if(urlparts.length>=2){var prefix=encodeURIComponent(key);for(var i=0;i<urlparts.length;i++){var part=urlparts[i].split("=");if(part[0]===prefix){urlparts.splice(i,1);}}
if(urlparts.length>0){res=urlparts.join('&');}}
return res;},userFromCookie:function(){if(this.isLoggedIn()||this.isLoggedInHanuman()){return this.deserializeObject($.cookie(config.auth.userCookie));}
return false;},getLocation:function(){var protocol,host,port,context,location;port=window.location.port;protocol=window.location.protocol;host=window.location.host;context=config.auth.janus.url.context;if(port>=9000){return this.localJanus;}
if(this.janusUrl!==''){location=this.janusUrl;}
else{if(this.janusUseSSL===true){location='https://'+host+context;}else{location=protocol+'//'+host+context;}}
return location;},getLoginServiceUrl:function(){var path=config.auth.janus.url.login;return this.getLocation()+path+"?pid="+this.publicationId;},getAutoLoginServiceUrl:function(){var path=config.auth.janus.url.autologin;return this.getLocation()+path+"?pid="+this.publicationId;},getNewspaperAutoLoginServiceUrl:function(){var path=config.auth.janus.url.apiAutologin;return this.getLocation()+path+"?pid="+this.publicationId;},getNewspaperLoginFormPostUrl:function(){var path=config.auth.janus.url.doApiLogin;return this.getLocation()+path;},getZettLoginFormPostUrl:function(){var path=config.auth.janus.url.doZettLogin;return this.getLocation()+path;},getRegisterNewspaperUserUrl:function(){var path=config.auth.janus.url.doRegisterNewspaperUser;return this.getLocation()+path;},getResetPasswordUrl:function(){var path=config.auth.janus.url.doResetPassword;return this.getLocation()+path;},getRequestTokenForPrimaryUserUrl:function(){var path=config.auth.janus.url.requestTokenForPrimaryUserAjax;return config.auth.janus.url.context+path;},getRequestTokenForSecondaryUserUrl:function(){var path=config.auth.janus.url.requestTokenForSecondaryUserAjax;return config.auth.janus.url.context+path;},getRequestTokenForTrialUserUrl:function(){var path=config.auth.janus.url.requestTokenForTrialUserAjax;return config.auth.janus.url.context+path;},getLogoutUrl:function(){var path=config.auth.logout.iframe.url;return this.getLocation()+path+"?pid="+this.publicationId;},getChangePasswordUrl:function(){var path=config.auth.janus.url.doSetPassword;return this.getLocation()+path;},displayLogin:function(msg){window.location.href=this.getLoginServiceUrl()+"&continue="+encodeURIComponent(window.location.href);},displayFavLogin:function(advertId,message){var protocol,host,port,path,search;protocol=window.location.protocol+"//";host=window.location.host;path=window.location.pathname;search=window.location.search;var url=protocol+host+path+search;window.location.href=this.getLoginServiceUrl()+"&continue="+encodeURIComponent(url)+"&stf="+advertId;},validateUser:function validateUser(){var user=auth.userFromCookie()
if(auth.userFromCookie().userId>0){return true;}
return false;},logOut:function logOut(){var protocol,host,port,path,search;protocol=window.location.protocol+"//";host=window.location.host;path=window.location.pathname;search=window.location.search;var url=protocol+host+path+search;window.location.href=this.getLogoutUrl()+"&continue="+encodeURIComponent(url);}};auth.utils={shorten:function shorten(text,maxLength){var result=text;if(text===undefined){result='...';}else if(maxLength<text.length){result=text.substr(0,maxLength-3)+'...';}
return result;}};api.election={info:{name:"Valg 2011",version:"3.0"},xmlloc:"http://g.api.no/valg_data/",gfxloc:"/componada/resources/web/gfx/election/",lang:null,saveRestore:["type1","type2","fylkenr","kommunenr","kretsnr","isArticle"],isNN:["firda","firdaposten","nordhordland","sognavis","hardanger-folkeblad","kvinnheringen"],hasLogo:function(i){var imgs=["a","frp","h","krf","mdg","rødt","sp","sv","v","demn,","dlf","ksp","kyst,","nkp","pp","dk","pir","andre"];return($.inArray(i.toLowerCase(),imgs)>-1)},partyDisplayCodes:{RØDT:"R",A:"AP",SP:"Sp",KRF:"KrF",FRP:"FrP"},hasCircuit:function(v){var _hasCircuit=["1201","1103","1601","0301"];return($.inArray(v,_hasCircuit)>-1)},order:{RØDT:0,R:0,SV:1,A:2,SP:3,M:4,MDG:4,V:5,KRF:6,H:7,FRP:8,Andre:90,Andre2:91,Blanke:95},maxOrderToShowGraphFor:20,strPie:'<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="250" height="100" id="pie%%id%%" align="middle"><param name="allowScriptAccess" value="sameDomain" /><param name="allowFullScreen" value="false" /><param name="movie" value="%%path%%pie2.swf" /><param name="quality" value="high" /><param name="bgcolor" value="#f3f3f3" /><param name="wmode" value="transparent" /><param name="FlashVars" value="val=%%||%%" /><embed src="%%path%%pie2.swf" wmode="transparent" FlashVars="val=%%||%%" quality="high" bgcolor="#f3f3f3" width="250" height="100" name="pie%%id%%" align="middle" allowScriptAccess="sameDomain" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" /></object>',strMand:"<object classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000' codebase='http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0' width='%%w%%' height='%%h%%' id='stortinget%%id%%' align='middle'><param name='allowScriptAccess' value='sameDomain' /><param name='allowFullScreen' value='false' /><param name='movie' value='%%path%%stortinget2.swf' /><param name='quality' value='high' /><param name='FlashVars' value='%%var%%' /><param name='wmode' value='transparent' /><param name='bgcolor' value='#f1f1f1' /><embed src='%%path%%stortinget2.swf' wmode='transparent' quality='high' bgcolor='#f1f1f1' width='%%w%%px' height='%%h%%px' name='stortinget%%id%%' align='middle' allowScriptAccess='sameDomain' allowFullScreen='false' type='application/x-shockwave-flash' pluginspage='http://www.adobe.com/go/getflashplayer' flashvars='%%var%%' /></object>",elem:{},formatNum:function(n){n+="";var rgx=/(\d+)(\d{3})/;while(rgx.test(n)){n=n.replace(rgx,'$1.$2')}
return n;},sort1:function(a,b){return(a.order-b.order)},sort2:function(a,b){return(b.ProSt-a.ProSt)},getPos:function(e){var t=0,l=0;do{t+=e.offsetTop||0;l+=e.offsetLeft||0;e=e.offsetParent;}while(e);return[l,t];}};api.election.Presentation=function(p){document.write("<div></div>");this.el=document.getElementsByTagName("div")[document.getElementsByTagName("div").length-1];this.el.className+="apiValgWrap "+this.getContext();if(api.election.isNN_){this.el.className+=" valg_nn_NO"}else{this.el.className+=" valg_nb_NO"};this.lang=api.election.lang;this.showD=api.election.showD;this.old={};for(var i in p)this[i]=p[i];this.isBig=true;this.el.className+=" valg_"+this.context;if(this.validateInput()){this.init();this.getData();}};api.election.Presentation.prototype={genUrl:function(){var urlPrefix=api.election.xmlloc+this.year+"/"+this.type1+this.type2;switch(this.type2){case"02":this.url=urlPrefix+"-"+this.kommunenr+".xml";break;case"03":this.url=urlPrefix+"-"+this.kommunenr+"-"+this.kretsnr+".xml";break;case"04":this.url=urlPrefix+"-"+this.fylkenr+".xml";break;case"05":this.url=urlPrefix+".xml";break;case"06":this.url=urlPrefix+".xml";break;}},getData:function(){this.genUrl();var self=this;var request=new api.ajax({url:this.url,onsuccess:function(x){self.callback(x)},onfailure:function(x){self.go404(x)}});request.send();},callback:function(x){this.storeData(x);this.el.innerHTML="";this.stackContent();},getContext:function(){var wrapperEl=this.el.parentNode.parentNode,context,wrapperWidth=wrapperEl.offsetWidth;switch(true){case(wrapperWidth>647):context='x-large';break;case(wrapperWidth>480):context='large';break;case(wrapperWidth>312):context='medium';break;case(wrapperWidth>179):context='small';break;default:context='x-small';}
return context;},popOver:function(b){var el=this.el;var wrapperEl=el.parentNode.parentNode;if(wrapperEl.hasAttribute('data-vr-contentbox')){wrapperEl=wrapperEl.parentNode;}
var mandateGpx=api.election.mandateGpx;switch(b){case true:wrapperEl.style.float='none';wrapperEl.style.width='100%';wrapperEl.style.clear='both';wrapperEl.style.paddingLeft='0';wrapperEl.style.paddingRight='0';this.el.classList.add('popover');this.el.classList.add('small');this.el.classList.remove('x-small');if(mandateGpx!=null){var parent=mandateGpx.parentNode;parent.removeChild(mandateGpx);parent.appendChild(mandateGpx);}
window.scrollTo(0,wrapperEl.offsetTop);break;case false:wrapperEl.style.float='';wrapperEl.style.width='';wrapperEl.style.clear='';wrapperEl.style.paddingLeft='';wrapperEl.style.paddingRight='';this.el.classList.remove('popover');this.el.classList.remove('small');this.el.classList.add('x-small');window.scrollTo(0,wrapperEl.offsetTop);break;}},togStats:function(){if(!this.stats)this.writeDetails();var el=this.details,sl=this.statsLink;el.style.display=(el.style.display!="block")?"block":"none";if(el.style.display=="block"){sl.innerHTML=this.lang.stats.$2;sl.className+=" valginfoStatsHide";this.showD=true;}else{sl.innerHTML=this.lang.stats.$1;sl.className=sl.className.replace(/\b\svalginfoStatsHide\b/g,"");this.showD=false;}},showOppsl:function(){this.el.innerHTML="";this.isMand=false;this.stats=this.details.style.display=="block";if(this.stats){this.statsLink.innerHTML=this.lang.stats.$2;}
else{this.statsLink.innerHTML=this.lang.stats.$1;}
console.log(this.stats);this.stackContent();this.el.classList.remove('apiValgMandWrap');},chLoc:function(ev){if(ev.target[ev.target.selectedIndex].value=="")return;this.save();var strId=ev.target.className;if(/Fylke/.test(strId)){var f=ev.target[ev.target.selectedIndex].value;if(f=="0"){this.type2=(this.type1=="ST")?"06":"05";this.fylkenr="";this.fylkenavn=null;this.kommunenr="";this.kommunenavn=null;this.kretsnr="";this.kretsnavn=null;}else{this.type2="04";this.fylkenr=f;this.fylkenavn=api.election.fylke["f"+f].navn;this.kommunenr="";this.kommunenavn=null;if(f=="03"){this.type2="02";this.kommunenr="0301";this.kommunenavn="Oslo";}
this.kretsnr="";this.kretsnavn=null;}}else if(/Kommune/.test(strId)){var ko=ev.target[ev.target.selectedIndex].value;if(ko=="0"){this.type2="04";this.kommunenr="";this.kommunenavn=null;}else{this.type2="02";this.kommunenr=ko;this.kommunenavn=api.election.kommune["ko"+ko].navn;}
this.kretsnr="";this.kretsnavn=null;}else{var kr=ev.target[ev.target.selectedIndex].value;if(kr=="0"){this.type2="02";this.kretsnr="";this.kretsnavn=null;}else{this.type2="03";this.kretsnr=kr;this.kretsnavn=api.election.krets["kr"+this.kommunenr+"_"+kr].navn;}}
this.getData();},chType:function(type){if(this.type1==type)return;this.save();if(type=="F"&&this.fylkenr=="03"){this.type2="05";this.fylkenr="";this.fylkenavn=null;this.kommunenr="";this.kommunenavn=null;this.kretsnr="";this.kretsnavn=null;}
this.type1=type;this.getData();},showMandat:function(){if(this.type2=="06"){this.writeMandat();}else{this.type2="06";this.fylkenr="";this.fylkenavn="";this.kommunenr="";this.kommunenavn="";this.kretsnr="";this.kretsnavn="";this.isMand=true;this.getData();}},save:function(){var a=api.election.saveRestore;for(var i=0;i<a.length;i++)this.old[a[i]]=this[a[i]];},restore:function(){var a=api.election.saveRestore;for(var i=0;i<a.length;i++)this[a[i]]=this.old[a[i]];}};api.election.Presentation.prototype.validateInput=function(){var A=api.election;if(this.type2=="05"||this.type2=="06"){this.fylkenr="";this.kommunenr="";this.kretsnr="";}
else if(this.type2=="04"){this.kommunenr="";this.kretsnr="";}
else if(this.type2=="02"){this.kretsnr="";}
if(this.isMand){this.type2="06";this.fylkenr="";this.kommunenr="";this.kretsnr="";}
try{if(!!this.fylkenr){this.fylkenavn=A.fylke["f"+this.fylkenr].navn;}
if(!!this.kommunenr){this.kommunenavn=A.kommune["ko"+this.kommunenr].navn;}
if(!!this.kretsnr){this.kretsnavn=A.krets["kr"+this.kommunenr+"_"+this.kretsnr].navn;}}catch(e){this.inputError(e);return false;}
return true;};api.election.Presentation.prototype.inputError=function(e){var A=api.election,ko=this.kommunenr,err,drop,i;var div=api.bh("div",{cl:"debugError",ih:"<h2>Feil i valgmodul</h2>"});this.el.appendChild(div);if((!!this.fylkenr)&&(typeof this.fylkenavn!="string")){err=api.bh("div",{cl:"debugErrorMsg",ih:this.fylkenr+" er ikke gyldig fylkenummer!"});div.appendChild(err);drop=api.bh("select",{cl:"debugErrorSelect",ih:"<option>Tilgjengelige fylker i systemet</option>"});div.appendChild(drop);for(i in A.fylke)drop.appendChild(api.bh("option",{ih:A.fylke[i].navn+" : "+A.fylke[i].fnr}));}
else if((!!ko)&&(typeof this.kommunenavn!="string")){err=api.bh("div",{cl:"debugErrorMsg",ih:ko+" er ikke gyldig kommunenummer!"});div.appendChild(err);if(!!f){drop=api.bh("select",{cl:"debugErrorSelect",ih:"<option>Tilgjengelige kommuner i "+this.fylkenavn+"</option>"});div.appendChild(drop);for(i in A.kommune)if(A.kommune[i].fnr==f)drop.appendChild(api.bh("option",{ih:A.kommune[i].navn+" : "+A.kommune[i].konr}));}}
else if((!!this.kretsnr)&&(typeof this.kretsnavn!="string")){err=api.bh("div",{cl:"debugErrorMsg",ih:this.kretsnr+" er ikke gyldig kretsnummer!"});div.appendChild(err);if(!!ko){if(A.hasCircuit(ko)){var counter=0;drop=api.bh("select",{cl:"debugErrorSelect",ih:"<option>Tilgjengelige kretser i "+this.kommunenavn+"</option>"});div.appendChild(drop);for(i in A.krets){counter++;if(A.krets[i].konr==ko)drop.appendChild(api.bh("option",{ih:A.krets[i].navn+" : "+A.krets[i].krnr}));}}else{err=api.bh("div",{cl:"debugErrorMsg",ih:this.kommunenavn+" har ingen tilgjengelige kretser i systemet!"});div.appendChild(err);}}}};api.election.Presentation.prototype.go404=function(){var A=api.election,h1,self=this;this.el.innerHTML="";this.el.className=this.el.className+" error404";if(!!this.settings)this.settings.innerHTML="";this.writeHeader();if(this.isArticle){this.writeTopNav();this.writeContainer();this.writeNavigation();this.writeSubHeader();}else{this.writeTopNav();this.writeContainer();this.writeNavigation();this.writeSubHeader();}
var wrap=api.bh("div",{cl:"valginfoWrap"});this.content.appendChild(wrap);var div=api.bh("div",{cl:"valginfoLoc valg404Info"});wrap.appendChild(div);if(this.type2=="05"){h1=api.bh("h1",{ih:A.lang.nav.$1});div.appendChild(h1);}
if(this.type1=="F"){if(this.fylkenr){h1=api.bh("h1",{ih:this.fylkenavn});div.appendChild(h1);}}else{if(this.fylkenr&&this.type2=="04"){h1=api.bh("h1",{ih:this.fylkenavn});div.appendChild(h1);}}
if(this.kommunenr){h1=api.bh("h1",{ih:this.kommunenavn});div.appendChild(h1);}
if(this.kretsnr){var h3=api.bh("h1",{ih:this.kretsnavn});div.appendChild(h3);}
if(this.old.type1&&!!this.settings){var link=api.bh("button",{ih:"Tilbake"});div.appendChild(link);$(link).bind("click",function(){self.restore();self.getData();});}
this.content.appendChild(api.bh("div",{cl:"clr"}));div=api.bh("div",{cl:"valg404Text",ih:A.lang.text404.$1});this.content.appendChild(div);div.appendChild(api.bh("span",{ih:A.lang.text404.$2}));div=api.bh("div",{ih:""});this.content.appendChild(div);};api.election.Presentation.prototype.storeData=function(x){var A=api.election,i,name,value;this.stats=false;var xml=x.responseXML;this.data={};var rap=xml.getElementsByTagName("rapport")[0];var tabell=rap.removeChild(rap.getElementsByTagName("tabell")[0]);var arrData=xml.getElementsByTagName("data");for(i=0;i<arrData.length;i++){name=arrData[i].getAttribute("navn");value=(!!arrData[i].firstChild)?arrData[i].firstChild.nodeValue:"";this.data[name]=value;}
this.data.liste=[];var liste=tabell.getElementsByTagName("liste");for(i=0;i<liste.length;i++){var oListe=this.data.liste[this.data.liste.push({})-1];var lData=liste[i].getElementsByTagName("data");for(var j=0;j<lData.length;j++){try{name=lData[j].getAttribute("navn");value=(!!lData[j].firstChild)?lData[j].firstChild.nodeValue.replace(",","."):undefined;if(!isNaN(value))value=Number(value);oListe[name]=value;}catch(e){}}
oListe["order"]=(typeof A.order[oListe.Partikode]=="number")?A.order[oListe.Partikode]:100;}};api.election.Presentation.prototype.prepareData=function(){function findTheOthers(list){for(var i=0,l=list.length;i<l;i++){var p=list[i];if(p.Partikode.toLowerCase()==='andre'){return p;}}
return null;}
function removePartyIncludedInXMLOthersFromOthers(others,party){var newOthers={};for(var property in others){if(others.hasOwnProperty(property)&&party.hasOwnProperty(property)){var numberValueOthers=parseFloat(others[property]);var numberValueParty=parseFloat(party[property]);if(!isNaN(numberValueOthers)&&!isNaN(numberValueParty)){newOthers[property]=numberValueOthers-numberValueParty;}else{newOthers[property]=others[property];}}else{newOthers[property]=others[property];}}
return newOthers;}
var A=api.election,i;var list=this.data.liste;var newList=[];var theOthers=findTheOthers(this.data.liste);this.data.liste.sort(A.sort1);for(i=0;i<list.length&&A.order[list[i].Partikode]<=api.election.maxOrderToShowGraphFor;i++){if(typeof list[i].Partikategori!=='undefined'&&list[i].Partikategori!=0){var partinavn=A.lang.partinavn[list[i].Partikode];if(typeof partinavn!=='undefined'){list[i].partinavn=partinavn;}
var displayCode=A.partyDisplayCodes[list[i].Partikode];if(typeof displayCode!=='undefined'){list[i].Visningskode=displayCode;}else{list[i].Visningskode=list[i].Partikode;}
newList.push(list[i]);if(typeof list[i].Partikategori!=='undefined'&&list[i].Partikategori===2){theOthers=removePartyIncludedInXMLOthersFromOthers(theOthers,list[i]);}}}
theOthers.Visningskode="Andre";newList.push(theOthers);this.newList=newList;};api.election.nb_NO={partinavn:{RØDT:"Rødt",SV:"Sosialistisk Venstreparti",A:"Arbeiderpartiet",SP:"Senterpartiet",MDG:"Miljøpartiet de grønne",V:"Venstre",KRF:"Kristelig Folkeparti",H:"Høyre",FRP:"Fremskrittspartiet",M:"Miljøpartiet de grønne",Andre:"Andre"},typenavn:{F:"Fylkestingsvalget",K:"Kommunestyrevalget",ST:"Stortingsvalget"},typenavn_small:{F:"Fylkesvalget",K:"Kommunevalget",ST:"Stortingsvalget"},typenavnkort:{F:"fylkestingsvalg",K:"kommunestyrevalg",ST:"Stortingsvalg"},text404:{$1:"Venter på resultater",$2:"Valgresultatene kommer fortløpende etter hvert som de telles opp. Opptellingen starter 21:00."},logopath:{$1:"/valg2013logo-bokmal.svg",$2:"Valg 2013"},nav:{$1:"Hele landet",$2:"Hele fylket",$3:"Hele kommunen",$4:"Velg fylke",$5:"Velg kommune",$6:"Velg krets",$7:"Vis resultater fra",$8:"Vis stemmefordeling for",$9:"Velg kommune først",$10:"Velg fylke først"},header:{$1:"Stemmefordeling kommune",$2:"Stemmefordeling krets",$3:"Stemmeford. kommune",$4:"Stemmeford. krets",$5:"Stemmefordeling fylke",$6:"Stemmeford. fylke"},info:{$1:"Sist oppdatert",$2:"Opptellingen",$3:"Totalt antall kommuner",$4:"Totalt antall kretser",$5:"Symbolforklaring",$6:"Ferdig opptalt",$7:"Bare forhåndsstemmer \nopptalt",$8:"Bare valgtingsstemmer \nopptalt",$9:"Ingen stemmer \nopptalt"},stats:{$1:"Vis detaljert oversikt",$2:"Skjul detaljert oversikt"},articleLink:{$1:"Detaljert oversikt",$2:"Detaljert oversikt og flere fylker/kommuner"},toggleInfoOption:{$1:"Vis info",$2:"Skjul info"},symbols:[{img:"sym_up.gif",text:"Prosentvis økning siden forrige tilsvarende valg"},{img:"sym_eq.gif",text:"Ingen endring siden forrige tilsvarende valg"},{img:"sym_down.gif",text:"Prosentvis nedgang siden forrige tilsvarende valg"},{img:"sym_bullet1.gif",text:"Andel kommuner/kretser hvor både valgtingsstemmer og forhåndsstemmer er opptalt"},{img:"sym_bullet2.gif",text:"Andel kommuner/kretser hvor bare valgtingsstemmer er opptalt"},{img:"sym_bullet3.gif",text:"Andel kommuner/kretser hvor bare forhåndsstemmer er opptalt"},{img:"sym_bullet4.gif",text:"Andel kommuner/kretser hvor ingen stemmer er opptalt"}],symbols2:{$1:"Partier som ikke er spesifisert i utlistingen.",$2:"Lukk",$3:"Antall stemmer",$4:"Antall forh. stemmer",$5:"Prosentvis endring i forhold til forrige",$6:"stortingsvalg"},prognoser:{$1:"Antall stemmer",$2:"% endring, forrige fylkestingvalg",$3:"% endring, forrige stortingsvalg",$4:"Antall stortingsmandater",$5:"Endring antall stortingsmandater",$6:"Antall st.mandater ved tenkt valg",$7:"Endring antall st.mandater ved tenkt valg",$8:"Antall kommunestyremandater",$9:"Endring antall kommunestyremandater",$10:"Utjevningsmandat",$11:"% endring, forrige kommunestyrevalg",$12:"Antall fylkestingsmandater",$13:"Endring antall fylkestingsmandater"},graph:{$1:"Oppmøte",$2:"av",$3:"stemmeberettigede har stemt"},mandat:{$1:"Oppslutning",$2:"Mandater",$3:"Stortinget",$4:"Prognose"}};api.election.nn_NO={partinavn:{RØDT:"Raudt",SV:"Sosialistisk Venstreparti",A:"Arbeidarpartiet",SP:"Senterpartiet",MDG:"Miljøpartiet de grønne",V:"Venstre",KRF:"Kristeleg Folkeparti",H:"Høgre",FRP:"Framstegspartiet",Andre:"Andre"},typenavn:{F:"Fylkestingsvalet",K:"Kommunestyrevalet",ST:"Stortingsvalet"},typenavn_small:{F:"Fylkesvalet",K:"Kommunevalet",ST:"Stortingsvalet"},typenavnkort:{F:"fylkestingsval",K:"kommunestyreval",ST:"stortingsval"},text404:{$1:"Ventar på resultat",$2:"Valresultata kjem etter kvart som røystene blir talde. Teljinga startar klokka 21:00."},logopath:{$1:"/valg2013logo-nynorsk.svg",$2:"Val 2013"},nav:{$1:"Heile landet",$2:"Heile fylket",$3:"Heile kommunen",$4:"Vel fylke",$5:"Vel kommune",$6:"Vel krins",$7:"Vis resultat frå",$8:"Vis fordeling av røyster for",$9:"Vel kommune først",$10:"Vel fylke først"},header:{$1:"Fordeling av røyster kommune",$2:"Fordeling av røyster krins",$3:"Fordeling kommune",$4:"Fordeling krins",$5:"Fordeling av røyster fylke",$6:"Fordeling fylke"},info:{$1:"Oppdatert",$2:"Oppteljinga",$3:"Talet på kommunar",$4:"Talet på krinsar",$5:"Symbolforklaring",$6:"Ferdig talde",$7:"Berre førehandsrøyster \ntalde",$8:"Berre valtingsrøyster \ntalde",$9:"Ingen røyster \ntalde"},stats:{$1:"Vis detaljert oversyn",$2:"Skjul detaljert oversyn"},articleLink:{$1:"Detaljert oversyn",$2:"Detaljert oversyn og fleire fylker/kommunar"},toggleInfoOption:{$1:"Vis info",$2:"Skjul info"},symbols:[{img:"sym_up.gif",text:"Prosentvis auke sidan forrige tilsvarande val"},{img:"sym_eq.gif",text:"Inga endring sidan forrige tilsvarande val"},{img:"sym_down.gif",text:"Prosentvis nedgang forrige tilsvarande val"},{img:"sym_bullet1.gif",text:"Andel kommunar/krinsar kor både valtingssrøyster og førehandsrøyster er talde"},{img:"sym_bullet2.gif",text:"Andel kommunar/krinsar kor berre valtingsrøyster er talde"},{img:"sym_bullet3.gif",text:"Andel kommunar/krinsar kor berre førehandsrøyster er talde"},{img:"sym_bullet4.gif",text:"Andel kommunar/krinsar kor ingen røyster er talde"}],symbols2:{$1:"Parti som ikkje er spesifisert i utlistinga.",$2:"Lukk",$3:"Røyster",$4:"Førehandsrøyster",$5:"Prosentvis endring i forhold til forrige",$6:"stortingsval"},prognoser:{$1:"Røyster",$2:"% endring, forrige fylkestingval",$3:"% endring, forrige stortingsval",$4:"Tal stortingsmandat",$5:"Endring tal stortingsmandat",$6:"Tal stortingsmandat ved tenkt val",$7:"Endring tal stortingsmandat ved tenkt val",$8:"Tal kommunestyremandat",$9:"Endring tal kommunestyremandat",$10:"Utjamningsmandat",$11:"% endring, forrige kommunestyreval",$12:"Tal fylkestingsmandat",$13:"Endring tal fylkestingsmandat"},graph:{$1:"Frammøte",$2:"av dei",$3:"med røysterett har røysta"},mandat:{$1:"Oppslutnad",$2:"Mandat",$3:"Stortinget",$4:"Prognose"}};api.election.lang=api.election.nb_NO;for(var apiValg09_i=0;apiValg09_i<api.election.isNN.length;apiValg09_i++)
if(document.location.toString().indexOf(api.election.isNN[apiValg09_i])>=0){api.election.lang=api.election.nn_NO;api.election.isNN_=true;break;}
api.election.fylke={f02:{fnr:'02',navn:'Akershus'},f09:{fnr:'09',navn:'Aust-Agder'},f06:{fnr:'06',navn:'Buskerud'},f20:{fnr:'20',navn:'Finnmark'},f04:{fnr:'04',navn:'Hedmark'},f12:{fnr:'12',navn:'Hordaland'},f11:{fnr:'11',navn:'Rogaland'},f18:{fnr:'18',navn:'Nordland'},f17:{fnr:'17',navn:'Nord-Trøndelag'},f15:{fnr:'15',navn:'Møre og Romsdal'},f05:{fnr:'05',navn:'Oppland'},f03:{fnr:'03',navn:'Oslo'},f10:{fnr:'10',navn:'Vest-Agder'},f07:{fnr:'07',navn:'Vestfold'},f14:{fnr:'14',navn:'Sogn og Fjordane'},f16:{fnr:'16',navn:'Sør-Trøndelag'},f08:{fnr:'08',navn:'Telemark'},f19:{fnr:'19',navn:'Troms'},f01:{fnr:'01',navn:'Østfold'}};api.election.kommune={ko0118:{fnr:'01',konr:'0118',navn:'Aremark'},ko0124:{fnr:'01',konr:'0124',navn:'Askim'},ko0125:{fnr:'01',konr:'0125',navn:'Eidsberg'},ko0106:{fnr:'01',konr:'0106',navn:'Fredrikstad'},ko0101:{fnr:'01',konr:'0101',navn:'Halden'},ko0138:{fnr:'01',konr:'0138',navn:'Hobøl'},ko0111:{fnr:'01',konr:'0111',navn:'Hvaler'},ko0119:{fnr:'01',konr:'0119',navn:'Marker'},ko0104:{fnr:'01',konr:'0104',navn:'Moss'},ko0135:{fnr:'01',konr:'0135',navn:'Råde'},ko0128:{fnr:'01',konr:'0128',navn:'Rakkestad'},ko0121:{fnr:'01',konr:'0121',navn:'Rømskog'},ko0136:{fnr:'01',konr:'0136',navn:'Rygge'},ko0105:{fnr:'01',konr:'0105',navn:'Sarpsborg'},ko0127:{fnr:'01',konr:'0127',navn:'Skiptvet'},ko0123:{fnr:'01',konr:'0123',navn:'Spydeberg'},ko0122:{fnr:'01',konr:'0122',navn:'Trøgstad'},ko0137:{fnr:'01',konr:'0137',navn:'Våler'},ko0220:{fnr:'02',konr:'0220',navn:'Asker'},ko0221:{fnr:'02',konr:'0221',navn:'Aurskog-Høland'},ko0219:{fnr:'02',konr:'0219',navn:'Bærum'},ko0237:{fnr:'02',konr:'0237',navn:'Eidsvoll'},ko0229:{fnr:'02',konr:'0229',navn:'Enebakk'},ko0227:{fnr:'02',konr:'0227',navn:'Fet'},ko0215:{fnr:'02',konr:'0215',navn:'Frogn'},ko0234:{fnr:'02',konr:'0234',navn:'Gjerdrum'},ko0239:{fnr:'02',konr:'0239',navn:'Hurdal'},ko0230:{fnr:'02',konr:'0230',navn:'Lørenskog'},ko0238:{fnr:'02',konr:'0238',navn:'Nannestad'},ko0236:{fnr:'02',konr:'0236',navn:'Nes'},ko0216:{fnr:'02',konr:'0216',navn:'Nesodden'},ko0233:{fnr:'02',konr:'0233',navn:'Nittedal'},ko0217:{fnr:'02',konr:'0217',navn:'Oppegård'},ko0228:{fnr:'02',konr:'0228',navn:'Rælingen'},ko0231:{fnr:'02',konr:'0231',navn:'Skedsmo'},ko0213:{fnr:'02',konr:'0213',navn:'Ski'},ko0226:{fnr:'02',konr:'0226',navn:'Sørum'},ko0235:{fnr:'02',konr:'0235',navn:'Ullensaker'},ko0211:{fnr:'02',konr:'0211',navn:'Vestby'},ko0214:{fnr:'02',konr:'0214',navn:'Ås'},ko0301:{fnr:'03',konr:'0301',navn:'Oslo'},ko0438:{fnr:'04',konr:'0438',navn:'Alvdal'},ko0429:{fnr:'04',konr:'0429',navn:'Åmot'},ko0425:{fnr:'04',konr:'0425',navn:'Åsnes'},ko0420:{fnr:'04',konr:'0420',navn:'Eidskog'},ko0427:{fnr:'04',konr:'0427',navn:'Elverum'},ko0434:{fnr:'04',konr:'0434',navn:'Engerdal'},ko0439:{fnr:'04',konr:'0439',navn:'Folldal'},ko0423:{fnr:'04',konr:'0423',navn:'Grue'},ko0403:{fnr:'04',konr:'0403',navn:'Hamar'},ko0402:{fnr:'04',konr:'0402',navn:'Kongsvinger'},ko0415:{fnr:'04',konr:'0415',navn:'Løten'},ko0418:{fnr:'04',konr:'0418',navn:'Nord-Odal'},ko0441:{fnr:'04',konr:'0441',navn:'Os'},ko0432:{fnr:'04',konr:'0432',navn:'Rendalen'},ko0412:{fnr:'04',konr:'0412',navn:'Ringsaker'},ko0419:{fnr:'04',konr:'0419',navn:'Sør-Odal'},ko0417:{fnr:'04',konr:'0417',navn:'Stange'},ko0430:{fnr:'04',konr:'0430',navn:'Stor-Elvdal'},ko0436:{fnr:'04',konr:'0436',navn:'Tolga'},ko0428:{fnr:'04',konr:'0428',navn:'Trysil'},ko0437:{fnr:'04',konr:'0437',navn:'Tynset'},ko0426:{fnr:'04',konr:'0426',navn:'Våler'},ko0511:{fnr:'05',konr:'0511',navn:'Dovre'},ko0541:{fnr:'05',konr:'0541',navn:'Etnedal'},ko0522:{fnr:'05',konr:'0522',navn:'Gausdal'},ko0502:{fnr:'05',konr:'0502',navn:'Gjøvik'},ko0534:{fnr:'05',konr:'0534',navn:'Gran'},ko0532:{fnr:'05',konr:'0532',navn:'Jevnaker'},ko0512:{fnr:'05',konr:'0512',navn:'Lesja'},ko0501:{fnr:'05',konr:'0501',navn:'Lillehammer'},ko0514:{fnr:'05',konr:'0514',navn:'Lom'},ko0533:{fnr:'05',konr:'0533',navn:'Lunner'},ko0542:{fnr:'05',konr:'0542',navn:'Nord-Aurdal'},ko0516:{fnr:'05',konr:'0516',navn:'Nord-Fron'},ko0538:{fnr:'05',konr:'0538',navn:'Nordre Land'},ko0528:{fnr:'05',konr:'0528',navn:'Østre Toten'},ko0521:{fnr:'05',konr:'0521',navn:'Øyer'},ko0544:{fnr:'05',konr:'0544',navn:'Øystre Slidre'},ko0520:{fnr:'05',konr:'0520',navn:'Ringebu'},ko0517:{fnr:'05',konr:'0517',navn:'Sel'},ko0513:{fnr:'05',konr:'0513',navn:'Skjåk'},ko0536:{fnr:'05',konr:'0536',navn:'Søndre Land'},ko0540:{fnr:'05',konr:'0540',navn:'Sør-Aurdal'},ko0519:{fnr:'05',konr:'0519',navn:'Sør-Fron'},ko0515:{fnr:'05',konr:'0515',navn:'Vågå'},ko0545:{fnr:'05',konr:'0545',navn:'Vang'},ko0543:{fnr:'05',konr:'0543',navn:'Vestre Slidre'},ko0529:{fnr:'05',konr:'0529',navn:'Vestre Toten'},ko0602:{fnr:'06',konr:'0602',navn:'Drammen'},ko0615:{fnr:'06',konr:'0615',navn:'Flå'},ko0631:{fnr:'06',konr:'0631',navn:'Flesberg'},ko0617:{fnr:'06',konr:'0617',navn:'Gol'},ko0618:{fnr:'06',konr:'0618',navn:'Hemsedal'},ko0620:{fnr:'06',konr:'0620',navn:'Hol'},ko0612:{fnr:'06',konr:'0612',navn:'Hole'},ko0628:{fnr:'06',konr:'0628',navn:'Hurum'},ko0604:{fnr:'06',konr:'0604',navn:'Kongsberg'},ko0622:{fnr:'06',konr:'0622',navn:'Krødsherad'},ko0626:{fnr:'06',konr:'0626',navn:'Lier'},ko0623:{fnr:'06',konr:'0623',navn:'Modum'},ko0625:{fnr:'06',konr:'0625',navn:'Nedre Eiker'},ko0616:{fnr:'06',konr:'0616',navn:'Nes'},ko0633:{fnr:'06',konr:'0633',navn:'Nore Og Uvdal'},ko0624:{fnr:'06',konr:'0624',navn:'Øvre Eiker'},ko0605:{fnr:'06',konr:'0605',navn:'Ringerike'},ko0632:{fnr:'06',konr:'0632',navn:'Rollag'},ko0627:{fnr:'06',konr:'0627',navn:'Røyken'},ko0621:{fnr:'06',konr:'0621',navn:'Sigdal'},ko0619:{fnr:'06',konr:'0619',navn:'Ål'},ko0719:{fnr:'07',konr:'0719',navn:'Andebu'},ko0714:{fnr:'07',konr:'0714',navn:'Hof'},ko0702:{fnr:'07',konr:'0702',navn:'Holmestrand'},ko0701:{fnr:'07',konr:'0701',navn:'Horten'},ko0728:{fnr:'07',konr:'0728',navn:'Lardal'},ko0709:{fnr:'07',konr:'0709',navn:'Larvik'},ko0722:{fnr:'07',konr:'0722',navn:'Nøtterøy'},ko0716:{fnr:'07',konr:'0716',navn:'Re'},ko0713:{fnr:'07',konr:'0713',navn:'Sande'},ko0706:{fnr:'07',konr:'0706',navn:'Sandefjord'},ko0720:{fnr:'07',konr:'0720',navn:'Stokke'},ko0711:{fnr:'07',konr:'0711',navn:'Svelvik'},ko0723:{fnr:'07',konr:'0723',navn:'Tjøme'},ko0704:{fnr:'07',konr:'0704',navn:'Tønsberg'},ko0814:{fnr:'08',konr:'0814',navn:'Bamble'},ko0821:{fnr:'08',konr:'0821',navn:'Bø'},ko0817:{fnr:'08',konr:'0817',navn:'Drangedal'},ko0831:{fnr:'08',konr:'0831',navn:'Fyresdal'},ko0827:{fnr:'08',konr:'0827',navn:'Hjartdal'},ko0815:{fnr:'08',konr:'0815',navn:'Kragerø'},ko0829:{fnr:'08',konr:'0829',navn:'Kviteseid'},ko0830:{fnr:'08',konr:'0830',navn:'Nissedal'},ko0819:{fnr:'08',konr:'0819',navn:'Nome'},ko0807:{fnr:'08',konr:'0807',navn:'Notodden'},ko0805:{fnr:'08',konr:'0805',navn:'Porsgrunn'},ko0822:{fnr:'08',konr:'0822',navn:'Sauherad'},ko0828:{fnr:'08',konr:'0828',navn:'Seljord'},ko0811:{fnr:'08',konr:'0811',navn:'Siljan'},ko0806:{fnr:'08',konr:'0806',navn:'Skien'},ko0826:{fnr:'08',konr:'0826',navn:'Tinn'},ko0833:{fnr:'08',konr:'0833',navn:'Tokke'},ko0834:{fnr:'08',konr:'0834',navn:'Vinje'},ko0906:{fnr:'09',konr:'0906',navn:'Arendal'},ko0928:{fnr:'09',konr:'0928',navn:'Birkenes'},ko0938:{fnr:'09',konr:'0938',navn:'Bygland'},ko0941:{fnr:'09',konr:'0941',navn:'Bykle'},ko0937:{fnr:'09',konr:'0937',navn:'Evje Og Hornnes'},ko0919:{fnr:'09',konr:'0919',navn:'Froland'},ko0911:{fnr:'09',konr:'0911',navn:'Gjerstad'},ko0904:{fnr:'09',konr:'0904',navn:'Grimstad'},ko0935:{fnr:'09',konr:'0935',navn:'Iveland'},ko0926:{fnr:'09',konr:'0926',navn:'Lillesand'},ko0901:{fnr:'09',konr:'0901',navn:'Risør'},ko0914:{fnr:'09',konr:'0914',navn:'Tvedestrand'},ko0940:{fnr:'09',konr:'0940',navn:'Valle'},ko0912:{fnr:'09',konr:'0912',navn:'Vegårshei'},ko0929:{fnr:'09',konr:'0929',navn:'Åmli'},ko1027:{fnr:'10',konr:'1027',navn:'Audnedal'},ko1003:{fnr:'10',konr:'1003',navn:'Farsund'},ko1004:{fnr:'10',konr:'1004',navn:'Flekkefjord'},ko1034:{fnr:'10',konr:'1034',navn:'Hægebostad'},ko1001:{fnr:'10',konr:'1001',navn:'Kristiansand'},ko1037:{fnr:'10',konr:'1037',navn:'Kvinesdal'},ko1029:{fnr:'10',konr:'1029',navn:'Lindesnes'},ko1032:{fnr:'10',konr:'1032',navn:'Lyngdal'},ko1002:{fnr:'10',konr:'1002',navn:'Mandal'},ko1021:{fnr:'10',konr:'1021',navn:'Marnardal'},ko1046:{fnr:'10',konr:'1046',navn:'Sirdal'},ko1018:{fnr:'10',konr:'1018',navn:'Søgne'},ko1017:{fnr:'10',konr:'1017',navn:'Songdalen'},ko1014:{fnr:'10',konr:'1014',navn:'Vennesla'},ko1026:{fnr:'10',konr:'1026',navn:'Åseral'},ko1114:{fnr:'11',konr:'1114',navn:'Bjerkreim'},ko1145:{fnr:'11',konr:'1145',navn:'Bokn'},ko1101:{fnr:'11',konr:'1101',navn:'Eigersund'},ko1141:{fnr:'11',konr:'1141',navn:'Finnøy'},ko1129:{fnr:'11',konr:'1129',navn:'Forsand'},ko1122:{fnr:'11',konr:'1122',navn:'Gjesdal'},ko1119:{fnr:'11',konr:'1119',navn:'Hå'},ko1106:{fnr:'11',konr:'1106',navn:'Haugesund'},ko1133:{fnr:'11',konr:'1133',navn:'Hjelmeland'},ko1149:{fnr:'11',konr:'1149',navn:'Karmøy'},ko1120:{fnr:'11',konr:'1120',navn:'Klepp'},ko1144:{fnr:'11',konr:'1144',navn:'Kvitsøy'},ko1112:{fnr:'11',konr:'1112',navn:'Lund'},ko1127:{fnr:'11',konr:'1127',navn:'Randaberg'},ko1142:{fnr:'11',konr:'1142',navn:'Rennesøy'},ko1102:{fnr:'11',konr:'1102',navn:'Sandnes'},ko1135:{fnr:'11',konr:'1135',navn:'Sauda'},ko1111:{fnr:'11',konr:'1111',navn:'Sokndal'},ko1124:{fnr:'11',konr:'1124',navn:'Sola'},ko1103:{fnr:'11',konr:'1103',navn:'Stavanger'},ko1130:{fnr:'11',konr:'1130',navn:'Strand'},ko1134:{fnr:'11',konr:'1134',navn:'Suldal'},ko1121:{fnr:'11',konr:'1121',navn:'Time'},ko1146:{fnr:'11',konr:'1146',navn:'Tysvær'},ko1151:{fnr:'11',konr:'1151',navn:'Utsira'},ko1160:{fnr:'11',konr:'1160',navn:'Vindafjord'},ko1247:{fnr:'12',konr:'1247',navn:'Askøy'},ko1244:{fnr:'12',konr:'1244',navn:'Austevoll'},ko1264:{fnr:'12',konr:'1264',navn:'Austrheim'},ko1201:{fnr:'12',konr:'1201',navn:'Bergen'},ko1219:{fnr:'12',konr:'1219',navn:'Bømlo'},ko1232:{fnr:'12',konr:'1232',navn:'Eidfjord'},ko1211:{fnr:'12',konr:'1211',navn:'Etne'},ko1265:{fnr:'12',konr:'1265',navn:'Fedje'},ko1222:{fnr:'12',konr:'1222',navn:'Fitjar'},ko1246:{fnr:'12',konr:'1246',navn:'Fjell'},ko1241:{fnr:'12',konr:'1241',navn:'Fusa'},ko1234:{fnr:'12',konr:'1234',navn:'Granvin'},ko1227:{fnr:'12',konr:'1227',navn:'Jondal'},ko1238:{fnr:'12',konr:'1238',navn:'Kvam'},ko1224:{fnr:'12',konr:'1224',navn:'Kvinnherad'},ko1263:{fnr:'12',konr:'1263',navn:'Lindås'},ko1266:{fnr:'12',konr:'1266',navn:'Masfjorden'},ko1256:{fnr:'12',konr:'1256',navn:'Meland'},ko1252:{fnr:'12',konr:'1252',navn:'Modalen'},ko1228:{fnr:'12',konr:'1228',navn:'Odda'},ko1243:{fnr:'12',konr:'1243',navn:'Os'},ko1253:{fnr:'12',konr:'1253',navn:'Osterøy'},ko1259:{fnr:'12',konr:'1259',navn:'Øygarden'},ko1260:{fnr:'12',konr:'1260',navn:'Radøy'},ko1242:{fnr:'12',konr:'1242',navn:'Samnanger'},ko1221:{fnr:'12',konr:'1221',navn:'Stord'},ko1245:{fnr:'12',konr:'1245',navn:'Sund'},ko1216:{fnr:'12',konr:'1216',navn:'Sveio'},ko1223:{fnr:'12',konr:'1223',navn:'Tysnes'},ko1231:{fnr:'12',konr:'1231',navn:'Ullensvang Herad'},ko1233:{fnr:'12',konr:'1233',navn:'Ulvik'},ko1251:{fnr:'12',konr:'1251',navn:'Vaksdal'},ko1235:{fnr:'12',konr:'1235',navn:'Voss'},ko1428:{fnr:'14',konr:'1428',navn:'Askvoll'},ko1421:{fnr:'14',konr:'1421',navn:'Aurland'},ko1418:{fnr:'14',konr:'1418',navn:'Balestrand'},ko1438:{fnr:'14',konr:'1438',navn:'Bremanger'},ko1443:{fnr:'14',konr:'1443',navn:'Eid'},ko1429:{fnr:'14',konr:'1429',navn:'Fjaler'},ko1401:{fnr:'14',konr:'1401',navn:'Flora'},ko1432:{fnr:'14',konr:'1432',navn:'Førde'},ko1430:{fnr:'14',konr:'1430',navn:'Gaular'},ko1445:{fnr:'14',konr:'1445',navn:'Gloppen'},ko1411:{fnr:'14',konr:'1411',navn:'Gulen'},ko1444:{fnr:'14',konr:'1444',navn:'Hornindal'},ko1416:{fnr:'14',konr:'1416',navn:'Høyanger'},ko1413:{fnr:'14',konr:'1413',navn:'Hyllestad'},ko1431:{fnr:'14',konr:'1431',navn:'Jølster'},ko1422:{fnr:'14',konr:'1422',navn:'Lærdal'},ko1419:{fnr:'14',konr:'1419',navn:'Leikanger'},ko1426:{fnr:'14',konr:'1426',navn:'Luster'},ko1433:{fnr:'14',konr:'1433',navn:'Naustdal'},ko1441:{fnr:'14',konr:'1441',navn:'Selje'},ko1420:{fnr:'14',konr:'1420',navn:'Sogndal'},ko1412:{fnr:'14',konr:'1412',navn:'Solund'},ko1449:{fnr:'14',konr:'1449',navn:'Stryn'},ko1439:{fnr:'14',konr:'1439',navn:'Vågsøy'},ko1417:{fnr:'14',konr:'1417',navn:'Vik'},ko1424:{fnr:'14',konr:'1424',navn:'Årdal'},ko1547:{fnr:'15',konr:'1547',navn:'Aukra'},ko1576:{fnr:'15',konr:'1576',navn:'Aure'},ko1554:{fnr:'15',konr:'1554',navn:'Averøy'},ko1551:{fnr:'15',konr:'1551',navn:'Eide'},ko1548:{fnr:'15',konr:'1548',navn:'Fræna'},ko1532:{fnr:'15',konr:'1532',navn:'Giske'},ko1557:{fnr:'15',konr:'1557',navn:'Gjemnes'},ko1571:{fnr:'15',konr:'1571',navn:'Halsa'},ko1534:{fnr:'15',konr:'1534',navn:'Haram'},ko1517:{fnr:'15',konr:'1517',navn:'Hareid'},ko1515:{fnr:'15',konr:'1515',navn:'Herøy'},ko1505:{fnr:'15',konr:'1505',navn:'Kristiansund'},ko1545:{fnr:'15',konr:'1545',navn:'Midsund'},ko1502:{fnr:'15',konr:'1502',navn:'Molde'},ko1543:{fnr:'15',konr:'1543',navn:'Nesset'},ko1524:{fnr:'15',konr:'1524',navn:'Norddal'},ko1523:{fnr:'15',konr:'1523',navn:'Ørskog'},ko1520:{fnr:'15',konr:'1520',navn:'Ørsta'},ko1539:{fnr:'15',konr:'1539',navn:'Rauma'},ko1567:{fnr:'15',konr:'1567',navn:'Rindal'},ko1514:{fnr:'15',konr:'1514',navn:'Sande'},ko1546:{fnr:'15',konr:'1546',navn:'Sandøy'},ko1529:{fnr:'15',konr:'1529',navn:'Skodje'},ko1573:{fnr:'15',konr:'1573',navn:'Smøla'},ko1526:{fnr:'15',konr:'1526',navn:'Stordal'},ko1525:{fnr:'15',konr:'1525',navn:'Stranda'},ko1531:{fnr:'15',konr:'1531',navn:'Sula'},ko1563:{fnr:'15',konr:'1563',navn:'Sunndal'},ko1566:{fnr:'15',konr:'1566',navn:'Surnadal'},ko1528:{fnr:'15',konr:'1528',navn:'Sykkylven'},ko1560:{fnr:'15',konr:'1560',navn:'Tingvoll'},ko1516:{fnr:'15',konr:'1516',navn:'Ulstein'},ko1511:{fnr:'15',konr:'1511',navn:'Vanylven'},ko1535:{fnr:'15',konr:'1535',navn:'Vestnes'},ko1519:{fnr:'15',konr:'1519',navn:'Volda'},ko1504:{fnr:'15',konr:'1504',navn:'Ålesund'},ko1622:{fnr:'16',konr:'1622',navn:'Agdenes'},ko1627:{fnr:'16',konr:'1627',navn:'Bjugn'},ko1620:{fnr:'16',konr:'1620',navn:'Frøya'},ko1612:{fnr:'16',konr:'1612',navn:'Hemne'},ko1617:{fnr:'16',konr:'1617',navn:'Hitra'},ko1644:{fnr:'16',konr:'1644',navn:'Holtålen'},ko1662:{fnr:'16',konr:'1662',navn:'Klæbu'},ko1663:{fnr:'16',konr:'1663',navn:'Malvik'},ko1636:{fnr:'16',konr:'1636',navn:'Meldal'},ko1653:{fnr:'16',konr:'1653',navn:'Melhus'},ko1648:{fnr:'16',konr:'1648',navn:'Midtre Gauldal'},ko1634:{fnr:'16',konr:'1634',navn:'Oppdal'},ko1638:{fnr:'16',konr:'1638',navn:'Orkdal'},ko1621:{fnr:'16',konr:'1621',navn:'Ørland'},ko1633:{fnr:'16',konr:'1633',navn:'Osen'},ko1635:{fnr:'16',konr:'1635',navn:'Rennebu'},ko1624:{fnr:'16',konr:'1624',navn:'Rissa'},ko1632:{fnr:'16',konr:'1632',navn:'Roan'},ko1640:{fnr:'16',konr:'1640',navn:'Røros'},ko1664:{fnr:'16',konr:'1664',navn:'Selbu'},ko1657:{fnr:'16',konr:'1657',navn:'Skaun'},ko1613:{fnr:'16',konr:'1613',navn:'Snillfjord'},ko1601:{fnr:'16',konr:'1601',navn:'Trondheim'},ko1665:{fnr:'16',konr:'1665',navn:'Tydal'},ko1630:{fnr:'16',konr:'1630',navn:'Åfjord'},ko1749:{fnr:'17',konr:'1749',navn:'Flatanger'},ko1748:{fnr:'17',konr:'1748',navn:'Fosnes'},ko1717:{fnr:'17',konr:'1717',navn:'Frosta'},ko1742:{fnr:'17',konr:'1742',navn:'Grong'},ko1743:{fnr:'17',konr:'1743',navn:'Høylandet'},ko1756:{fnr:'17',konr:'1756',navn:'Inderøy'},ko1755:{fnr:'17',konr:'1755',navn:'Leka'},ko1718:{fnr:'17',konr:'1718',navn:'Leksvik'},ko1719:{fnr:'17',konr:'1719',navn:'Levanger'},ko1738:{fnr:'17',konr:'1738',navn:'Lierne'},ko1711:{fnr:'17',konr:'1711',navn:'Meråker'},ko1751:{fnr:'17',konr:'1751',navn:'Nærøy'},ko1725:{fnr:'17',konr:'1725',navn:'Namdalseid'},ko1703:{fnr:'17',konr:'1703',navn:'Namsos'},ko1740:{fnr:'17',konr:'1740',navn:'Namsskogan'},ko1744:{fnr:'17',konr:'1744',navn:'Overhalla'},ko1739:{fnr:'17',konr:'1739',navn:'Røyrvik'},ko1736:{fnr:'17',konr:'1736',navn:'Snåsa'},ko1702:{fnr:'17',konr:'1702',navn:'Steinkjer'},ko1714:{fnr:'17',konr:'1714',navn:'Stjørdal'},ko1721:{fnr:'17',konr:'1721',navn:'Verdal'},ko1724:{fnr:'17',konr:'1724',navn:'Verran'},ko1750:{fnr:'17',konr:'1750',navn:'Vikna'},ko1820:{fnr:'18',konr:'1820',navn:'Alstahaug'},ko1871:{fnr:'18',konr:'1871',navn:'Andøy'},ko1854:{fnr:'18',konr:'1854',navn:'Ballangen'},ko1839:{fnr:'18',konr:'1839',navn:'Beiarn'},ko1811:{fnr:'18',konr:'1811',navn:'Bindal'},ko1867:{fnr:'18',konr:'1867',navn:'Bø'},ko1804:{fnr:'18',konr:'1804',navn:'Bodø'},ko1813:{fnr:'18',konr:'1813',navn:'Brønnøy'},ko1827:{fnr:'18',konr:'1827',navn:'Dønna'},ko1853:{fnr:'18',konr:'1853',navn:'Evenes'},ko1841:{fnr:'18',konr:'1841',navn:'Fauske'},ko1859:{fnr:'18',konr:'1859',navn:'Flakstad'},ko1838:{fnr:'18',konr:'1838',navn:'Gildeskål'},ko1825:{fnr:'18',konr:'1825',navn:'Grane'},ko1866:{fnr:'18',konr:'1866',navn:'Hadsel'},ko1849:{fnr:'18',konr:'1849',navn:'Hamarøy'},ko1826:{fnr:'18',konr:'1826',navn:'Hattfjelldal'},ko1832:{fnr:'18',konr:'1832',navn:'Hemnes'},ko1818:{fnr:'18',konr:'1818',navn:'Herøy'},ko1822:{fnr:'18',konr:'1822',navn:'Leirfjord'},ko1851:{fnr:'18',konr:'1851',navn:'Lødingen'},ko1834:{fnr:'18',konr:'1834',navn:'Lurøy'},ko1837:{fnr:'18',konr:'1837',navn:'Meløy'},ko1874:{fnr:'18',konr:'1874',navn:'Moskenes'},ko1805:{fnr:'18',konr:'1805',navn:'Narvik'},ko1828:{fnr:'18',konr:'1828',navn:'Nesna'},ko1868:{fnr:'18',konr:'1868',navn:'Øksnes'},ko1833:{fnr:'18',konr:'1833',navn:'Rana'},ko1836:{fnr:'18',konr:'1836',navn:'Rødøy'},ko1856:{fnr:'18',konr:'1856',navn:'Røst'},ko1840:{fnr:'18',konr:'1840',navn:'Saltdal'},ko1812:{fnr:'18',konr:'1812',navn:'Sømna'},ko1845:{fnr:'18',konr:'1845',navn:'Sørfold'},ko1870:{fnr:'18',konr:'1870',navn:'Sortland'},ko1848:{fnr:'18',konr:'1848',navn:'Steigen'},ko1852:{fnr:'18',konr:'1852',navn:'Tjeldsund'},ko1835:{fnr:'18',konr:'1835',navn:'Træna'},ko1850:{fnr:'18',konr:'1850',navn:'Tysfjord'},ko1857:{fnr:'18',konr:'1857',navn:'Værøy'},ko1865:{fnr:'18',konr:'1865',navn:'Vågan'},ko1824:{fnr:'18',konr:'1824',navn:'Vefsn'},ko1815:{fnr:'18',konr:'1815',navn:'Vega'},ko1860:{fnr:'18',konr:'1860',navn:'Vestvågøy'},ko1816:{fnr:'18',konr:'1816',navn:'Vevelstad'},ko1933:{fnr:'19',konr:'1933',navn:'Balsfjord'},ko1922:{fnr:'19',konr:'1922',navn:'Bardu'},ko1929:{fnr:'19',konr:'1929',navn:'Berg'},ko1926:{fnr:'19',konr:'1926',navn:'Dyrøy'},ko1940:{fnr:'19',konr:'1940',navn:'Gaivuona suohkan/Kåfjord'},ko1919:{fnr:'19',konr:'1919',navn:'Gratangen'},ko1903:{fnr:'19',konr:'1903',navn:'Harstad'},ko1917:{fnr:'19',konr:'1917',navn:'Ibestad'},ko1936:{fnr:'19',konr:'1936',navn:'Karlsøy'},ko1911:{fnr:'19',konr:'1911',navn:'Kvæfjord'},ko1943:{fnr:'19',konr:'1943',navn:'Kvænangen'},ko1920:{fnr:'19',konr:'1920',navn:'Lavangen'},ko1931:{fnr:'19',konr:'1931',navn:'Lenvik'},ko1938:{fnr:'19',konr:'1938',navn:'Lyngen'},ko1924:{fnr:'19',konr:'1924',navn:'Målselv'},ko1942:{fnr:'19',konr:'1942',navn:'Nordreisa'},ko1923:{fnr:'19',konr:'1923',navn:'Salangen'},ko1913:{fnr:'19',konr:'1913',navn:'Skånland'},ko1941:{fnr:'19',konr:'1941',navn:'Skjervøy'},ko1925:{fnr:'19',konr:'1925',navn:'Sørreisa'},ko1939:{fnr:'19',konr:'1939',navn:'Storfjord'},ko1928:{fnr:'19',konr:'1928',navn:'Torsken'},ko1927:{fnr:'19',konr:'1927',navn:'Tranøy'},ko1902:{fnr:'19',konr:'1902',navn:'Tromsø'},ko2012:{fnr:'20',konr:'2012',navn:'Alta'},ko2028:{fnr:'20',konr:'2028',navn:'Båtsfjord'},ko2024:{fnr:'20',konr:'2024',navn:'Berlevåg'},ko2025:{fnr:'20',konr:'2025',navn:'Deanu gielda/Tana'},ko2023:{fnr:'20',konr:'2023',navn:'Gamvik'},ko2011:{fnr:'20',konr:'2011',navn:'Guovdageainnu suohkan/Kautokeino'},ko2004:{fnr:'20',konr:'2004',navn:'Hammerfest'},ko2015:{fnr:'20',konr:'2015',navn:'Hasvik'},ko2021:{fnr:'20',konr:'2021',navn:'Karasjoga gielda/Karasjok'},ko2017:{fnr:'20',konr:'2017',navn:'Kvalsund'},ko2022:{fnr:'20',konr:'2022',navn:'Lebesby'},ko2014:{fnr:'20',konr:'2014',navn:'Loppa'},ko2018:{fnr:'20',konr:'2018',navn:'Måsøy'},ko2019:{fnr:'20',konr:'2019',navn:'Nordkapp'},ko2020:{fnr:'20',konr:'2020',navn:'Porsanger'},ko2030:{fnr:'20',konr:'2030',navn:'Sør-Varanger'},ko2027:{fnr:'20',konr:'2027',navn:'Unjargga gielda/Nesseby'},ko2003:{fnr:'20',konr:'2003',navn:'Vadsø'},ko2002:{fnr:'20',konr:'2002',navn:'Vardø'}};api.election.krets={kr0301_1308:{fnr:'03',konr:'0301',krnr:'1308',navn:'Abildsø skole'},kr0301_1003:{fnr:'03',konr:'0301',krnr:'1003',navn:'Ammerud skole'},kr0301_0206:{fnr:'03',konr:'0301',krnr:'0206',navn:'Anker hotell'},kr0301_0902:{fnr:'03',konr:'0301',krnr:'0902',navn:'Årvoll skole'},kr0301_1402:{fnr:'03',konr:'0301',krnr:'1402',navn:'Bekkelaget skole'},kr0301_0603:{fnr:'03',konr:'0301',krnr:'0603',navn:'Bestum skole'},kr0301_0302:{fnr:'03',konr:'0301',krnr:'0302',navn:'Bjølsen skole'},kr0301_1507:{fnr:'03',konr:'0301',krnr:'1507',navn:'Bjørndal skole'},kr0301_0706:{fnr:'03',konr:'0301',krnr:'0706',navn:'Bogstad skole'},kr0301_0403:{fnr:'03',konr:'0301',krnr:'0403',navn:'Bolteløkka skole'},kr0301_1207:{fnr:'03',konr:'0301',krnr:'1207',navn:'Bryn skole'},kr0301_0510:{fnr:'03',konr:'0301',krnr:'0510',navn:'Bygdøy skole'},kr0301_0809:{fnr:'03',konr:'0301',krnr:'0809',navn:'Disen skole'},kr0301_1401:{fnr:'03',konr:'0301',krnr:'1401',navn:'Ekeberg skole'},kr0301_1201:{fnr:'03',konr:'0301',krnr:'1201',navn:'Ellingsrudåsen skole'},kr0301_0807:{fnr:'03',konr:'0301',krnr:'0807',navn:'Engebråten skole'},kr0301_0203:{fnr:'03',konr:'0301',krnr:'0203',navn:'Engelsborg ressurssenter'},kr0301_0107:{fnr:'03',konr:'0301',krnr:'0107',navn:'Etterstad videregående skole'},kr0301_0402:{fnr:'03',konr:'0301',krnr:'0402',navn:'Fagerborg videregående skole'},kr0301_1105:{fnr:'03',konr:'0301',krnr:'1105',navn:'Folkvang - Høybråten'},kr0301_0205:{fnr:'03',konr:'0301',krnr:'0205',navn:'Foss videregående skole'},kr0301_0507:{fnr:'03',konr:'0301',krnr:'0507',navn:'Frogner kino'},kr0301_0506:{fnr:'03',konr:'0301',krnr:'0506',navn:'Frogner menighetshus/Schafteløkken'},kr0301_1203:{fnr:'03',konr:'0301',krnr:'1203',navn:'Furuset skole'},kr0301_0108:{fnr:'03',konr:'0301',krnr:'0108',navn:'Fyrstikkalléen skole'},kr0301_0104:{fnr:'03',konr:'0301',krnr:'0104',navn:'Gamlebyen skole'},kr0301_1301:{fnr:'03',konr:'0301',krnr:'1301',navn:'Godlia skole'},kr0301_1202:{fnr:'03',konr:'0301',krnr:'1202',navn:'Gran skole'},kr0301_0306:{fnr:'03',konr:'0301',krnr:'0306',navn:'Grefsenveien 28, selskapslokale'},kr0301_0705:{fnr:'03',konr:'0301',krnr:'0705',navn:'Grindbakken skole'},kr0301_0204:{fnr:'03',konr:'0301',krnr:'0204',navn:'Grünerløkka skole'},kr0301_1501:{fnr:'03',konr:'0301',krnr:'1501',navn:'Hallagerbakken skole'},kr0301_0201:{fnr:'03',konr:'0301',krnr:'0201',navn:'Hasle skole'},kr0301_1205:{fnr:'03',konr:'0301',krnr:'1205',navn:'Haukåsen skole'},kr0301_1206:{fnr:'03',konr:'0301',krnr:'1206',navn:'Hellerud videregående skole'},kr0301_0708:{fnr:'03',konr:'0301',krnr:'0708',navn:'Hovseter skole'},kr0301_1307:{fnr:'03',konr:'0301',krnr:'1307',navn:'Høyenhall skole'},kr0301_0707:{fnr:'03',konr:'0301',krnr:'0707',navn:'Huseby skole'},kr0301_0404:{fnr:'03',konr:'0301',krnr:'0404',navn:'Ila skole'},kr0301_0105:{fnr:'03',konr:'0301',krnr:'0105',navn:'Jordal skole'},kr0301_0103:{fnr:'03',konr:'0301',krnr:'0103',navn:'Kampen skole'},kr0301_0806:{fnr:'03',konr:'0301',krnr:'0806',navn:'Kjelsås skole'},kr0301_1506:{fnr:'03',konr:'0301',krnr:'1506',navn:'Klemetsrud skole'},kr0301_0804:{fnr:'03',konr:'0301',krnr:'0804',navn:'Korsvoll skole'},kr0301_0803:{fnr:'03',konr:'0301',krnr:'0803',navn:'Kringsjå skole'},kr0301_0503:{fnr:'03',konr:'0301',krnr:'0503',navn:'Kristelig Gymnasium'},kr0301_1405:{fnr:'03',konr:'0301',krnr:'1405',navn:'Lambertseter skole'},kr0301_1404:{fnr:'03',konr:'0301',krnr:'1404',navn:'Lambertseter videregående skole'},kr0301_0304:{fnr:'03',konr:'0301',krnr:'0304',navn:'Lilleborg skole'},kr0301_1204:{fnr:'03',konr:'0301',krnr:'1204',navn:'Lindeberg skole'},kr0301_0904:{fnr:'03',konr:'0301',krnr:'0904',navn:'Linderud skole'},kr0301_1409:{fnr:'03',konr:'0301',krnr:'1409',navn:'Ljan skole'},kr0301_0901:{fnr:'03',konr:'0301',krnr:'0901',navn:'Løren skole'},kr0301_0601:{fnr:'03',konr:'0301',krnr:'0601',navn:'Lysejordet skole'},kr0301_1306:{fnr:'03',konr:'0301',krnr:'1306',navn:'Manglerud videregående skole'},kr0301_1702:{fnr:'03',konr:'0301',krnr:'1702',navn:'Maridalen skole'},kr0301_0401:{fnr:'03',konr:'0301',krnr:'0401',navn:'Marienlyst skole'},kr0301_0406:{fnr:'03',konr:'0301',krnr:'0406',navn:'Møllergata skole'},kr0301_0808:{fnr:'03',konr:'0301',krnr:'0808',navn:'Morellbakken skole'},kr0301_1505:{fnr:'03',konr:'0301',krnr:'1505',navn:'Mortensrud skole'},kr0301_1408:{fnr:'03',konr:'0301',krnr:'1408',navn:'Munkerud skole'},kr0301_1403:{fnr:'03',konr:'0301',krnr:'1403',navn:'Nedre Bekkelaget skole'},kr0301_0604:{fnr:'03',konr:'0301',krnr:'0604',navn:'Njårdhallen'},kr0301_0303:{fnr:'03',konr:'0301',krnr:'0303',navn:'Nordpolen skole'},kr0301_1406:{fnr:'03',konr:'0301',krnr:'1406',navn:'Nordseter skole'},kr0301_1407:{fnr:'03',konr:'0301',krnr:'1407',navn:'Nordstrand skole'},kr0301_1002:{fnr:'03',konr:'0301',krnr:'1002',navn:'Nordtvet skole'},kr0301_1303:{fnr:'03',konr:'0301',krnr:'1303',navn:'Oppsal skole'},kr0301_0602:{fnr:'03',konr:'0301',krnr:'0602',navn:'Øraker skole'},kr0301_0508:{fnr:'03',konr:'0301',krnr:'0508',navn:'Oslo Handelsgymnasium'},kr0301_0405:{fnr:'03',konr:'0301',krnr:'0405',navn:'Oslo Katedralskole'},kr0301_1601:{fnr:'03',konr:'0301',krnr:'1601',navn:'Oslo rådhus'},kr0301_1305:{fnr:'03',konr:'0301',krnr:'1305',navn:'Østensjø skole'},kr0301_0502:{fnr:'03',konr:'0301',krnr:'0502',navn:'Paviljongen, Bogstadveien 76'},kr0301_0709:{fnr:'03',konr:'0301',krnr:'0709',navn:'Persbråten videregående skole'},kr0301_0501:{fnr:'03',konr:'0301',krnr:'0501',navn:'Politihøgskolen'},kr0301_1504:{fnr:'03',konr:'0301',krnr:'1504',navn:'Prinsdal skole'},kr0301_0702:{fnr:'03',konr:'0301',krnr:'0702',navn:'Ris ungdomsskole'},kr0301_1001:{fnr:'03',konr:'0301',krnr:'1001',navn:'Rødtvet skole'},kr0301_1502:{fnr:'03',konr:'0301',krnr:'1502',navn:'Rosenholm skole'},kr0301_0509:{fnr:'03',konr:'0301',krnr:'0509',navn:'Ruseløkka skole'},kr0301_0301:{fnr:'03',konr:'0301',krnr:'0301',navn:'Sagene samfunnshus'},kr0301_0305:{fnr:'03',konr:'0301',krnr:'0305',navn:'Sagene skole'},kr0301_0202:{fnr:'03',konr:'0301',krnr:'0202',navn:'Sinsen kirke'},kr0301_0810:{fnr:'03',konr:'0301',krnr:'0810',navn:'Skeidhuset'},kr0301_0606:{fnr:'03',konr:'0301',krnr:'0606',navn:'Skøyen skole'},kr0301_1304:{fnr:'03',konr:'0301',krnr:'1304',navn:'Skøyenåsen skole'},kr0301_1310:{fnr:'03',konr:'0301',krnr:'1310',navn:'Skullerud skole'},kr0301_0703:{fnr:'03',konr:'0301',krnr:'0703',navn:'Slemdal skole'},kr0301_0605:{fnr:'03',konr:'0301',krnr:'0605',navn:'Smestad skole'},kr0301_0802:{fnr:'03',konr:'0301',krnr:'0802',navn:'Sogn videregående skole'},kr0301_1701:{fnr:'03',konr:'0301',krnr:'1701',navn:'Sørkedalen skole'},kr0301_1104:{fnr:'03',konr:'0301',krnr:'1104',navn:'Stig skole'},kr0301_1103:{fnr:'03',konr:'0301',krnr:'1103',navn:'Stovner skole'},kr0301_1102:{fnr:'03',konr:'0301',krnr:'1102',navn:'Stovner videregående skole'},kr0301_0704:{fnr:'03',konr:'0301',krnr:'0704',navn:'Svendstuen skole'},kr0301_0805:{fnr:'03',konr:'0301',krnr:'0805',navn:'Tåsen skole'},kr0301_1004:{fnr:'03',konr:'0301',krnr:'1004',navn:'Tiurleiken skole'},kr0301_1101:{fnr:'03',konr:'0301',krnr:'1101',navn:'Tokerud skole'},kr0301_0903:{fnr:'03',konr:'0301',krnr:'0903',navn:'Tonsenhagen skole'},kr0301_1503:{fnr:'03',konr:'0301',krnr:'1503',navn:'Toppåsen skole'},kr0301_0102:{fnr:'03',konr:'0301',krnr:'0102',navn:'Tøyen skole'},kr0301_1302:{fnr:'03',konr:'0301',krnr:'1302',navn:'Trasop skole'},kr0301_0801:{fnr:'03',konr:'0301',krnr:'0801',navn:'Ullevål skole'},kr0301_1309:{fnr:'03',konr:'0301',krnr:'1309',navn:'Ulsrud videregående skole'},kr0301_0504:{fnr:'03',konr:'0301',krnr:'0504',navn:'Uranienborg menighetshus'},kr0301_0505:{fnr:'03',konr:'0301',krnr:'0505',navn:'Uranienborg skole'},kr0301_0101:{fnr:'03',konr:'0301',krnr:'0101',navn:'Vahl skole'},kr0301_0106:{fnr:'03',konr:'0301',krnr:'0106',navn:'Vålerenga skole'},kr0301_0905:{fnr:'03',konr:'0301',krnr:'0905',navn:'Veitvet skole'},kr0301_0701:{fnr:'03',konr:'0301',krnr:'0701',navn:'Vinderen skole'},kr0301_VIRT:{fnr:'03',konr:'0301',krnr:'VIRT',navn:'** Ikke kretsfordelt **'},kr1103_0011:{fnr:'11',konr:'1103',krnr:'0011',navn:'Austre Åmøy'},kr1103_0001:{fnr:'11',konr:'1103',krnr:'0001',navn:'Buøy/Hundvåg'},kr1103_0008:{fnr:'11',konr:'1103',krnr:'0008',navn:'Eiganes'},kr1103_0016:{fnr:'11',konr:'1103',krnr:'0016',navn:'Gausel'},kr1103_0023:{fnr:'11',konr:'1103',krnr:'0023',navn:'Hafrsfjord'},kr1103_0017:{fnr:'11',konr:'1103',krnr:'0017',navn:'Hinna'},kr1103_0026:{fnr:'11',konr:'1103',krnr:'0026',navn:'Indre Tasta'},kr1103_0009:{fnr:'11',konr:'1103',krnr:'0009',navn:'Kampen'},kr1103_0019:{fnr:'11',konr:'1103',krnr:'0019',navn:'Kvaleberg'},kr1103_0024:{fnr:'11',konr:'1103',krnr:'0024',navn:'Kvernavik'},kr1103_0022:{fnr:'11',konr:'1103',krnr:'0022',navn:'Madlamark'},kr1103_0013:{fnr:'11',konr:'1103',krnr:'0013',navn:'Roaldsøy'},kr1103_0021:{fnr:'11',konr:'1103',krnr:'0021',navn:'Stokka'},kr1103_0005:{fnr:'11',konr:'1103',krnr:'0005',navn:'Storhaug'},kr1103_0025:{fnr:'11',konr:'1103',krnr:'0025',navn:'Sunde'},kr1103_0020:{fnr:'11',konr:'1103',krnr:'0020',navn:'Tjensvoll'},kr1103_0007:{fnr:'11',konr:'1103',krnr:'0007',navn:'Ullandhaug'},kr1103_0006:{fnr:'11',konr:'1103',krnr:'0006',navn:'Våland'},kr1103_0004:{fnr:'11',konr:'1103',krnr:'0004',navn:'Varden'},kr1103_0014:{fnr:'11',konr:'1103',krnr:'0014',navn:'Vassøy'},kr1103_0018:{fnr:'11',konr:'1103',krnr:'0018',navn:'Vaulen'},kr1103_0027:{fnr:'11',konr:'1103',krnr:'0027',navn:'Ytre Tasta'},kr1103_VIRT:{fnr:'11',konr:'1103',krnr:'VIRT',navn:'** Ikke kretsfordelt **'},kr1201_0070:{fnr:'12',konr:'1201',krnr:'0070',navn:'Alvøen valgkrets'},kr1201_0001:{fnr:'12',konr:'1201',krnr:'0001',navn:'Bergen rådhus'},kr1201_0071:{fnr:'12',konr:'1201',krnr:'0071',navn:'Bjørndalsskogen valgkrets'},kr1201_0009:{fnr:'12',konr:'1201',krnr:'0009',navn:'Bønes valgkrets'},kr1201_0074:{fnr:'12',konr:'1201',krnr:'0074',navn:'Damsgård valgkrets'},kr1201_0022:{fnr:'12',konr:'1201',krnr:'0022',navn:'Eidsvåg valgkrets'},kr1201_0037:{fnr:'12',konr:'1201',krnr:'0037',navn:'Garnes valgkrets'},kr1201_0015:{fnr:'12',konr:'1201',krnr:'0015',navn:'Gimle valgkrets'},kr1201_0030:{fnr:'12',konr:'1201',krnr:'0030',navn:'Haukås valgkrets'},kr1201_0028:{fnr:'12',konr:'1201',krnr:'0028',navn:'Haukedalen valgkrets'},kr1201_0004:{fnr:'12',konr:'1201',krnr:'0004',navn:'Haukeland valgkrets'},kr1201_0018:{fnr:'12',konr:'1201',krnr:'0018',navn:'Hellen valgkrets'},kr1201_0056:{fnr:'12',konr:'1201',krnr:'0056',navn:'Hjellestad valgkrets'},kr1201_0051:{fnr:'12',konr:'1201',krnr:'0051',navn:'Hop valgkrets'},kr1201_0029:{fnr:'12',konr:'1201',krnr:'0029',navn:'Hordvik valgkrets'},kr1201_0036:{fnr:'12',konr:'1201',krnr:'0036',navn:'Indre Arna valgkrets'},kr1201_0044:{fnr:'12',konr:'1201',krnr:'0044',navn:'Kaland valgkrets'},kr1201_0045:{fnr:'12',konr:'1201',krnr:'0045',navn:'Kirkevoll valgkrets'},kr1201_0040:{fnr:'12',konr:'1201',krnr:'0040',navn:'Kringlebotn valgkrets'},kr1201_0013:{fnr:'12',konr:'1201',krnr:'0013',navn:'Landås valgkrets'},kr1201_0058:{fnr:'12',konr:'1201',krnr:'0058',navn:'Liland valgkrets'},kr1201_0039:{fnr:'12',konr:'1201',krnr:'0039',navn:'Lone valgkrets'},kr1201_0062:{fnr:'12',konr:'1201',krnr:'0062',navn:'Lynghaug valgkrets'},kr1201_0061:{fnr:'12',konr:'1201',krnr:'0061',navn:'Lyshovden valgkrets'},kr1201_0069:{fnr:'12',konr:'1201',krnr:'0069',navn:'Mathopen valgkrets'},kr1201_0024:{fnr:'12',konr:'1201',krnr:'0024',navn:'Mjølkeråen valgkrets'},kr1201_0002:{fnr:'12',konr:'1201',krnr:'0002',navn:'Møhlenpris valgkrets'},kr1201_0049:{fnr:'12',konr:'1201',krnr:'0049',navn:'Nesttun valgkrets'},kr1201_0003:{fnr:'12',konr:'1201',krnr:'0003',navn:'Nordnes valgkrets'},kr1201_0007:{fnr:'12',konr:'1201',krnr:'0007',navn:'Ny Krohnborg valgkrets'},kr1201_0031:{fnr:'12',konr:'1201',krnr:'0031',navn:'Nyborg valgkrets'},kr1201_0076:{fnr:'12',konr:'1201',krnr:'0076',navn:'Nygårdslien valgkrets'},kr1201_0067:{fnr:'12',konr:'1201',krnr:'0067',navn:'Olsvik valgkrets'},kr1201_0063:{fnr:'12',konr:'1201',krnr:'0063',navn:'Ortun valgkrets'},kr1201_0052:{fnr:'12',konr:'1201',krnr:'0052',navn:'Paradis valgkrets'},kr1201_0055:{fnr:'12',konr:'1201',krnr:'0055',navn:'Rå valgkrets'},kr1201_0032:{fnr:'12',konr:'1201',krnr:'0032',navn:'Rolland valgkrets'},kr1201_0019:{fnr:'12',konr:'1201',krnr:'0019',navn:'Rothaugen valgkrets'},kr1201_0077:{fnr:'12',konr:'1201',krnr:'0077',navn:'Sædalen valgkrets'},kr1201_0025:{fnr:'12',konr:'1201',krnr:'0025',navn:'Salhus valgkrets'},kr1201_0054:{fnr:'12',konr:'1201',krnr:'0054',navn:'Sandsli valgkrets'},kr1201_0057:{fnr:'12',konr:'1201',krnr:'0057',navn:'Skeie valgkrets'},kr1201_0048:{fnr:'12',konr:'1201',krnr:'0048',navn:'Skjold valgkrets'},kr1201_0014:{fnr:'12',konr:'1201',krnr:'0014',navn:'Slettebakken valgkrets'},kr1201_0059:{fnr:'12',konr:'1201',krnr:'0059',navn:'Søreide valgkrets'},kr1201_0023:{fnr:'12',konr:'1201',krnr:'0023',navn:'Tertnes valgkrets'},kr1201_0068:{fnr:'12',konr:'1201',krnr:'0068',navn:'Vadmyra valgkrets'},kr1201_0035:{fnr:'12',konr:'1201',krnr:'0035',navn:'Ytre Arna valgkrets'},kr1201_VIRT:{fnr:'12',konr:'1201',krnr:'VIRT',navn:'** Ikke kretsfordelt **'},kr1601_0014:{fnr:'16',konr:'1601',krnr:'0014',navn:'Blussuvoll'},kr1601_0019:{fnr:'16',konr:'1601',krnr:'0019',navn:'Bratsberg'},kr1601_0024:{fnr:'16',konr:'1601',krnr:'0024',navn:'Breidablikk'},kr1601_0036:{fnr:'16',konr:'1601',krnr:'0036',navn:'Brundalen'},kr1601_0022:{fnr:'16',konr:'1601',krnr:'0022',navn:'Byåsen'},kr1601_0012:{fnr:'16',konr:'1601',krnr:'0012',navn:'Charlottenlund'},kr1601_0037:{fnr:'16',konr:'1601',krnr:'0037',navn:'Eberg'},kr1601_0004:{fnr:'16',konr:'1601',krnr:'0004',navn:'Elgeseter/Øya'},kr1601_0027:{fnr:'16',konr:'1601',krnr:'0027',navn:'Flatåsen'},kr1601_0021:{fnr:'16',konr:'1601',krnr:'0021',navn:'Hallset'},kr1601_0020:{fnr:'16',konr:'1601',krnr:'0020',navn:'Hoeggen'},kr1601_0002:{fnr:'16',konr:'1601',krnr:'0002',navn:'Ila'},kr1601_0026:{fnr:'16',konr:'1601',krnr:'0026',navn:'Kolstad'},kr1601_0009:{fnr:'16',konr:'1601',krnr:'0009',navn:'Lade'},kr1601_0007:{fnr:'16',konr:'1601',krnr:'0007',navn:'Lademoen'},kr1601_0003:{fnr:'16',konr:'1601',krnr:'0003',navn:'Midtbyen'},kr1601_0038:{fnr:'16',konr:'1601',krnr:'0038',navn:'Møllenberg'},kr1601_0016:{fnr:'16',konr:'1601',krnr:'0016',navn:'Nardo'},kr1601_0015:{fnr:'16',konr:'1601',krnr:'0015',navn:'Nidarvoll'},kr1601_0028:{fnr:'16',konr:'1601',krnr:'0028',navn:'Nypvang'},kr1601_0011:{fnr:'16',konr:'1601',krnr:'0011',navn:'Ranheim'},kr1601_0023:{fnr:'16',konr:'1601',krnr:'0023',navn:'Romolslia'},kr1601_0006:{fnr:'16',konr:'1601',krnr:'0006',navn:'Rosenborg'},kr1601_0032:{fnr:'16',konr:'1601',krnr:'0032',navn:'Rye'},kr1601_0005:{fnr:'16',konr:'1601',krnr:'0005',navn:'Singsaker'},kr1601_0025:{fnr:'16',konr:'1601',krnr:'0025',navn:'Sjetne'},kr1601_0018:{fnr:'16',konr:'1601',krnr:'0018',navn:'Solbakken'},kr1601_0030:{fnr:'16',konr:'1601',krnr:'0030',navn:'Spongdal'},kr1601_0035:{fnr:'16',konr:'1601',krnr:'0035',navn:'Stabbursmoen'},kr1601_0013:{fnr:'16',konr:'1601',krnr:'0013',navn:'Strindheim'},kr1601_0001:{fnr:'16',konr:'1601',krnr:'0001',navn:'Sverresborg'},kr1601_0008:{fnr:'16',konr:'1601',krnr:'0008',navn:'Tonstad'},kr1601_0010:{fnr:'16',konr:'1601',krnr:'0010',navn:'Trolla'},kr1601_0031:{fnr:'16',konr:'1601',krnr:'0031',navn:'Ugla'},kr1601_0034:{fnr:'16',konr:'1601',krnr:'0034',navn:'Utleira'},kr1601_0039:{fnr:'16',konr:'1601',krnr:'0039',navn:'Vikåsen'},kr1601_0029:{fnr:'16',konr:'1601',krnr:'0029',navn:'Åsheim'},kr1601_0017:{fnr:'16',konr:'1601',krnr:'0017',navn:'Åsvang'},kr1601_0033:{fnr:'16',konr:'1601',krnr:'0033',navn:'Åsveien'},kr1601_VIRT:{fnr:'16',konr:'1601',krnr:'VIRT',navn:'** Ikke kretsfordelt **'}};fumanchu.register.template("apiElectionMandateOverview",'<div class="mandateOverview">'+'<div class="mandateWrapper">'+'<object class="mandateGraphics" width="100%" data="{{gfx_url}}" type="image/svg+xml" data-collect-as="mandateGpx"></object>'+'</div>'+'<table class="valgDetailsTabBig partyLegends">'+'<tbody>'+'{{#partier}}'+'<tr data-party="{{Partikode}}" class="partyLegend">'+'<th class="partyStats_{{Partikode}}"><span class="partyLogo {{Partikode}}"></span><span class="fullname">{{#partinavn}}{{partinavn}}{{/partinavn}}{{^partinavn}}{{Visningskode}}{{/partinavn}}</span><span class="shortname">{{Visningskode}}</span></th>'+'<td>{{#numberSimple}}{{ProgAntMndtStv}}{{/numberSimple}}</td>'+'<td class="diff {{#numberClass}}{{DiffProgAntMndtFStv}}{{/numberClass}}">{{#numberSimple}}{{DiffProgAntMndtFStv}}{{/numberSimple}}</td>'+'</tr>'+'{{/partier}}'+'</tbody>'+'</table>'+'<div class="clr"></div>'+'<table class="valgDetailsTabSmall">'+'<tbody>'+'{{#partier}}'+'<tr data-party="{{Partikode}}" class="partyLegend">'+'<th class="partyStats_{{Partikode}}"><span class="partyLogo {{Partikode}}"></span><span class="fullname">{{#partinavn}}{{partinavn}}{{/partinavn}}{{^partinavn}}{{Visningskode}}{{/partinavn}}</span><span class="shortname">{{Visningskode}}</span></th>'+'<td>{{#numberSimple}}{{ProgAntMndtStv}}{{/numberSimple}}</td>'+'<td class="diff {{#numberClass}}{{DiffProgAntMndtFStv}}{{/numberClass}}">{{#numberSimple}}{{DiffProgAntMndtFStv}}{{/numberSimple}}</td>'+'</tr>'+'{{/partier}}'+'</tbody>'+'</table>'+'<div class="clr"></div>');fumanchu.register.template("apiElectionDetailTableSmall",'<table class="valgDetailsTabSmall partyLegends">'+'<tbody>'+'{{#partier}}'+'<tr>'+'<th class="partyStats_{{Partikode}}"><span class="fullname">{{#partinavn}}{{partinavn}}{{/partinavn}}{{^partinavn}}{{Visningskode}}{{/partinavn}}</span><span class="shortname">{{Visningskode}}</span></th>'+'<td>{{#numberCheck}}{{ProSt}}{{/numberCheck}}</td>'+'<td class="diff {{#numberClass}}{{DiffPropFStv}}{{/numberClass}}">{{#numberFormat}}{{DiffPropFStv}}{{/numberFormat}}</td>'+'</tr>'+'{{/partier}}'+'</tbody>'+'</table>');var api=api||{};api.VideoCarousel=function(el,config){"use strict";this.el=el;var self=this,transitionEnd,orientationEvent;this.config=config||{'pagetype':'front'};if(navigator.appName==='Microsoft Internet Explorer'){var ua=navigator.userAgent,re=new RegExp("MSIE\ ([0-9]+)");if(parseInt(re.exec(ua)[1])<=8){this.el.className+=' ielte8';}}
this.carouselPane=this.el.getElementsByTagName('div')[0];this.carouselContent=this.carouselPane.getElementsByTagName('div')[0];this.carouselWidth=this.carouselPane.offsetWidth;this.buttons=this.el.getElementsByTagName('button');this.farthestRight=this.getFarthestRight();this.mobile=this.config.pagetype==='mobfront';var thumbs=this.carouselContent.getElementsByTagName('figure');this.thumbsGutter=0;if(thumbs.length>1){this.thumbsGutter=thumbs[1].offsetLeft-thumbs[1].offsetWidth;}
this.thumbWidth=thumbs[0].offsetWidth;this.visibleThumbs=0;this.animationOffset=0;this.updateCarouselAnimationOffset();this.updateCarouselContentWidth();this.truncateLeadText();if(this.carouselContent.children.length>this.visibleThumbs){this.updateButtonStates();this.buttons[0].onclick=function(e){self.move(e)};this.buttons[1].onclick=function(e){self.move(e)};}
transitionEnd=this.whichTransitionEvent();orientationEvent=this.whichOrientationEvent();if(typeof window.addEventListener!=='undefined'){this.carouselContent.addEventListener(transitionEnd,function(e){self.updateButtonStates()},false);if(!!this.mobile){window.addEventListener(orientationEvent,function(e){self.updateCarouselAnimationOffset()},false);}}else if(typeof window.attachEvent!=='undefined'){this.carouselContent.attachEvent(transitionEnd,function(e){self.updateButtonStates()});if(!!this.mobile){window.addEventListener(orientationEvent,function(e){self.updateCarouselAnimationOffset()});}}};api.VideoCarousel.prototype.whichOrientationEvent=function(){"use strict";return'orientationchange'in window?'orientationchange':'resize';};api.VideoCarousel.prototype.whichTransitionEvent=function(){"use strict";var t;var el=document.createElement('fakeelement');var transitions={'transition':'transitionEnd','OTransition':'oTransitionEnd','MSTransition':'msTransitionEnd','MozTransition':'transitionend','WebkitTransition':'webkitTransitionEnd'};for(t in transitions){if(el.style[t]!==undefined){return transitions[t];}}};api.VideoCarousel.prototype.updateCarouselAnimationOffset=function(){"use strict";var self=this,atFarthestRight=this.farthestRight===this.carouselContent.offsetLeft;this.farthestRight=this.getFarthestRight();this.visibleThumbs=this.getVisibleThumbs();this.animationOffset=Math.max((this.thumbsGutter+this.thumbWidth),this.visibleThumbs*(this.thumbsGutter+this.thumbWidth));setTimeout(function(){if(!!atFarthestRight||self.carouselContent.offsetLeft<self.farthestRight){self.carouselContent.style.left=Math.abs(window.orientation)===90?Math.max(self.carouselContent.offsetLeft,self.farthestRight)+'px':self.farthestRight+'px';}
self.updateButtonStates();},200);};api.VideoCarousel.prototype.getVisibleThumbs=function(){"use strict";return Math.floor(((this.carouselWidth=this.carouselPane.offsetWidth)+this.thumbsGutter)/(this.thumbWidth+this.thumbsGutter));};api.VideoCarousel.prototype.getFarthestRight=function(){"use strict";return(this.carouselContent.offsetWidth-this.carouselPane.offsetWidth-this.thumbsGutter)*-1;};api.VideoCarousel.prototype.showShades=function(b){"use strict";if(!this.mobile){return;}
var pane=this.carouselPane,classNames=pane.className.split(' '),i,j=b.length;while(j>0){i=classNames.length;j--;var newClassName=j===0?'leftShade':'rightShade';if(!!b[j]){while(i>0){i--;if(classNames[i]===newClassName){return}}
classNames.push(newClassName);}else{while(i>0){i--;if(classNames[i]===newClassName){classNames.splice(i,1);}}}}
pane.setAttribute('class',classNames.join(' '));};api.VideoCarousel.prototype.truncateLeadText=function(){"use strict";var figures=this.el.getElementsByTagName('figcaption'),i=figures.length,j=0,heading,children;while(i>0){i--;if(figures[i].getElementsByTagName('h3')&&figures[i].getElementsByTagName('p')){heading=figures[i].getElementsByTagName('h3')[0];children=figures[i].children;if(heading.offsetHeight>15){j=children.length;while(j>0){j--;children[j].style.display='none';}
heading.style.display='block';}}}};api.VideoCarousel.prototype.updateCarouselContentWidth=function(){"use strict";this.carouselContent.style.width=this.carouselContent.children.length*(this.thumbWidth+this.thumbsGutter)+'px';this.farthestRight=this.getFarthestRight();};api.VideoCarousel.prototype.disableButtons=function(b){"use strict";var i=b.length;while(i>0){i--;!!b[i]?this.buttons[i].setAttribute('disabled',''):this.buttons[i].removeAttribute('disabled');}}
api.VideoCarousel.prototype.updateButtonStates=function(){"use strict";switch(this.carouselContent.offsetLeft){case 0:this.disableButtons([1,0]);this.showShades([0,1]);break;case this.farthestRight:this.disableButtons([0,1]);this.showShades([1,0]);break;default:this.disableButtons([0,0]);this.showShades([0,1]);}};api.VideoCarousel.prototype.move=function(e){"use strict";var dir,target,newPosition;if(!e){var e=window.event;}
target=(e.currentTarget)?e.currentTarget:e.srcElement;dir=target.className==='apiVidCarPrev'?1:-1;if(this.carouselContent.offsetLeft===this.farthestRight){newPosition=Math.min(this.farthestRight+this.animationOffset
+(this.thumbWidth-(this.carouselPane.offsetWidth-this.animationOffset))
-(this.thumbWidth+this.thumbsGutter),0);}else{newPosition=dir===-1?Math.max(this.carouselContent.offsetLeft+this.animationOffset*dir,this.farthestRight):Math.min(this.carouselContent.offsetLeft+this.animationOffset*dir,0);}
if(this.carouselContent.offsetLeft===newPosition){return;}
this.disableButtons([1,1]);if(this.whichTransitionEvent()!==undefined){this.carouselContent.style.left=newPosition+'px';}else{var self=this;(function animate(){var nextPosition=self.carouselContent.offsetLeft+(10*dir);self.carouselContent.style.left=dir===-1?Math.max(nextPosition,newPosition)+'px':Math.min(nextPosition,newPosition)+'px';if(self.carouselContent.offsetLeft===newPosition){self.updateButtonStates();return;}
setTimeout(animate,10);})();}};function ns_onclick(a,url,name,type,e,winopt){if(e.button!=0){return false;}
var ctrlPressed=e.ctrlKey;var ns_l="http://int.sitestat.com/a-pi/"+nedstat_site+"/s?";ns_l+=name;ns_l+='&ns_type='+type+'&ns_action=view';ns_l+='&ns__t='+(new Date()).getTime();if(!url)url=a.href;var ns_0=document.referrer;if(ns_0.lastIndexOf('/')==ns_0.length-1)
ns_0=ns_0.substring(ns_0.lastIndexOf('/'),0);if(ns_0.length>0)
ns_l+='&amp;ns_referrer='+escape(ns_0);winopt=winopt||"";var target=(a&&a.target&&a.target!="")?(a.target.substring(0,1)=="_")?a.target.substring(1):a.target:"self";var ns_i=new Image();if(target=="self"&&ctrlPressed){}else{if(target&&url){if(window[target]){window.ns_softclick_timer=function(target,url){return function(){ns_i.onload=ns_i.onerror=function(){return;};window[((window[target])?target:"self")].location.href=url;}}(target,url);window.setTimeout('ns_softclick_timer()',5000);ns_i.onload=ns_i.onerror=window.ns_softclick_timer;}else{window.open(url,target,winopt);}}}
ns_i.src=ns_l;return false;}
function addNedstatOnclick(link,category){if(link.href){if(link.onmousedown!=null&&link.onmousedown.name=='nedstatPlaceholder'){return true;}
var clickType=(link.href.indexOf(nedstat_siteHost)>-1)?'clickin':'clickout';var counterName=calcCounterName(link,category,clickType);var old=(link.onmousedown)?link.onmousedown:function(){};var newFunc=function(event){old(event);ns_onclick(this,'',counterName,clickType,event);};newFunc.name="nedstatPlaceholder"
link.onmousedown=newFunc;}
return true;}
function calcCounterName(link,category,clickType){if(clickType=='clickout'){return category+'.'+link.hostname;}
return category;}
function onOrigoCreateObject(data_object){origoStatUrl=fullStatUrl+'&amp;ns_type=hidden&amp;origoComment=true'+'&amp;comment.created_by_id='+data_object.created_by_id+'&amp;comment.facebook_user='+data_object.facebook_user+'&amp;comment.body_char_count='+data_object.body_char_count+'&amp;comment.google_user='+data_object.google_user+'&amp;comment.object_id='+data_object.object_id+'&amp;comment.body_word_count='+data_object.body_word_count+'&amp;comment.role_signed_post='+data_object.role_signed_post+'&amp;comment.kudos_count='+data_object.kudos_count+'&amp;comment.sandbox_id='+data_object.sandbox_id+'&amp;comment.origo_user='+data_object.origo_user+'&amp;comment.created_at='+data_object.created_at;sitestat(origoStatUrl);}
var apiNedStat={onclick:function onclick(obj,config,labels){if(config){var url=config.url+"/p?";url+="c1="+config.c1;url+="&c2="+config.c2;url+="&ns_site="+config.ns_site;url+="&name="+config.name;url+="&ns_category="+config.ns_category;if(labels!==''){url+="&"+labels;}
if(config.labels!==''){url+="&"+config.labels.replace(/&amp;/g,"&");}
apiNedStat.ns_onclick(obj,'',url,'hidden');}else{console.log("Missing netstat config parameter causing counting not to occur.");}},ns_onclick:function ns_onclick(i,b,c,h,j){var e=c+"&ns_type="+h+"&ns_action=view";e+="&ns__t="+(new Date()).getTime();if(!b){b=i.href}
var d=document.referrer;if(d.lastIndexOf("/")==d.length-1){d=d.substring(d.lastIndexOf("/"),0)}
if(d.length>0){e+="&amp;ns_referrer="+escape(d)}
j=j||"";var f=(i&&i.target&&i.target!="")?(i.target.substring(0,1)=="_")?i.target.substring(1):i.target:"self";var g=new Image();if(f&&b){if(window[f]){window.ns_softclick_timer=function(k,a){return function(){if(window.ns_softclick_timeout){window.clearTimeout(window.ns_softclick_timeout)}
g.onload=g.onerror=function(){return};window[((window[k])?k:"self")].location.href=a}}(f,b);ns_softclick_timeout=window.setTimeout("ns_softclick_timer()",5000);g.onload=g.onerror=window.ns_softclick_timer}else{window.open(b,f,j)}}
g.src=e;return false}};function ada_analytics(accountId,siteId){var cX=cX||{};cX.callQueue=cX.callQueue||[];cX.callQueue.push(['setAccountId',accountId]);cX.callQueue.push(['setSiteId',siteId]);cX.callQueue.push(['sendPageViewEvent']);}
var api=api||{};api.ads=api.ads||{};api.ads.move=function(elementMoveFrom,elementMoveTo){var newPos=document.getElementById(elementMoveTo);var oldPos=document.getElementById(elementMoveFrom);if(newPos&&newPos.childNodes.length<=1&&oldPos){var object=oldPos.getElementsByTagName("object")[0];if(!!object){if(document.all){var new_object;var html=object.outerHTML;var pat=/<param\s+name\s*=\s*('|")wmode('|")\s+value\s*=\s*('|")(opaque|transparent)('|")\s*\/?\>/i;if(!html.match(pat)){if(html.match(/<param\s+name\s*=\s*('|")wmode('|")\s+value\s*=\s*('|")[a-zA-Z]+('|")\s*\/?\>/i)){new_object=html.replace(/<param\s+name\s*=\s*('|")wmode('|")\s+value\s*=\s*('|")window('|")\s*\/?\>/i,"<param name='wmode' value='opaque' />");}else{new_object=html.replace(/<\/object\>/i,"<param name='wmode' value='opaque' />\n</object>");}
object.insertAdjacentHTML('beforeBegin',new_object);object.parentNode.removeChild(object);}}
var embed=object.getElementsByTagName("embed")[0];if(!!embed)if(embed.getAttribute("wmode")!="transparent")embed.setAttribute("wmode","opaque");}
var x=oldPos.getElementsByTagName('script');if(x!==null){for(i=0;i<x.length;i++){x[i].parentNode.removeChild(x[i]);}}
var body=oldPos.parentNode;body.removeChild(oldPos);newPos.innerHTML='';newPos.appendChild(oldPos);}}
help=function(){var AC_FL_RunContent=0;var nedstat_site='oa';countMe=function(counterName){var ns_l="http://int.sitestat.com/a-pi/"+nedstat_site+"/s?";ns_l+=counterName;ns_l+='&amp;ns_type=clickout&amp;ns_action=view';ns_l+='&amp;ns__t='+(new Date()).getTime();var ns_i=new Image();ns_i.src=ns_l;ns_i.onload=function(){return;};}
startTest=function(){countMe('velgerhjelper.start');}
endTest=function(){countMe('velgerhjelper.end');}
if(AC_FL_RunContent==0){}else{AC_FL_RunContent('codebase','http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0','width','510','height','570','src','http://template.api.no/build/template/r39485/template/gfx/ver2-5/default/flash/velgerhjelpen/main','quality','high','pluginspage','http://www.macromedia.com/go/getflashplayer','align','middle','play','true','loop','true','scale','showall','wmode','window','devicefont','false','id','main','bgcolor','#f3f3f3','name','main','menu','true','allowFullScreen','false','allowScriptAccess','always','movie','http://template.api.no/build/template/r39485/template/gfx/ver2-5/default/flash/velgerhjelpen/main','salign','','flashvars','xmlUrl=http://template.api.no/build/template/r39485/template/gfx/ver2-5/default/flash/velgerhjelpen/content.xml');}}
function checkKeycode(e){var keycode;if(window.event)keycode=window.event.keyCode;else if(e)keycode=e.which;switch(keycode){case 37:if(prevUrl!=null){window.location=prevUrl;}
break;case 39:if(nextUrl!=null){window.location=nextUrl;}
break;}}
(function defineElectionStandaloneComponent(){function floatToNorwegianString(f){if(typeof f==='undefined'||f===null||isNaN(f)){return"-";}
return parseFloat(f).toFixed(1).replace(".",",");}
function floatToNorwegianPercentageString(f){var numString=floatToNorwegianString(f);if(numString!=='-'){return numString+"%";}
return numString;}
function mustacheFragmentFormatDecimals(numberStringTemplateFragment,render){var numberString=render(numberStringTemplateFragment);var number=parseFloat(numberString);numberString=floatToNorwegianString(number);if(number>0){numberString="+"+numberString;}
return numberString;}
function mustacheFragmentToNorwegianPercentageString(numberStringTemplateFragment,render){var numberString=render(numberStringTemplateFragment);var number=parseFloat(numberString);numberString=floatToNorwegianPercentageString(number);return numberString;}
function mustacheFragmentToNorwegianSimpleString(numberStringTemplateFragment,render){var numberString=render(numberStringTemplateFragment);numberString=parseFloat(numberString);return numberString;}
function findClassForNumber(numberStringTemplateFragment,render){var numberString=render(numberStringTemplateFragment);var number=parseFloat(numberString);if(!isNaN(number)&&number<0.0){return"down";}
if(!isNaN(number)&&number>0.0){return"up";}}
function getPlatform(){return(typeof NP==='object'||typeof MOB==='object')?'xE':'xA';}
function getGFXPath(platform){var path='';switch(platform){case'xE':path='/img/api/';break;case'xA':path=api.election.gfxloc.replace(/http([s]?):\/\/(.+?)\//gi,'/');break;}
return path;}
function hasSVGSupport(){return(typeof document.createElement('svg').getAttributeNS==='function');}
function hasCSSAnimationSupport(){var s=document.createElement('p').style;return'animation'in s||'WebkitAnimation'in s;}
api.election.Presentation.prototype.init=function(){};api.election.Presentation.prototype.stackContent=function(id){this.prepareData();this.checkBrowserCapabilities();this.resetMandateGpx();this.writeHeader();this.writeTopNav();this.writeContainer();this.writeNavigation();this.writeSubHeader();this.writeInfo();this.writeGraph();this.writeStats();this.writeToggleInfoOption();if(this.showD)this.writeDetails(id);if(this.isMand){this.showMandat();}};api.election.Presentation.prototype.views=[];api.election.Presentation.prototype.checkBrowserCapabilities=function(){if(!!hasSVGSupport()){this.el.classList.add('svg')};if(!!hasCSSAnimationSupport()){this.el.classList.add('animation')};}
api.election.Presentation.prototype.writeHeader=function(){this.el.appendChild(api.bh("div",{cl:"valgMainHeader"}));};api.election.Presentation.prototype.writeSubHeader=function(){var A=api.election,strHeader,strCls;strHeader="<strong>"+A.lang.typenavn[this.type1]+"</strong>";strCls="valgHeader";if(this.type2=="02")strHeader+=" - "+A.lang.header.$1;else if(this.type2=="03")strHeader+=" - "+A.lang.header.$2;else if(this.type2=="04")strHeader+=" - "+A.lang.header.$5;this.content.appendChild(api.bh("div",{cl:strCls,ih:strHeader}));};api.election.Presentation.prototype.resetMandateGpx=function(){var A=api.election;A.mandateGpx=null;};api.election.Presentation.prototype.writeContainer=function(){var strCl="valgBig";var con=api.bh("div",{cl:"valgContent "+strCl});this.el.appendChild(con);this.content=con;};api.election.Presentation.prototype.writeInfo=function(){var A=api.election,h1,h3,antTot,_a,_b,_x,_y,_z,self=this;var wrap=api.bh("div",{cl:"valginfoWrap"});this.content.appendChild(wrap);var div=api.bh("div",{cl:"valginfoLoc"});wrap.appendChild(div);var timeWrap=api.bh("div",{cl:"valginfoTimeWrap"});wrap.appendChild(timeWrap);if(!this.isMand){if(this.type2=="06"||this.type2=="05"){h1=api.bh("h1",{cl:"valginfoLoc",ih:A.lang.nav.$1});div.appendChild(h1);}
if(this.type1=="ST"||this.type1=="F"){if(this.fylkenr){h1=api.bh("h1",{ih:this.fylkenavn});div.appendChild(h1);}}else{if(this.fylkenr&&this.type2=="04"){h1=api.bh("h1",{ih:this.fylkenavn});div.appendChild(h1);}}
if(this.kommunenr){h1=api.bh("h1",{ih:this.kommunenavn});div.appendChild(h1);}
if(this.kretsnr){h3=api.bh("h3",{ih:this.kretsnavn});div.appendChild(h3);}}else{h1=api.bh("h1",{ih:A.lang.mandat.$3});div.appendChild(h1);h3=api.bh("h3",{ih:A.lang.mandat.$4});div.appendChild(h3);}
var textSpan=api.bh("span",{cl:"valginfoTimeText",ih:A.lang.info.$1+":"});timeWrap.appendChild(textSpan);var timeSpan=api.bh("span",{cl:"valginfoTimeTime",ih:this.data.SisteRegTid});timeWrap.appendChild(timeSpan);var legendTexts=[];if(this.type2!="03"){var pieWrap=api.bh("div",{cl:"valginfoPieWrap"});wrap.appendChild(pieWrap);var pieHeader;if(this.type2=="04"||this.type2=="05"||this.type2=="06"){pieHeader=api.bh("div",{cl:"valginfoPieHeader",ih:A.lang.info.$2});pieWrap.appendChild(pieHeader);antTot=api.bh("div",{cl:"valginfoPieAntTot",ih:A.lang.info.$3+": <strong>"+this.data.TotAntKomm+"</strong>"});pieWrap.appendChild(antTot);_x=Number(this.data.TotAntKomm);_y=Number(this.data.AntKommAltOpptalt);_z=Number(this.data.AntKommVtstOpptalt);_a=Number(this.data.AntKommFhstOpptalt);_b=_x-_y-_z-_a;}else{if(A.hasCircuit(this.kommunenr)){pieHeader=api.bh("div",{cl:"valginfoPieHeader",ih:A.lang.info.$2});pieWrap.appendChild(pieHeader);antTot=api.bh("div",{cl:"valginfoPieAntTot",ih:A.lang.info.$4+": <strong>"+this.data.TotAntKretser+"</strong>"});pieWrap.appendChild(antTot);}
_x=Number(this.data.TotAntKretser);_y=Number(this.data.AntKretserAltOpptalt);_z=Number(this.data.AntKretserVtstOpptalt);_a=Number(this.data.AntKretserFhstOpptalt);_b=_x-_y-_z-_a;}
if(_x>0){legendTexts=[A.lang.info.$6+": (<span>"+Math.round((_y/_x)*100)+"%</span>)",A.lang.info.$8+": (<span>"+Math.round((_z/_x)*100)+"%</span>)",A.lang.info.$7+": (<span>"+Math.round((_a/_x)*100)+"%</span>)",A.lang.info.$9+": (<span>"+Math.round((_b/_x)*100)+"%</span>)"];var legendWrap=api.bh("div",{cl:"valginfoPiechartLegend"});pieWrap.appendChild(legendWrap);for(var i=0,len=legendTexts.length-1;i<len;i++){var legend=legendWrap.appendChild(api.bh("div"));var bullet=legend.appendChild(api.bh("div",{cl:"legendBullet"}));var span=legend.appendChild(api.bh("span",{ih:legendTexts[i]}));}}}};api.election.Presentation.prototype.writeTopNav=function(){var A=api.election,li0,li1,self=this;var cur=(this.type1=="K"||this.isMand)?1:0;var navWrap=api.bh("div",{cl:"apiValgTopNav"});this.el.appendChild(navWrap);var logoWrapper=api.bh("div",{cl:"logoWrapper"});navWrap.appendChild(logoWrapper);var logosrc=A.lang.logopath.$1;var logoalt=A.lang.logopath.$2;if(hasSVGSupport()){var svgLogo=api.bh("object",{cl:"valglogo",width:"100%",height:"100%",type:"image/svg+xml",data:api.election.gfxloc+logosrc});logoWrapper.appendChild(svgLogo);}else{var fallbackLogo=api.bh("span",{cl:"valglogoFallback"});logoWrapper.appendChild(fallbackLogo);}
var ul=api.bh("ul");navWrap.appendChild(ul);if(this.type1=="ST"){li0=api.bh("li",{ih:A.lang.mandat.$1});ul.appendChild(li0);li1=api.bh("li",{ih:A.lang.mandat.$2});ul.appendChild(li1);if(cur==0){li0.className="apiValgTopNavCurrent";$(li1).bind("click",function(){self.showMandat()});}else if(cur==1){li1.className="apiValgTopNavCurrent";$(li0).bind("click",function(){self.showOppsl()});}}else{li0=api.bh("li",{ih:A.lang.typenavn.F});ul.appendChild(li0);li1=api.bh("li",{ih:A.lang.typenavn.K});ul.appendChild(li1);if(cur==0){li0.className="apiValgTopNavCurrent";$(li1).bind("click",function(){self.chType("K");});}else if(cur==1){li1.className="apiValgTopNavCurrent";$(li0).bind("click",function(){self.chType("F");});}}};api.election.Presentation.prototype.writeNavigation=function(){var A=api.election,i,opt,self=this;var nav=api.bh("div",{cl:"valgnav"});this.content.appendChild(nav);var dropWrap=api.bh("div",{cl:"valgdropWrap valgdropWrap_"+this.type1});nav.appendChild(dropWrap);var dropWrap1=api.bh("div",{cl:"valgdropWrap1"});dropWrap.appendChild(dropWrap1);var dropWrap2=api.bh("div",{cl:"valgdropWrap2"});dropWrap.appendChild(dropWrap2);var dropHeader1=api.bh("div",{cl:"valgdropHeader",ih:A.lang.nav.$7+":"});dropWrap1.appendChild(dropHeader1);var dropHeader2=api.bh("div",{cl:"valgdropHeader",ih:A.lang.nav.$8+":"});dropWrap2.appendChild(dropHeader2);var drop1=api.bh("select",{cl:"valgDrop1 valgFylke"});dropWrap1.appendChild(drop1);drop1.appendChild(api.bh("option",{ih:A.lang.nav.$4+"...",value:"",disabled:"disabled"}));drop1.appendChild(api.bh("option",{ih:A.lang.nav.$1,value:"0"}));var drop2=api.bh("select",{cl:"valgDrop2 valgKommune"});if(this.type1=="K"){dropWrap1.appendChild(drop2);}else{dropWrap2.appendChild(drop2);}
var drop3=api.bh("select",{cl:"valgDrop3 valgKrets"});dropWrap2.appendChild(drop3);var fValgt=false;for(i in A.fylke){if(!(this.type1=="F"&&A.fylke[i].fnr=="03")){opt=api.bh("option",{ih:A.fylke[i].navn,value:A.fylke[i].fnr});drop1.appendChild(opt);if(A.fylke[i].fnr==this.fylkenr){opt.selected=true;fValgt=true;}}}
if(fValgt){var koValgt=false;drop2.appendChild(api.bh("option",{ih:A.lang.nav.$5+"...",value:"",disabled:"disabled"}));drop2.appendChild(api.bh("option",{ih:A.lang.nav.$2,value:"0"}));for(i in A.kommune){if(A.kommune[i].fnr==this.fylkenr){opt=api.bh("option",{ih:A.kommune[i].navn,value:A.kommune[i].konr});drop2.appendChild(opt);if(A.kommune[i].konr==this.kommunenr){opt.selected=true;koValgt=true;}}}
if(koValgt){drop3.appendChild(api.bh("option",{ih:A.lang.nav.$6+"...",value:"",disabled:"disabled"}));drop3.appendChild(api.bh("option",{ih:A.lang.nav.$3,value:"0"}));for(i in A.krets){if(A.krets[i].konr==this.kommunenr){opt=api.bh("option",{ih:A.krets[i].navn,value:A.krets[i].krnr});drop3.appendChild(opt);if(A.krets[i].krnr==this.kretsnr){opt.selected=true;}}}}else{drop3.appendChild(api.bh("option",{ih:A.lang.nav.$9+"..."}));drop3.disabled=true;}}else{drop2.appendChild(api.bh("option",{ih:A.lang.nav.$10+"..."}));drop2.disabled=true;drop3.appendChild(api.bh("option",{ih:A.lang.nav.$10+"..."}));drop3.disabled=true;}
if(!A.hasCircuit(this.kommunenr))drop3.disabled=true;dropWrap.appendChild(api.bh("div",{cl:"clr"}));$("select",dropWrap).bind("change",function(e){self.chLoc(e)});};api.election.Presentation.prototype.writeGraph=function(){var A=api.election,td,i,pilVar,partikode,pers;var div=api.bh("div",{cl:"valgGraphWrap"});this.content.appendChild(div);var mainTable=api.bh("table",{cl:"valgmainTable"});div.appendChild(mainTable);var tBody=api.bh("tbody",{});mainTable.appendChild(tBody);var tr=api.bh("tr",{});tBody.appendChild(tr);for(i=0;i<this.newList.length;i++){partikode=this.newList[i].Partikode;td=api.bh("td",{cl:"valgpilTd"});tr.appendChild(td);var pilTab=api.bh("table",{cl:"valgpilTable",align:"center"});td.appendChild(pilTab);var pilBody=api.bh("tbody",{});pilTab.appendChild(pilBody);var ptr=api.bh("tr",{});pilBody.appendChild(ptr);if(this.newList[i].Partikategori!="0"){switch(this.type1){case"ST":pilVar=this.newList[i].DiffPropFStv;break;case"F":pilVar=this.newList[i].DiffPropFFtv;break;case"K":pilVar=this.newList[i].DiffPropFKsv;}}
else pilVar=this.newList[i].newDiffPropFStv;if(typeof pilVar=="undefined")pilVar="";else pilVar+="";var pilVarDir=(pilVar>0)?"valgup":(pilVar<0)?"valgdown":"valgeq";var ptd=api.bh("td",{ih:"<div>"+floatToNorwegianString(parseFloat(pilVar)).replace("-","")+"</div>",cl:pilVarDir+" valgvar"+" valgsoyle"+i+" valgvar_"+partikode});ptr.appendChild(ptd);if(this.newList[i].Partikategori!="0")pers=Number(this.newList[i].ProSt);else pers=Number(this.newList[i].newProSt);var sHeight=Math.round(pers*4);if(sHeight<0)sHeight=0;ptr=api.bh("tr",{});pilBody.appendChild(ptr);ptd=api.bh("td",{cl:"valgsoyle valgsoyle"+i,"style.height":sHeight+"px"});ptr.appendChild(ptd);var barEle=api.bh("div",{cl:"partisoyle partisoyle_"+partikode});ptd.appendChild(barEle);}
tr=api.bh("tr",{cl:"valgprosent"});tBody.appendChild(tr);for(i=0;i<this.newList.length;i++){var PorSt=(this.newList[i].Partikategori!="0"||typeof this.newList[i].newProSt==='undefined')?this.newList[i].ProSt:this.newList[i].newProSt;td=api.bh("td",{ih:floatToNorwegianPercentageString(PorSt)});tr.appendChild(td);}
tr=api.bh("tr",{});tBody.appendChild(tr);for(i=0;i<this.newList.length;i++){td=api.bh("td",{cl:"valgpartikode",ih:this.newList[i].Visningskode});tr.appendChild(td);}
tr=api.bh("tr",{});tBody.appendChild(tr);for(i=0;i<this.newList.length;i++){partikode=this.newList[i].Partikode;var logoClass=api.election.hasLogo(partikode)?partikode:"ANDRE";logoClass+=" partyLogo";td=api.bh("td",{cl:logoClass});tr.appendChild(td);}
tr=api.bh("tr",{});tBody.appendChild(tr);if(!!this.data.ProFrammotte){td=api.bh("td",{colSpan:"13",ih:A.lang.graph.$1+": <strong>"+A.formatNum(this.data.AntFrammotte)+"</strong> "+A.lang.graph.$2+" <strong>"+A.formatNum(this.data.AntStBerett)+"</strong> "+A.lang.graph.$3,cl:"valgOppmote"});tr.appendChild(td);}
else{td=api.bh("td",{colSpan:"12",ih:A.lang.graph.$1+": <strong>"+this.data.AntFrammotte+"</strong>",cl:"valgOppmote"});tr.appendChild(td);}
this.content.appendChild(fumanchu("apiElectionDetailTableSmall",{partier:this.newList,numberCheck:function(){return mustacheFragmentToNorwegianPercentageString;},numberClass:function(){return findClassForNumber;},numberFormat:function(){return mustacheFragmentFormatDecimals;}}));};api.election.Presentation.prototype.writeStats=function(){var A=api.election,strCl="",strText,self=this;if(this.showD){strCl+=" valginfoStatsHide";strText=A.lang.stats.$2}else{strText=A.lang.stats.$1}
this.statsLink=api.bh("div",{cl:"valginfoStats"+strCl,ih:strText});this.content.appendChild(this.statsLink);$(this.statsLink).bind("click",function(){self.togStats()});strCl="";var strSt="";if(this.showD){strCl=" valgStatsOutShow";strSt="display:block";}
this.details=api.bh("div",{cl:"valgStatsOut"+strCl,ih:"Stats...",style:strSt});this.content.appendChild(this.details);};api.election.Presentation.prototype.writeArticleLink=function(){var A=api.election;var div=api.bh("div",{cl:"valgArticleLink"});this.content.appendChild(div);var linkText=(this.context.replace(/[a-z]*(\d+)/gi,"$1")>=730)?A.lang.articleLink.$2:A.lang.articleLink.$1;var a=api.bh("a",{href:this.link+"#",ih:linkText});div.appendChild(a);};api.election.Presentation.prototype.writeDetails=function(){var A=api.election,tr,th,td,i,strText,strCl,value;var output=this.details;output.innerHTML="";var list=this.newList;var table=api.bh("table",{cl:"valgDetailsTab",cellPadding:"0",cellSpacing:"0",border:"0",width:"100%"});output.appendChild(table);var tbody=api.bh("tbody",{});table.appendChild(tbody);tr=api.bh("tr",{cl:"valgDetailsHeader"});tbody.appendChild(tr);th=api.bh("th",{ih:""});tr.appendChild(th);for(i=0;i<list.length;i++){th=api.bh("th",{ih:list[i].Visningskode});tr.appendChild(th);if(list[i].Partikategori=="0")break;}
tr=api.bh("tr",{cl:""});tbody.appendChild(tr);th=api.bh("th",{ih:A.lang.prognoser.$1,cl:"valgFirst"});tr.appendChild(th);for(i=0;i<list.length;i++){td=api.bh("td",{ih:A.formatNum(list[i].AntStemmer)+"<br><span>("+floatToNorwegianPercentageString(list[i].ProSt)+")</span>"});tr.appendChild(td);if(list[i].Partikategori=="0"){td.className+=" valgLast";break;}}
tr=api.bh("tr",{cl:""});tbody.appendChild(tr);th=api.bh("th",{ih:A.lang.symbols2.$4,cl:"valgFirst"});tr.appendChild(th);for(i=0;i<list.length;i++){td=api.bh("td",{ih:A.formatNum(list[i].AntFhst)});tr.appendChild(td);if(list[i].Partikategori=="0"){td.className+=" valgLast";break;}}
strText=A.lang.prognoser.$3;trStv=api.bh("tr",{cl:""});tbody.appendChild(trStv);th=api.bh("th",{ih:strText,cl:"valgFirst"});trStv.appendChild(th);for(i=0;i<list.length;i++){value=list[i].DiffPropFStv;strCl=(value>=0)?"valgGreen":"valgRed";td=api.bh("td",{cl:strCl,ih:floatToNorwegianPercentageString(value)});trStv.appendChild(td);if(list[i].Partikategori=="0"){td.className+=" valgLast";break;}}
strText=this.type1=="K"?A.lang.prognoser.$11:A.lang.prognoser.$2;tr=api.bh("tr",{cl:""});th=api.bh("th",{ih:strText,cl:"valgFirst"});tr.appendChild(th);for(i=0;i<list.length;i++){switch(this.type1){case"ST":value=list[i].DiffPropFFtv;break;case"F":value=list[i].DiffPropFFtv;break;case"K":value=list[i].DiffPropFKsv;break;}
strCl=(value>=0)?"valgGreen":"valgRed";td=api.bh("td",{cl:strCl,ih:floatToNorwegianPercentageString(value)});tr.appendChild(td);if(list[i].Partikategori=="0"){td.className+=" valgLast";break;}}
if(this.type1=="ST"){tbody.appendChild(trStv);tbody.appendChild(tr);}else{tbody.appendChild(tr);tbody.appendChild(trStv);}
var dl=list[0];if(typeof dl['ProgProSt']!="undefined"||typeof dl['ProgAntMndtStv']!="undefined"||typeof dl['ProgAntMndtFtv']!="undefined"||typeof dl['ProgAntMndtFStv']!="undefined"||typeof dl['ProgAntMndtFFtv']!="undefined"||typeof dl['ProgAntMndt']!="undefined"){tr=api.bh("tr",{cl:"valgDetailsTom"});tbody.appendChild(tr);td=api.bh("td",{ih:"&nbsp;",colSpan:"11"});tr.appendChild(td);tr=api.bh("tr",{cl:"valgDetailsHeader"});tbody.appendChild(tr);th=api.bh("th",{ih:"Prognoser",colSpan:"11"});tr.appendChild(th);}
if(typeof dl['ProgProSt']!="undefined"){tr=api.bh("tr",{cl:"valgDetailsProg"});tbody.appendChild(tr);th=api.bh("th",{ih:A.lang.prognoser.$1,cl:"valgFirst"});tr.appendChild(th);for(i=0;i<list.length;i++){value=list[i].ProgProSt||"-";td=api.bh("td",{ih:floatToNorwegianPercentageString(value)});tr.appendChild(td);if(list[i].Partikategori=="0"){td.className+=" valgLast";break;}}}
if(typeof dl['DiffProgPropFStv']!="undefined"){var trStv=api.bh("tr",{cl:"valgDetailsProg"});th=api.bh("th",{ih:A.lang.prognoser.$3,cl:"valgFirst"});trStv.appendChild(th);for(i=0;i<list.length;i++){value=list[i].DiffProgPropFStv||"-";strCl=(value>=0)?"valgGreen":"valgRed";td=api.bh("td",{cl:strCl,ih:floatToNorwegianPercentageString(value)});trStv.appendChild(td);if(list[i].Partikategori=="0"){td.className+=" valgLast";break;}}
strText=this.type1=="K"?A.lang.prognoser.$11:A.lang.prognoser.$2;tr=api.bh("tr",{cl:"valgDetailsProg"});th=api.bh("th",{ih:strText,cl:"valgFirst"});tr.appendChild(th);var finished=false;for(i=0;i<list.length;i++){if(this.type1=="F"||this.type1=="ST"){value=list[i].DiffProgPropFFtv||"0";}else if(this.type1=="K"){value=list[i].DiffProgPropFKsv||"0";}
strCl=(value>=0)?"valgGreen":"valgRed";td=api.bh("td",{cl:strCl,ih:floatToNorwegianPercentageString(value)});tr.appendChild(td);if(this.data.liste[i].Partikategori=="0"){td.className+=" valgLast";break;}}
if(this.type1=="ST"){tbody.appendChild(trStv);tbody.appendChild(tr);}else{tbody.appendChild(tr);tbody.appendChild(trStv);}}
if(this.type1!="K"){var strField=this.type1=="ST"?"Stv":"Ftv";strText=this.type1=="ST"?A.lang.prognoser.$4:A.lang.prognoser.$12;if(typeof dl["ProgAntMndt"+strField]!="undefined"){tr=api.bh("tr",{cl:"valgDetailsProg"});tbody.appendChild(tr);th=api.bh("th",{ih:strText,cl:"valgFirst"});tr.appendChild(th);for(i=0;i<list.length;i++){value=list[i]["ProgAntMndt"+strField]||"-";td=api.bh("td",{ih:value});tr.appendChild(td);if(list[i].Partikategori=="0"){td.className+=" valgLast";break;}}
strField=this.type1=="ST"?"FStv":this.type2=="05"?"Ftv":"FFtv";strText=this.type1=="ST"?A.lang.prognoser.$5:A.lang.prognoser.$13;tr=api.bh("tr",{cl:"valgDetailsProg valgDetailsProgLast"});tbody.appendChild(tr);th=api.bh("th",{ih:strText,cl:"valgFirst"});tr.appendChild(th);for(i=0;i<list.length;i++){value=list[i]["DiffProgAntMndt"+strField]||"-";strCl=(value>=0)?"valgGreen":"valgRed";td=api.bh("td",{cl:strCl,ih:value});tr.appendChild(td);if(list[i].Partikategori=="0"){td.className+=" valgLast";break;}}
if(this.type2=="06"){tr=api.bh("tr",{cl:"valgDetailsProg valgDetailsProgLast"});tbody.appendChild(tr);th=api.bh("th",{ih:A.lang.prognoser.$10,cl:"valgFirst"});tr.appendChild(th);for(i=0;i<list.length;i++){value=list[i].ProgAntUtjMndtStv||"-";td=api.bh("td",{ih:value});tr.appendChild(td);if(list[i].Partikategori=="0"){td.className+=" valgLast";break;}}}}
if(this.type1=="F"){if(typeof dl['ProgAntMndtStv']!="undefined"){tr=api.bh("tr",{cl:"valgDetailsProg valgDetailsProgLast"});tbody.appendChild(tr);th=api.bh("th",{ih:A.lang.prognoser.$6,cl:"valgFirst"});tr.appendChild(th);for(i=0;i<list.length;i++){value=list[i].ProgAntMndtStv||"-";td=api.bh("td",{ih:value});tr.appendChild(td);if(list[i].Partikategori=="0"){td.className+=" valgLast";break;}}
strField=this.type2=="05"?"Stv":"FStv";strText=A.lang.prognoser.$7;tr=api.bh("tr",{cl:"valgDetailsProg valgDetailsProgLast"});tbody.appendChild(tr);th=api.bh("th",{ih:strText,cl:"valgFirst"});tr.appendChild(th);for(i=0;i<list.length;i++){value=list[i]["DiffProgAntMndt"+strField]||"-";strCl=(value>=0)?"valgGreen":"valgRed";td=api.bh("td",{cl:strCl,ih:value});tr.appendChild(td);if(list[i].Partikategori=="0"){td.className+=" valgLast";break;}}}}}else{if(typeof dl["ProgAntMndt"]!="undefined"){strText=A.lang.prognoser.$8;tr=api.bh("tr",{cl:"valgDetailsProg"});tbody.appendChild(tr);th=api.bh("th",{ih:strText,cl:"valgFirst"});tr.appendChild(th);for(i=0;i<list.length;i++){value=list[i]["ProgAntMndt"]||"-";td=api.bh("td",{ih:value});tr.appendChild(td);if(list[i].Partikategori=="0"){td.className+=" valgLast";break;}}
strText=A.lang.prognoser.$9;tr=api.bh("tr",{cl:"valgDetailsProg valgDetailsProgLast"});tbody.appendChild(tr);th=api.bh("th",{ih:strText,cl:"valgFirst"});tr.appendChild(th);for(i=0;i<list.length;i++){value=list[i]["DiffProgAntMndt"]||"-";strCl=(value>=0)?"valgGreen":"valgRed";td=api.bh("td",{cl:strCl,ih:value});tr.appendChild(td);if(list[i].Partikategori=="0"){td.className+=" valgLast";break;}}}}};api.election.Presentation.prototype.writeMandat=function(){var A=api.election,relativeGFXPath=getGFXPath(getPlatform()),i,url;this.isMand=true;this.el.innerHTML="";this.prepareData();this.writeHeader();this.writeTopNav();this.writeContainer();this.writeInfo(true);this.el.classList.add('apiValgMandWrap');var list=this.newList;var arrParti=[];var arrMand=[];var arrDiff=[];var arrUtgj=[];for(i=0;i<list.length;i++){arrParti.push(list[i].Partikode);arrMand.push(list[i].ProgAntMndtStv);arrDiff.push(list[i].DiffProgAntMndtFStv);arrUtgj.push(list[i].ProgAntUtjMndtStv);}
var strParti=arrParti.join("|");var strMand=arrMand.join("|");var strDiff=arrDiff.join("|");var strUtgj=arrUtgj.join("|");url=relativeGFXPath+"stortinget.svg#parti="+strParti+"&mandat="+strMand+"&diff="+strDiff+"&utgj="+strUtgj+"&txt="+A.lang.prognoser.$10;if(typeof list.filter!=='undefined'){list=list.filter(function removeOthers(el){return el.Partikategori!==0&&typeof el.Partikategori!=='undefined'&&el.Partikategori!==null&&el.Partikategori!=="";});}
var svg=this.content.appendChild(fumanchu("apiElectionMandateOverview",{partier:list,gfx_url:url,numberSimple:function(){return mustacheFragmentToNorwegianSimpleString;},numberClass:function(){return findClassForNumber;},numberFormat:function(){return mustacheFragmentFormatDecimals;}}));A.mandateGpx=svg.mandateGpx;this.writeToggleInfoOption();this.initSVGInteraction(this.content);}
api.election.Presentation.prototype.initSVGInteraction=function(template){if(!hasSVGSupport()){return false;}
var content=$(template),legendsWrapper=content.find('.partyLegends'),SVGObject=content.find('.mandateGraphics').get(0),SVGClass={add:function(el,classStr){if(!this.contains(el,classStr)){el.className.baseVal+=' '+classStr;}},remove:function(el,classStr){el.className.baseVal=el.className.baseVal.replace(this.classMatchRegex(classStr),'')},contains:function(el,classStr){return(el.className.baseVal.match(this.classMatchRegex(classStr)));},classMatchRegex:function(classStr){return new RegExp('\\b'+classStr+'\\b');}};function highlightParty(partyCode,seats){seats.forEach(function(el){if(SVGClass.contains(el,partyCode)){SVGClass.add(el,'highlight');}else{SVGClass.add(el,'dim');}});}
function resetPartyHighlight(seats){seats.forEach(function(el){SVGClass.remove(el,'highlight');SVGClass.remove(el,'dim');});}
SVGObject.onload=function SVGOnLoadEvent(){var svg=SVGObject.contentDocument.getElementById('seats'),seats=Array.prototype.slice.call(svg.querySelectorAll('.seat,.coalitionMember'));legendsWrapper.delegate('.partyLegend','mouseenter',function(){highlightParty(this.getAttribute('data-party'),seats);});legendsWrapper.delegate('.partyLegend','mouseleave',function(){resetPartyHighlight(seats);});};};api.election.Presentation.prototype.writeArticleLink=function(){var A=api.election;var div=api.bh("div",{cl:"valgArticleLink"});this.content.appendChild(div);var linkText=(this.context.replace(/[a-z]*(\d+)/gi,"$1")>=730)?A.lang.articleLink.$2:A.lang.articleLink.$1;var a=api.bh("a",{href:this.link+"#",ih:linkText});div.appendChild(a);};api.election.Presentation.prototype.writeToggleInfoOption=function(){var A=api.election,self=this;var showMore=api.bh("div",{cl:"showMoreOption"});var showMoreLink=api.bh("a",{href:'#'});showMore.appendChild(showMoreLink);var isPopover=!!self.el.classList.contains('popover');isPopover?$(showMoreLink).text(A.lang.toggleInfoOption.$2):$(showMoreLink).text(A.lang.toggleInfoOption.$1);$(showMoreLink).bind('click',function(e){e.preventDefault();var isPopover=!!self.el.classList.contains('popover');self.popOver(!isPopover);isPopover?$(showMoreLink).text(A.lang.toggleInfoOption.$1):$(showMoreLink).text(A.lang.toggleInfoOption.$2);});this.content.appendChild(showMore);}}());tipaFriendHandler=function(){function showMessage(message){$.fn.colorbox({width:"30%",transition:"fade",height:"25%",open:true,html:"<h1>"+message+"</h1>"});$('#apiExtraFunctions').slideToggle(500);window.setTimeout(function(){$.colorbox.close();},3000);}
$("#tipAFriendForm").validate({rules:{comment:{maxlength:settings.maxMsgLength}},messages:texts,groups:{tipAFriend:"emailFrom emailTo comment"},errorPlacement:function(error,element){error.insertAfter($("#comment"));error.addClass("apiValidationMessage");},errorClass:"apiValidationMessage",submitHandler:function(form){var action=form.action;var formData=$(form).serialize();$.ajax({type:'POST',url:action,data:formData,success:function(data){if(data.result=="ok"){showMessage(texts.message_sent);}else{showMessage(data.errorMessage);}},error:function(request,status,exception){showMessage(texts.message_not_sent);},dataType:'json'});}});}
api.meetix=function(p){this.maxlength=512;this.meetixPostUrl=p.url;this.msg=p.msg;this.form=document.getElementsByTagName("form")[document.getElementsByTagName("form").length-1];this.errorField={question:api.getElementsByClassName(this.form,"errorFieldQuestion","div")[0],email:api.getElementsByClassName(this.form,"errorFieldEmail","div")[0],name:api.getElementsByClassName(this.form,"errorFieldName","div")[0]};this.responseField=api.getElementsByClassName(this.form,"responseField","div")[0];this.button=this.form.meetixSend;var self=this;this.button.onclick=function(){self.send();};this.form.question.onkeyup=function(){self.chkLength(this);}};api.meetix.prototype.send=function(){this.errorField.question.innerHTML='';this.errorField.name.innerHTML='';this.errorField.email.innerHTML='';this.responseField.innerHTML='';var question=this.stripHTML(this.form.question.value,this.maxlength);var email=this.stripHTML(this.form.email.value);var name=this.stripHTML(this.form.name.value);var id=this.form.meetixId.value;if(question==''||name==''){if(question==''){this.errorField.question.innerHTML=this.get_msg("error.question");}
if(name==''){this.errorField.name.innerHTML=this.get_msg("error.name");}
return false;}else{var pattern=new RegExp(/\b[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}\b/i);if(email!=""&&!(pattern.test(email))){this.errorField.email.innerHTML=this.get_msg("error.mail");return false;}
var postArguments='question='+encodeURIComponent(question)+'&name='+encodeURIComponent(name)+'&email='+encodeURIComponent(email)+'&netmeetingid='+encodeURIComponent(id);var self=this;var foo=new api.ajax({method:'POST',url:this.meetixPostUrl,args:postArguments,onsuccess:function(req){self.updateCallback(req)},onfailure:function(req){self.updateCallback(req)}});foo.send();}};api.meetix.prototype.stripHTML=function(c,m){c=c.replace(/<(.|\n)*?>/ig,"");if(!!m)c=c.substr(0,m);return c;};api.meetix.prototype.chkLength=function(o){if(o.value.length>=this.maxlength){o.style.backgroundColor="#f66";this.errorField.question.innerHTML="Max "+this.maxlength+" tegn!"}
else{o.style.backgroundColor="#fff";this.errorField.question.innerHTML=""}};api.meetix.prototype.updateCallback=function(req){if(req.status==200&&req.responseText=='OK'){var div=api.bh("div",{cl:"responseOk response"});div.appendChild(api.bh("span",{cl:"apiIcon"}));div.appendChild(api.bh("strong",{ih:this.get_msg("thankyou")}));div.appendChild(api.bh("br"));div.appendChild(api.bh("text",this.get_msg("feedback")));this.responseField.appendChild(div);this.form.question.value='';}else{var div=api.bh("div",{cl:"responseError response"});div.appendChild(api.bh("span",{cl:"apiIcon"}));div.appendChild(api.bh("strong",{ih:this.get_msg("error.title")}));div.appendChild(api.bh("br"));div.appendChild(api.bh("text",this.get_msg("error.send")));this.responseField.appendChild(div);}};api.meetix.prototype.get_msg=function(p){return this.msg["article.meetix_post."+p]||"%%"+p+"%%";};auth.component={};auth.component.login={userMenu:function userMenu(isLoggedIn,userEmail){var user=document.getElementById("apiUser");var expand=document.getElementById("apiUserActions");var menu=document.getElementById("apiUserActionList");switch(isLoggedIn){case false:menu.style.display="none";expand.className="apiActionListCollapsed";expand.style.display="block";user.onclick=function(){auth.displayLogin()};break;case true:var expandIcon=document.getElementById("apiExpandIcon");logout=document.getElementById("apiUserActionLogout");expand.style.display="block";expand.className="apiActionListCollapsed";expandIcon.style.visibility="visible";user.title=userEmail;user.innerHTML=auth.utils.shorten(userEmail,25);expand.style.display="block";logout.onclick=function(){auth.logOut($('.apiSearchContainer'));};break;default:break;}
$(function(){$("body").click(function(e){if($(e.target).parents("#apiUserActions").size()){if(expand.className==="apiActionListExpanded"){expand.className="apiActionListCollapsed";}else{expand.className="apiActionListExpanded";}}else{expand.className="apiActionListCollapsed";}});});},init:function init(localJanus,janusUrl,useSSL,publicationId){auth.initLogin(this.userMenu,localJanus,janusUrl,useSSL,publicationId);if(auth.isLoggedIn()){if(!auth.validateUser()){auth.logOut();}
auth.renderLoggedIn();}else{auth.renderLogin();}}};auth.component.favourite={favourite:function favourite(advertid){$('#apiFavourite'+advertid).addClass('active');},notFavourite:function notFavourite(advertId){$('#apiFavourite'+advertId).removeClass('active');},isFavourite:function isFavourite(advertId){return $('#apiFavourite'+advertId).hasClass('active');},init:function init(publicationId,advertId,message){fav.initFavourite(publicationId,advertId,message,this.favourite,this.notFavourite,this.isFavourite);}};var apiCaligula=apiCaligula||{};(function(){apiCaligula.makeSlider=function makeSlider(containerSection){var result=new apiCaligula.component();result.slider=new Swipe(containerSection,{speed:200,thumbsEl:'a',buttonEl:'a'});result.total=result.slider.length;result.startThumb=Math.floor(Math.random()*result.total);result.slider.slide(result.startThumb,0);result.nextButton=containerSection.getElementsByClassName("apiCaligulaNext")[0];result.prevButton=containerSection.getElementsByClassName("apiCaligulaPrev")[0];result.nextButton.onclick=function(){result.slider.next();result.showHideButtons();};result.prevButton.onclick=function(){result.slider.prev();result.showHideButtons();};result.showHideButtons();return result;};apiCaligula.component=function(){this.showHideButtons=function(){if(this.slider.index==0){this.prevButton.style.visibility='hidden';}else{this.prevButton.style.visibility='visible';}
if(this.slider.index==(this.total-1)&&this.total==1){this.nextButton.style.visibility='hidden';}else{this.nextButton.style.visibility='visible';}}};}());var apiCarCarousel=apiCarCarousel||{};(function(){var publicationId,swipeElement,carouselElements,apiCarCarouselApi,noCarsContainer,imageURL,slider,auto,protocol=location.protocol,app=apilib(),html=app.html(['div','p','span','a','img','figure','figcaption','h3']),siteUrl=protocol+"//"+location.host,nextbutton,prevbutton,that,jqxhr,i,obscuraUrl;apiCarCarousel.component={initialize:function initialize(data){imageURL=data.obscuraUrl;publicationId=data.publicationId;auto=data.auto?data.auto:"";swipeElement=data.swipeElement;},removeClass:function removeClass(className){that=Array.prototype.slice.call(document.getElementsByClassName(className));for(i=0;i<that.length;i++){that[i].classList.remove(className);}},shouldEnableFader:function shouldEnableFader(slidesNo,containerWidth,thumbWidth,visibleThumbsNo){return visibleThumbsNo>0&&visibleThumbsNo<=slidesNo&&(thumbWidth*visibleThumbsNo)<=containerWidth;},handleCarousel:function(){var sectionEls=document.getElementsByClassName(swipeElement);slider=new Swipe(sectionEls[sectionEls.length-1],{setupCallback:function(e,pos,slides,carouselElements){if(apiCarCarousel.component.shouldEnableFader(this.length,this.container.offsetWidth,this.thumbWidth,slides)){apiCarCarousel.component.removeClass('fader');!!this.thumbs[pos+slides]?this.thumbs[pos+slides].className='fader slides':'';}},transitionCallback:function(e,index){apiCarCarousel.component.removeClass('fader');if(apiCarCarousel.component.shouldEnableFader(this.length,this.container.offsetWidth,this.thumbWidth,this.visibleThumbs)){if(index+this.visibleThumbs<this.length){!!this.thumbs[index+this.visibleThumbs]?this.thumbs[index+this.visibleThumbs].className='fader slides':'';}}},speed:800,auto:auto,thumbsEl:'a'});nextbutton=document.getElementById("apiCarNext");prevbutton=document.getElementById("apiCarPrev");nextbutton.onclick=function(){slider.next();};prevbutton.onclick=function(){slider.prev();};},buildZettImage:function buildZettImage(imageId){var result="http://img.zett.no/orig/orig/ID";if(imageId!=null){result=result.replace('ID',imageId);}
return result;},renderList:function renderList(){apiCarCarouselApi="/API/iris/carcarousel/"+publicationId+".json";html.register('noCarsTemplate',function(tag,obj){noCarsContainer=tag.a({cls:'noCars',target:'_parent',onclick:"apiNedStat.onclick(this, apiNedstatConfig, 'a_click_area=classified.car.carousel.fallback.see_all'); return false;",href:siteUrl+'/vis/rubrikk/motor.html'},'Se alle biler her!');return noCarsContainer;});html.register('itemTemplate',function(tag,varObj){var priceToShow,carEl,prospectUrl,img,title,prospectImage,headerString,figure,imgContainer,figCaption;priceToShow=apiCarCarousel.list.periodFormatted(varObj.price);prospectImage=(!!varObj.imageId)?obscuraUrl+"/external/478x1000r/"+
encodeURIComponent(apiCarCarousel.component.buildZettImage(varObj.imageId)):'';prospectUrl=siteUrl+'/vis/rubrikk/motorprospekt/'+varObj.id+'.html';headerString=varObj.make+", "+varObj.model+", "+varObj.modelYear;title=tag.h3({cls:'title'},headerString,true);figure=tag.figure({});imgContainer=tag.div({cls:"apiImageContainer"});figCaption=tag.figcaption({});figCaption.appendChild(title);figCaption.appendChild(tag.p({},priceToShow));img=(!!prospectImage)?tag.img({src:prospectImage,cls:'apiImage',width:'478',height:'318'}):'';figure.appendChild(imgContainer);figure.appendChild(figCaption);imgContainer.appendChild(img);carEl=(!!varObj.gone)?'':tag.a({cls:'slides',target:'_parent',onclick:"apiNedStat.onclick(this, apiNedstatConfig, 'a_click_area=classified.motor.carousel.prospect'); return false;",href:(!!varObj.gone)?'#':prospectUrl});carEl.appendChild(figure);return carEl;});jqxhr=$.getJSON(apiCarCarouselApi,function(dataWrapper){obscuraUrl=dataWrapper.obscuraUrl;}).done(function(dataWrapper){var el=document.getElementById('apiRealEstateCarouselContent'),data=dataWrapper.prospects;carouselElements=data.length;carouselElements>0?$.each(data,function(i,item){html.renderAndAppend('itemTemplate',item,el)}):html.renderAndReplace('noCarsTemplate',{},el);}).fail(function(){var el=document.getElementById('apiRealEstateCarouselContent');html.renderAndReplace('noCarsTemplate',{},el);});setTimeout(function(){jqxhr.abort()},5000);jqxhr.always(function(){carouselElements>0?apiCarCarousel.component.handleCarousel():'';});}};apiCarCarousel.list={shorten:function shorten(text,maxLength){var result=text;if(maxLength<text.length){result=text.substr(0,maxLength-3)+'...';}
return result;},periodFormatted:function periodFormatted(amount){var delimiter=".",minus='',parsedAsInt=parseInt(amount),n,a;if(isNaN(parsedAsInt)){return'';}
if(parsedAsInt<0){minus='-';}
n=new String(Math.abs(parsedAsInt));a=[];while(n.length>3){var nn=n.substr(n.length-3);a.unshift(nn);n=n.substr(0,n.length-3);}
if(n.length>0){a.unshift(n);}
return minus+a.join(delimiter);}};}());var apiJobCarousel=apiJobCarousel||{};(function(){var publicationName,swipeElement,sectionEl,carouselElements=0,imageURL,gfxUrl,apiJobCarouselSlider,apiJobCarouselApi,noJobsContainer,auto,protocol=location.protocol,app=apilib(),html=app.html(['div','p','span','a','img','figure','figcaption']),siteUrl=protocol+"//"+location.host,that,i,url,jqxhr;apiJobCarousel.component={initialize:function initialize(data){imageURL=data.imageURL;publicationName=data.siteName;auto=data.auto?data.auto:"";swipeElement=data.swipeElement;gfxUrl=data.gfxUrl;},removeClass:function removeClass(className){that=Array.prototype.slice.call(document.getElementsByClassName(className));for(i=0;i<that.length;i++){that[i].classList.remove(className);}},shouldEnableFader:function shouldEnableFader(slidesNo,containerWidth,thumbWidth,visibleThumbsNo){return visibleThumbsNo>0&visibleThumbsNo<slidesNo&&(thumbWidth*visibleThumbsNo)<containerWidth;},handleCarousel:function(){sectionEl=document.getElementsByClassName(swipeElement);apiJobCarouselSlider=new Swipe(sectionEl[sectionEl.length-1],{setupCallback:function(e,pos,visibleThumbsNo,carouselElements){if(apiJobCarousel.component.shouldEnableFader(this.length,this.container.offsetWidth,this.thumbWidth,visibleThumbsNo)){apiJobCarousel.component.removeClass('fader');!!this.thumbs[pos+visibleThumbsNo]?this.thumbs[pos+visibleThumbsNo].className='fader slides':'';}},transitionCallback:function(e,index){apiJobCarousel.component.removeClass('fader');if(apiJobCarousel.component.shouldEnableFader(this.length,this.container.offsetWidth,this.thumbWidth,this.visibleThumbs)){if(index+this.visibleThumbs<this.length){!!this.thumbs[index+this.visibleThumbs]?this.thumbs[index+this.visibleThumbs].className='fader slides':'';}}},speed:800,auto:auto,thumbsEl:'a'});document.getElementById("apiNextSlide").onclick=function(){apiJobCarouselSlider.next();};document.getElementById("apiPrevSlide").onclick=function(){apiJobCarouselSlider.prev();};},buildZettImage:function buildZettImage(imageId){url="http://img.zett.no/orig/orig/ID";return imageId!=null?url.replace('ID',imageId):url;},renderList:function renderList(){apiJobCarouselApi="/API/iris/oppsalg/job.json?site="+publicationName+"&product_id=1";html.register('noJobsTemplate',function(tag,obj){noJobsContainer=tag.a({cls:'noJobs',target:'_parent',onclick:"apiNedStat.onclick(this, apiNedstatConfig, 'a_click_area=classified.job.carousel.fallback.see_all'); return false;",href:siteUrl+'/vis/rubrikk/stilling_ledig.html'},'Se alle ledige stillinger her!');return noJobsContainer;});html.register('itemTemplate',function(tag,varObj){var prospectImage,prospectUrl,img,employer,worksite,title,figure,imgContainer,figCaption,itemHtml;prospectImage=(!!varObj.client_logo)?imageURL+"/external/176x73rp/"+
encodeURIComponent(apiJobCarousel.component.buildZettImage(varObj.client_logo)):'';prospectUrl=siteUrl+'/vis/rubrikk/jobbprospekt/'+varObj.id+'.html';title=tag.div({cls:'title'},varObj.heading);img=(!!prospectImage)?tag.img({src:prospectImage,cls:'apiImage',width:'173',height:'73',alt:title}):tag.img({src:gfxUrl+'/resources/web/gfx/classified/carousel/job.svg',cls:'apiImage nologo',width:'173',height:'73',alt:title});employer=tag.p({},varObj.employer,true);worksite=tag.p({cls:'normailize'},varObj.worksite_city,true);figure=tag.figure({});imgContainer=tag.div({cls:"apiImageContainer"});figCaption=tag.figcaption({});figCaption.appendChild(employer);figCaption.appendChild(worksite);figure.appendChild(imgContainer);figure.appendChild(figCaption);imgContainer.appendChild(img);imgContainer.appendChild(title);itemHtml=(!!varObj.gone)?'':tag.a({cls:'slides',target:'_parent',onclick:"apiNedStat.onclick(this, apiNedstatConfig, 'a_click_area=classified.job.carousel.prospect'); return false;",href:(!!varObj.gone)?'#':prospectUrl});itemHtml.appendChild(figure);return itemHtml;});jqxhr=$.getJSON(apiJobCarouselApi,function(){}).done(function(dataWrapper){var el=document.getElementById('apiJobCarouselContent'),data=dataWrapper.banner_feed.ads;carouselElements=data.length;carouselElements>0?$.each(data,function(i,item){html.renderAndAppend('itemTemplate',item.ad,el)}):html.renderAndReplace('noJobsTemplate',{},el);}).fail(function(){var el=document.getElementById('apiJobCarouselContent');html.renderAndReplace('noJobsTemplate',{},el);});setTimeout(function(){jqxhr.abort()},5000);jqxhr.always(function(){carouselElements>0?apiJobCarousel.component.handleCarousel():'';});}};}());var apiClassified=apiClassified||{};(function(){var vars,apiProspectReferrer,apiReturnToResultLink='';initialize=function(data){vars=data.vars;};apiClassified.setResultLink=function setResultLink(){if(document.referrer==vars.apiFavouritesUrl){apiProspectReferrer=document.referrer;}else{apiProspectReferrer=document.referrer.substring(0,document.referrer.indexOf("?"));}
if(apiProspectReferrer.length==0){apiReturnToResultLink=vars.apiClassifiedUrl;}
else if(apiProspectReferrer.length>0){if(apiProspectReferrer==vars.apiClassifiedUrl||apiProspectReferrer==vars.apiClassifiedSearchUrl||apiProspectReferrer==vars.apiFavouritesUrl){apiReturnToResultLink=document.referrer;}
else{apiReturnToResultLink=vars.apiClassifiedUrl;}}
$(".api .apiClassifiedNavigation #prospectBackToResultLink").click(function(e){e.preventDefault();location.href=apiReturnToResultLink;});};apiClassified.admin={initialize:initialize};}());function drilldownDetectedSvg(){$('#apiDrilldown .tabHeader').removeClass('tabHeaderFallback');$('#apiDrilldown .searchbutton').removeClass('searchbuttonFallback');}
function drilldownDetectSvg(){var testImg='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNzUiIGhlaWdodD0iMjc1Ij48L3N2Zz4%3D';var img=document.createElement('img');img.setAttribute('src',testImg);img.onload=drilldownDetectedSvg;}
api.HideMaxItems=function(){this.defaults={id:null,max:20};for(var n in arguments[0]){this.defaults[n]=arguments[0][n]}
var maxLi=this.defaults.max;var ulId=this.defaults.id;var ulLengthFull=$("#"+ulId+".full li").length;$("#"+ulId).each(function(){if($(this).hasClass("full")){$(this).hide();}
if($(this).hasClass("most")){$(this).show();}
if(ulLengthFull>maxLi){$("#"+ulId+".most li").last().after("<li class='more'><a href='#' class='more'>Vis alle ("+(ulLengthFull)+")</a></li>");}});$("#"+ulId+" li.more a").live("click",function(){$("#"+ulId+".full").show();$("#"+ulId+".most").hide();if($("#"+ulId+".full li").last().hasClass("less")){return false;}else{$("#"+ulId+".full li").last().after("<li class='less'><a href='#' class='less'>Vis færre ("+maxLi+")</a></li>");return false;}});$("#"+ulId+" li.less a").live("click",function(){$("#"+ulId+".full").hide();$("#"+ulId+".most").show();return false;});}
var apiFav=apiFav||{};(function(){var publicationId,loginMessage,advertId,protocol,siteUrl,favourites,favouriteList,localArray,favouriteIds,listToRevert,fElement,tElement,pElement,jqxhr,messageProperties,realEstateLabels,miscLabels,motorLabels,jobLabels,boatLabels,linkToEiendomsnett,imageURL,siteName,initialize,irisURL;protocol=location.protocol;siteUrl=protocol+"//"+location.host;favouriteList=[];favouriteIds=[];listToRevert=[];initialize=function(data){messageProperties=data.messageProperties;realEstateLabels=data.realEstateLabels;miscLabels=data.miscLabels;motorLabels=data.motorLabels;jobLabels=data.jobLabels;boatLabels=data.boatLabels;linkToEiendomsnett=data.linkToEiendomsnett;imageURL=data.imageURL;siteName=data.siteName;publicationId=data.publicationId;irisURL=data.irisURL;};apiFav.component={favInit:function favInit(localJanus,janusUrl,useSSL){auth.init(localJanus,janusUrl,useSSL,publicationId);loginMessage=messageProperties.favourite_login;if(auth.isLoggedIn()){if(fav.isLocalStorage()){apiFav.Syncronize.prototype.updateProfile(function(){apiFav.component.renderFavouriteList();})}else{apiFav.component.renderFavouriteList();}
document.getElementById("loginEncouragement").style.display="none";}else{fav.isLocalStorage()?apiFav.component.renderFavouriteListAnonymous():auth.displayLogin();}},renderFavouriteListAnonymous:function renderFavouriteListAnonymous(){$("#favLoading").show();favourites="#apiFavouriteResultList";var favouritesLocal=fav.getAllFavouritesAnonymous('favourites');if(favouritesLocal!==null&&favouritesLocal!==undefined){favouriteList=favouritesLocal;$.each(favouritesLocal,function favouriteListJoin(n,favourite){!favourite.deleteFromProfile?favouriteIds[favouriteIds.length]=favourite.advertId:"";});}
if(favouriteIds.length<1){apiFav.updateElement(messageProperties.favourites_none,$('#apiFavouriteListInfo'));$("#favLoading").hide();$("#apiFavouriteResultList").show();}else{favouriteIds=favouriteIds.join(",");apiFav.component.renderList(favouriteIds);$(favourites).delegate("span.favourite","click",function(event){event.preventDefault();advertId=parseInt(this.id.substr(12));apiFav.favourite.event(advertId);});}},renderFavouriteList:function renderFavouriteList(){$("#favLoading").show();favourites="#apiFavouriteResultList";jqxhr=$.getJSON("/API/janus/auth/favourites/?"+Math.round(new Date().getTime()),function(data){favouriteList=JSON.stringify({values:data});favouriteList=JSON.parse(favouriteList);favouriteList=favouriteList.values;}).success(function jqxhrSuccess(){if(favouriteList.length===0){apiFav.updateElement(messageProperties.favourites_none,$('#apiFavouriteListInfo'));$("#favLoading").hide();$("#apiFavouriteResultList").show();}else{$.each(favouriteList,function favouriteListJoin(n,favourite){favouriteIds[favouriteIds.length]=favourite.advertId;});favouriteIds=favouriteIds.join(",");apiFav.component.renderList(favouriteIds);$(favourites).delegate("span.favourite","click",function(event){event.preventDefault();advertId=parseInt(this.id.substr(12));apiFav.favourite.event(advertId);});}}).error(function jqxhrError(){if(jqxhr.status===401){fav.logInBubble(document.getElementById("apiFavouriteResultList"));$("#favLoading").hide();$("#apiFavouriteListHeader").hide();$("#apiFavouriteResultList").show();}else{apiFav.updateElement(messageProperties.favourites_error,$('#apiFavouriteListInfo'));$("#favLoading").hide();$("#apiFavouriteResultList").show();}}).complete(function updateLocalStorage(){if(fav.isLocalStorage()){localArray=apiFav.Syncronize.prototype.favouriteArray(favouriteList,true);try{fav.setLocalStorage(localArray);}catch(e){if(e.message=="QUOTA_EXCEEDED_ERR"){return true;}}}});},renderList:function renderList(favouriteIds){var app=apilib(),html=app.html(['div','p','span','a','img','dl','dt','dd']);var url=irisURL+"/prospects/"+favouriteIds+".json";jqxhr=$.getJSON(url,function(data){var el=document.getElementById('apiFavouriteResultList'),numberOfItems=0,headerText;html.register('itemMissingTemplate',function(tag,varObj){var d,s,favouriteLink,favouriteText,favouriteSpan;d=tag.div({cls:'apiUnifiedResultlistItem notFound'});s=tag.span({},'Annonse med annonse-id "'+varObj.advertId+'" ble ikke funnet');favouriteLink=tag.a({cls:'isFavourite',href:'#'});favouriteText=tag.p({cls:'favouriteText'},messageProperties.favourite_remove);favouriteSpan=tag.span({cls:'favouriteSpan favourite active',id:'apiFavourite'+
varObj.advertId});d.appendChild(favouriteSpan);favouriteSpan.appendChild(favouriteLink);favouriteSpan.appendChild(favouriteText);d.appendChild(s);return d;});html.register('itemTemplate',function(tag,varObj){var sizerange,labels,gone,category,area,priceToShow,d,prospectUrl,favouriteLink,favouriteText,favouriteSpan,linkTarget='',click,img,resultDetails,titleLength,title,resultColumn,resultColumnRight,resultBottom,size='',dt1,dt2,dt3,dt4,dt5,dt6,dt7,dd1,dd2,dd3,dd4,dd5,dd6,dd7,prospectImage,divClass,dt_price_1,dd_price_1,dt_price_2,dd_price_2,companyName,ddCompanyLogo,companyLogo;labels=(!!varObj.realEstate)?realEstateLabels:((!!varObj.motor)?motorLabels:((!!varObj.misc)?miscLabels:((!!varObj.boat)?boatLabels:((!!varObj.job)?jobLabels:''))));category=(!!varObj.realEstate)?'realestate':((!!varObj.motor)?'motor':((!!varObj.misc)?'misc':((!!varObj.boat)?'boat':((!!varObj.job)?'job':'misc'))));area=(!!varObj.listingGeography)?varObj.listingGeography:'--';priceToShow=apiFav.list.getPriceToShow(varObj);companyName=(!!varObj.commercial)?((!!varObj.companyName)?((!!varObj.listingLogo&&varObj.listingImage)?apiFav.list.shorten(varObj.companyName,46):apiFav.list.shorten(varObj.companyName,60)):"--"):labels.dd5;prospectImage=(!!varObj.listingImage)?imageURL+"/external/230x153unifiedrc/"+encodeURIComponent(varObj.listingImage):'';img=(!!prospectImage)?tag.img({src:prospectImage,cls:'apiImage',width:'230',height:'153'}):'';switch(category){case'boat':prospectUrl='/vis/rubrikk/baatprospekt/'+varObj.advertId+'.html';divClass=(!!varObj.listingImage)?'apiUnifiedResultlistItemImage '+category:'apiUnifiedResultlistItem '+category;dd1=tag.dd({},(!!varObj.attributes.length)?varObj.attributes.length:'--');dd2=tag.dd({},area);dd3=tag.dd({cls:'important top'},(!!varObj.attributes.modelyear)?varObj.attributes.modelyear:'--');dd4=tag.dd({cls:'important bottom'},priceToShow);dd5=tag.dd({},companyName);dd6=tag.dd({},(!!varObj.publishedDate)?varObj.publishedDate:'--');ddCompanyLogo=(!!varObj.commercial)?tag.dd():'';companyLogo=tag.img({cls:'apiImage companyLogo',src:imageURL+'/external/140x35r/'+
encodeURIComponent(varObj.listingLogo)});break;case'motor':divClass=(!!varObj.listingImage)?'apiUnifiedResultlistItemImage '+category:'apiUnifiedResultlistItem '+category;prospectUrl='/vis/rubrikk/motorprospekt/'+varObj.advertId+'.html';dd1=tag.dd({},(!!varObj.attributes.mileage)?apiFav.list.periodFormatted(varObj.attributes.mileage):'--');dd2=tag.dd({},area);dd3=tag.dd({cls:'important top'},(!!varObj.attributes.modelyear)?varObj.attributes.modelyear:'--');dd4=tag.dd({cls:'important bottom'},priceToShow);dd5=tag.dd({},companyName);dd6=tag.dd({},(!!varObj.publishedDate)?varObj.publishedDate:'--');ddCompanyLogo=(!!varObj.commercial)?tag.dd():'';companyLogo=tag.img({cls:'apiImage companyLogo',src:imageURL+'/external/140x35r/'+
encodeURIComponent(varObj.listingLogo)});break;case'realestate':var arealLabel='';if(linkToEiendomsnett==='true'){linkTarget='_blank';locationUrl=siteUrl.replace(siteName,"www.eiendomsnett.no");}else{linkTarget='';locationUrl=siteUrl;}
divClass=(!!varObj.listingImage)?'apiUnifiedResultlistItemImage '+category:'apiUnifiedResultlistItem '+category;prospectUrl=locationUrl+'/vis/rubrikk/eiendomsprospekt/'+varObj.advertId+'.html';switch(!!varObj.attributes.shareddebt){case true:dt_price_1=(!!varObj.attributes.shareddebt)?tag.dt({cls:'additionalInfo'},labels.sharedDebt):'';dd_price_1=(!!varObj.attributes.shareddebt)?tag.dd({cls:'additionalInfo'},apiFav.list.periodFormatted(varObj.attributes.shareddebt)+',-'):'';dt_price_2=(!!varObj.attributes.totalprice)?tag.dt({cls:'additionalInfo'},labels.totalPrice):'';dd_price_2=(!!varObj.attributes.totalprice)?tag.dd({cls:'additionalInfo'},apiFav.list.periodFormatted(varObj.attributes.totalprice)+',-'):'';break;case false:dt_price_1=(!!varObj.attributes.valueestimate)?tag.dt({cls:'additionalInfo'},labels.valueestimate):'';dd_price_1=(!!varObj.attributes.valueestimate)?tag.dd({cls:'additionalInfo'},apiFav.list.periodFormatted(varObj.attributes.valueestimate)+',-'):'';dt_price_2=(!!varObj.attributes.loanestimate)?tag.dt({cls:'additionalInfo'},labels.loanestimate):'';dd_price_2=(!!varObj.attributes.loanestimate)?tag.dd({cls:'additionalInfo'},apiFav.list.periodFormatted(varObj.attributes.loanestimate)+',-'):'';break;default:dt_price_1='';dd_price_1='';break;}
switch(varObj.lot){case true:size=(!!varObj.attributes.lotarea)?varObj.attributes.lotarea+messageProperties.sup:"--";break;case false:sizerange=(!!varObj.attributes.areafrom&&!!varObj.attributes.areato)?"fra "+varObj.attributes.areafrom+messageProperties.sup+" til "+varObj.attributes.areato+messageProperties.sup:false;size=(!!varObj.attributes.primaryroomarea)?varObj.attributes.primaryroomarea+messageProperties.sup:((!!varObj.attributes.availablearea)?varObj.attributes.availablearea+messageProperties.sup:((!!varObj.attributes.grossarea)?varObj.attributes.grossarea+messageProperties.sup:((!!varObj.attributes.livingarea)?varObj.attributes.livingarea+messageProperties.sup:((!!sizerange)?sizerange:"--"))));arealLabel=(!!varObj.attributes.primaryroomarea)?labels.dt3:((!!varObj.attributes.availablearea)?labels.dt3BRA:((!!varObj.attributes.grossarea)?labels.dt3BTA:((!!varObj.attributes.livingarea)?labels.dt3BOA:"")));break;default:arealLabel='';size='--';break;}
dd1=tag.dd({},(!!varObj.streetAddress)?varObj.streetAddress:'--');dd2=tag.dd({},area);dd3=tag.dd({cls:'important top'},size);dd4=tag.dd({cls:'important bottom'},priceToShow);dd5=tag.dd({},companyName);dd6=tag.dd({},(!!varObj.publishedDate)?varObj.publishedDate:'--');ddCompanyLogo=(!!varObj.commercial)?tag.dd():'';companyLogo=tag.img({cls:'apiImage companyLogo',src:imageURL+'/external/140x35r/'+
encodeURIComponent(varObj.listingLogo)});dd7=(!!varObj.sold)?tag.span({cls:'soldstatus'},labels.dd7):'';break;case'misc':divClass=(!!varObj.listingImage)?'apiUnifiedResultlistItemImage '+category:'apiUnifiedResultlistItem '+category;prospectUrl='/vis/rubrikk/torgprospekt/'+varObj.advertId+'.html';dd1=tag.dd({},area);dd2=tag.dd({cls:'important top'},(!!varObj.publishedDate)?varObj.publishedDate:'--');dd3=tag.dd({},(!!varObj.category)?varObj.category:'--');dd4=tag.dd({cls:'important bottom'},priceToShow);dd5=tag.dd({},(!!varObj.commercial)?'Firma':labels.dd5);dd6=tag.dd({},'');ddCompanyLogo=(!!varObj.commercial)?tag.dd():'';companyLogo=tag.img({cls:'apiImage companyLogo',src:imageURL+'/external/140x35r/'+
encodeURIComponent(varObj.listingLogo)});dd7=(!!varObj.sold)?tag.p({cls:'soldstatus'},labels.dd7):'';break;case'job':prospectImage=(!!varObj.listingLogo)?imageURL+"/external/210x75r/"+encodeURIComponent(varObj.listingLogo):'';img=(!!prospectImage)?tag.img({src:prospectImage,cls:'apiImage'}):'';divClass=(!!varObj.listingLogo)?'apiUnifiedResultlistItemLogo job':'apiUnifiedResultlistItem job';prospectUrl='/vis/rubrikk/jobbprospekt/'+varObj.advertId+'.html';dd1=tag.dd({},area);dd2=tag.dd({},(!!varObj.publishedDate)?varObj.publishedDate:'--');dd3=tag.dd({cls:'important top'},(!!varObj.attributes.applicationdue)?varObj.attributes.applicationdue:'--');dd4=tag.dd({cls:'important bottom'},(!!varObj.category)?varObj.category:'--');dd5=tag.dd({},(!!varObj.attributes.employer)?varObj.attributes.employer:'--');dd6=tag.dd({},'');break;}
divClass+=(!!varObj.gone)?' gone':'';click=(!!varObj.gone)?'':tag.a({cls:(!!varObj.sold)?'sold':'',target:linkTarget,href:(!!varObj.gone)?'#':prospectUrl});resultDetails=tag.span({cls:'resultDetails'});titleLength=(!!varObj.jobFlag&&img)?90:(!!img)?120:200;resultColumn=tag.dl({cls:'resultColumn'});resultColumnRight=tag.dl({cls:'resultColumnRight'});resultBottom=tag.dl({cls:'resultBottom'});favouriteLink=tag.a({cls:'isFavourite',href:'#'});favouriteText=tag.p({cls:'favouriteText'},messageProperties.favourite_remove);title=tag.span({cls:'title'},apiFav.list.shorten(varObj.title,titleLength),true);favouriteSpan=tag.span({cls:'favouriteSpan favourite active',id:'apiFavourite'+
varObj.advertId});gone=(!!varObj.gone)?tag.p({cls:'gonestatus'},messageProperties.gone):'';dt1=tag.dt({},labels.dt1);dt2=tag.dt({},labels.dt2);dt3=tag.dt({},(!!varObj.realEstate)?(arealLabel!=='')?arealLabel:labels.dt3:labels.dt3);dt4=tag.dt({},(varObj.transactionType==='FOR_RENT')?labels.for_rent:(varObj.transactionType==='WANTED_RENT')?labels.wanted_rent:labels.dt4);dt5=tag.dt({},labels.dt5);d=tag.div({cls:divClass});resultDetails.appendChild(title);resultDetails.appendChild(resultColumn);resultColumn.appendChild(dt1);resultColumn.appendChild(dd1);resultColumn.appendChild(dt2);resultColumn.appendChild(dd2);if(dd6!=''){dt6=tag.dt({},labels.dt6);resultColumn.appendChild(dt6);resultColumn.appendChild(dd6);}
resultDetails.appendChild(resultColumnRight);resultDetails.appendChild(resultBottom);resultColumnRight.appendChild(dt3);resultColumnRight.appendChild(dd3);resultColumnRight.appendChild(dt4);resultColumnRight.appendChild(dd4);resultColumnRight.appendChild(dt_price_1);resultColumnRight.appendChild(dd_price_1);resultColumnRight.appendChild(dt_price_2);resultColumnRight.appendChild(dd_price_2);resultBottom.appendChild(dt5);resultBottom.appendChild(dd5);if(ddCompanyLogo){resultBottom.appendChild(ddCompanyLogo);ddCompanyLogo.appendChild(companyLogo);}
d.appendChild(favouriteSpan);favouriteSpan.appendChild(favouriteLink);favouriteSpan.appendChild(favouriteText);if(varObj.sold){d.appendChild(dd7);}
if(varObj.gone){d.appendChild(gone);d.appendChild(img);d.appendChild(resultDetails);}else{d.appendChild(img);click.appendChild(img);click.appendChild(resultDetails);d.appendChild(click);}
return d;});$.each(data,function(i,item){$.extend(true,item,favouriteList[i]);if(siteName=="www.eiendomsnett.no"){if(item.realEstate){numberOfItems++;html.renderAndAppend('itemTemplate',item,el);}}else{if(item.notFound){html.renderAndAppend('itemMissingTemplate',item,el);}else{numberOfItems++;html.renderAndAppend('itemTemplate',item,el);}}});headerText=apiFav.getResultHeader(numberOfItems);apiFav.updateElement(headerText,$('#apiFavouriteListInfo'));apiFav.addElement(document.getElementById("apiFavouriteListHeader"),apiFav.removeFavouritesButton());document.getElementById("apiRemoveAllFavourites").onclick=function(){apiFav.removeAllFavourites(favouriteList);};}).success(function(){$("#favLoading").hide();$("#apiFavouriteResultList").show();}).error(function(){apiFav.updateElement(messageProperties.favourites_error,$('#apiFavouriteListInfo'));$("#favLoading").hide();$("#apiFavouriteResultList").show();});}};apiFav.favourite={isFavourite:function isFavourite(advertId){return $('#apiFavourite'+advertId).hasClass('active');},isRevert:function isRevert(){return $('#apiRemoveAllFavourites').hasClass('revert');},toggle:function toggle(active,advertId){fElement=$('#apiFavourite'+advertId);tElement=$('#apiFavourite'+advertId+'> .favouriteText');pElement=fElement.parent();if(active){apiFav.updateElement(messageProperties.favourite_remove,tElement);pElement.removeClass('removed');fElement.addClass('active');}else{apiFav.updateElement(messageProperties.favourite_add,tElement);fElement.removeClass('active');pElement.addClass('removed');}},activeFavourite:function favourite(advertId){apiFav.favourite.toggle(true,advertId);},inactiveFavourite:function notFavourite(advertId){apiFav.favourite.toggle(false,advertId);},toggleRemoveButton:function toggleRemoveButton(remove){var buttonElement=document.getElementById('apiRemoveAllFavourites');switch(remove){case false:apiFav.updateElement(messageProperties.favourites_remove_all_revert,buttonElement);buttonElement.className='revert';buttonElement.onclick=function(){apiFav.revertRemoveAllFavourites();};break;case true:apiFav.updateElement(messageProperties.favourites_remove_all,buttonElement);buttonElement.className='remove';buttonElement.onclick=function(){apiFav.removeAllFavourites(favouriteList);};break;default:break;}},event:function favouriteEvent(advertId){fav.initFavouriteList(publicationId,advertId,this.activeFavourite,this.inactiveFavourite,apiFav.favourite.isFavourite(advertId));},cleanup:function remove(publicationId,advertId){fav.initRemoveList(publicationId,advertId,this.activeFavourite,this.inactiveFavourite,apiFav.favourite.isRevert());}};apiFav.list={shorten:function shorten(text,maxLength){var result=text;if(maxLength<text.length){result=text.substr(0,maxLength-3)+'...';}
return result;},periodFormatted:function periodFormatted(amount){var delimiter=".",minus='',parsedAsInt=parseInt(amount),n,a;if(isNaN(parsedAsInt)){return'';}
if(parsedAsInt<0){minus='-';}
n=new String(Math.abs(parsedAsInt));a=[];while(n.length>3){var nn=n.substr(n.length-3);a.unshift(nn);n=n.substr(0,n.length-3);}
if(n.length>0){a.unshift(n);}
return minus+a.join(delimiter);},getPriceToShow:function getPriceToShow(varObj){var priceToShow,monthlyrent,price,pricefrom,priceto,yearlyrent,dailyrent,weeklyrent;monthlyrent=(!!varObj.attributes.monthlyrent)?this.periodFormatted(varObj.attributes.monthlyrent)+',- /mnd':'';price=(!!varObj.attributes.price)?this.periodFormatted(varObj.attributes.price)+',- ':'';pricefrom=(!!varObj.attributes.pricefrom)?"fra "+this.periodFormatted(varObj.attributes.pricefrom)+',- ':'';priceto=(!!varObj.attributes.priceto)?" til "+this.periodFormatted(varObj.attributes.priceto)+',- ':'';yearlyrent=(!!varObj.attributes.yearlyrent)?this.periodFormatted(varObj.attributes.yearlyrent)+',- /år':dailyrent=(!!varObj.attributes.dailyrent)?this.periodFormatted(varObj.attributes.dailyrent)+',- /dag ':'';weeklyrent=(!!varObj.attributes.weeklyrent)?this.periodFormatted(varObj.attributes.weeklyrent)+',- /uke':'';switch(varObj.transactionType){case'FOR_RENT':priceToShow=(!!monthlyrent)?monthlyrent:(!!price)?price:(!!yearlyrent)?yearlyrent:(!!dailyrent)?dailyrent:(!!weeklyrent)?weeklyrent:'--';break;case'WANTED_RENT':priceToShow=(!!monthlyrent)?monthlyrent:(!!price)?price:(!!yearlyrent)?yearlyrent:(!!dailyrent)?dailyrent:(!!weeklyrent)?weeklyrent:'--';break;case'FOR_SALE':priceToShow=(!!pricefrom)?pricefrom+priceto:(!!price)?price:'--';break;case'WANTED_BUY':priceToShow=(!!price)?price:'--';break;case'GIVE_AWAY':priceToShow=miscLabels.give_away;break;case'LOST_AND_FOUND':priceToShow=miscLabels.lost_and_found;break;default:priceToShow=(!!price)?price:'--';}
return priceToShow;}};apiFav.updateElement=function updateElement(text,element){if($(element)){$(element).html(text);}};apiFav.addElement=function updateElement(parentElement,childElement){if(!parentElement){return null;}
var elementFragment=document.createDocumentFragment();elementFragment.appendChild(childElement);parentElement.appendChild(elementFragment);return parentElement;};apiFav.removeAllFavourites=function removeAllFavourites(list){listToRevert=new Array;$.each(list,function(n,favourite){listToRevert.unshift(({"publicationId":favourite.publicationId,"advertId":favourite.advertId}));apiFav.favourite.cleanup(favourite.publicationId,favourite.advertId);});apiFav.favourite.toggleRemoveButton(false);};apiFav.revertRemoveAllFavourites=function revertRemoveAllFavourites(){$.each(listToRevert,function(n,favourite){apiFav.favourite.cleanup(favourite.publicationId,favourite.advertId);});apiFav.favourite.toggleRemoveButton(true);};apiFav.getResultHeader=function getResultHeader(numberOfItems){var ads='annonser',text;if(numberOfItems===1){ads='annonse';}
text='Viser <strong>'+numberOfItems+'</strong> '+ads+' i <strong>'+messageProperties.favourites+'</strong>';return text;};apiFav.removeFavouritesButton=function removeFavouritesButton(){var removeButton=document.createElement("a");removeButton.id="apiRemoveAllFavourites";removeButton.appendChild(document.createTextNode(messageProperties.favourites_remove_all));removeButton=document.createDocumentFragment().appendChild(removeButton);return removeButton;};apiFav.apiFavAdmin={initialize:initialize};}());api.genericCarousel=function(speed,pause,numberOfAds,fc,bc,width,domElement){var maxSize=numberOfAds;var currentIndex=0;var value=0;var jobList=domElement.find('#jobList');var jobCount=jobList.find('li').size();var moreJobsLink=domElement.find('#jobslist');domElement.bind("mouseenter",function(){if(speed>0){clearInterval(value);}}).bind("mouseleave",function(){if(speed>0&&jobCount>maxSize){value=setInterval(function(){},4000);clearInterval(value);value=setInterval(function(){scroll();},pause);}});domElement.find('#btnCarouselNext').css("color",fc);domElement.find('#btnCarouselPrev').css("color",fc);domElement.find('h2 > a').css("color",fc);moreJobsLink.css("color",fc);domElement.find('#jobHeader').css("background",bc);domElement.find('#footer').css("background",bc);var height="";if(maxSize>6||maxSize<2){maxSize=2;}
if(maxSize==2){height="twoHeight";}else if(maxSize==3){height="treeHeight";}else if(maxSize==4){height="fourHeight";}else if(maxSize==5){height="fiveHeight";}else{height="sixHeight";}
if(jobCount>=maxSize){jobList.addClass(height);}
if(jobCount<=maxSize){domElement.find('#btnCarouselPrev').hide();domElement.find('#btnCarouselNext').hide();if(width==180){domElement.find('#footer').removeClass("set2linesfooter");moreJobsLink.removeClass("paddingleft180");moreJobsLink.addClass("nobuttos"+width);}else{domElement.find('#footer').addClass("nobuttos"+width);}}
for(var i=0;i<jobCount;i++){if(i>(maxSize-1)){jobList.find('li').eq(i).hide();}}
currentIndex=maxSize-1;function enableButton(){domElement.find('#btnCarouselNext').removeAttr('disabled');domElement.find('#btnCarouselPrev').removeAttr('disabled');}
function disableButton(){domElement.find('#btnCarouselNext').attr("disabled","disabled");domElement.find('#btnCarouselPrev').attr("disabled","disabled");setTimeout(enableButton,500);}
function scroll(){if(currentIndex==maxSize){jobList.append(jobList.find('li').first());currentIndex--;}
jobList.find('li').eq(currentIndex-(maxSize-1)).slideUp(speed);jobList.find('li').eq(currentIndex+1).slideDown(speed);currentIndex++;}
if(speed>0&&jobCount>maxSize){value=setInterval(function(){scroll();},pause);}
domElement.find('#btnCarouselNext').click(function(){disableButton();if(currentIndex==maxSize){jobList.append(jobList.find('li').first());currentIndex--;}
jobList.find('li').eq(currentIndex-(maxSize-1)).slideUp(500);jobList.find('li').eq(currentIndex+1).slideDown(500);currentIndex++;});domElement.find('#btnCarouselPrev').click(function(){disableButton();if(currentIndex==(maxSize-1)){jobList.find('li').first().before(jobList.find('li').last());currentIndex++;}
jobList.find('li').eq(currentIndex).slideUp(500);jobList.find('li').eq(currentIndex-maxSize).slideDown(500);currentIndex--;});domElement.show();};api.countSiteStatJobCarousel=function(nedstat_site){api.sitestat(nedstat_site,'karusell.stilling');};var apiJobcaro_2=apiJobcaro_2||{};(function(){this.Class=function(){};Class.extend=function(h){var g=this.prototype;a=true;var f=new this();a=false;for(var e in h){f[e]=typeof h[e]=="function"&&typeof g[e]=="function"&&b.test(h[e])?(function(i,j){return function(){var l=this._super;this._super=g[i];var k=j.apply(this,arguments);this._super=l;return k}})(e,h[e]):h[e]}
function d(){if(!a&&this.init){this.init.apply(this,arguments)}}
d.prototype=f;d.constructor=d;d.extend=arguments.callee;return d}})();(function(a){a.plugin=function(d,b){a.fn[d]=function(f){var e=Array.prototype.slice.call(arguments,1);return this.each(function(){var caro_2g=a.data(this,d);if(caro_2g){caro_2g[f].apply(caro_2_g,e)}else{caro_2g=a.data(this,d,new b(f,this))}})}}}(jQuery));(function(a){a.livequery=function(b,e,g,f,d){this.selector=b;this.context=e;this.type=g;this.fn=f;this.fn2=d;this.elements=[];this.stopped=false;this.id=a.livequery.queries.push(this)-1;f.$lqguid=f.$lqguid||a.livequery.guid++;if(d){d.$lqguid=d.$lqguid||a.livequery.guid++}
return this};a.livequery.prototype={stop:function(){var b=this;if(this.type){this.elements.unbind(this.type,this.fn)}else{if(this.fn2){this.elements.each(function(d,e){b.fn2.apply(e)})}}
this.elements=[];this.stopped=true},run:function(){if(this.stopped){return}
var e=this;var f=this.elements,d=a(this.selector,this.context),b=d.not(f);this.elements=d;if(this.type){b.bind(this.type,this.fn);if(f.length>0){a.each(f,function(caro_2_g,h){if(a.inArray(h,d)<0){a.event.remove(h,e.type,e.fn)}})}}else{b.each(function(){e.fn.apply(this)});if(this.fn2&&f.length>0){a.each(f,function(caro_2_g,h){if(a.inArray(h,d)<0){e.fn2.apply(h)}})}}}};a.extend(a.livequery,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length){var b=a.livequery.queue.length;while(b--){a.livequery.queries[a.livequery.queue.shift()].run()}}},pause:function(){a.livequery.running=false},play:function(){a.livequery.running=true;a.livequery.run()},registerPlugin:function(){a.each(arguments,function(d,e){if(!a.fn[e]){return}
var b=a.fn[e];a.fn[e]=function(){var f=b.apply(this,arguments);a.livequery.run();return f}})},run:function(b){if(b!=undefined){if(a.inArray(b,a.livequery.queue)<0){a.livequery.queue.push(b)}}else{a.each(a.livequery.queries,function(d){if(a.inArray(d,a.livequery.queue)<0){a.livequery.queue.push(d)}})}if(a.livequery.timeout){clearTimeout(a.livequery.timeout)}
a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(b){if(b!=undefined){a.livequery.queries[b].stop()}else{a.each(a.livequery.queries,function(d){a.livequery.queries[d].stop()})}}});a.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html");a(function(){a.livequery.play()})})(jQuery);(function(b){b(function(){b("div.jobbslider-carousel2").caro_2({loop:true});window.onblur=function(){window.blurred=true};window.onfocus=function(){window.blurred=false};});if(window.addEventListener){window.addEventListener("hashchange",a,false)}
if(document.addEventListener){document.addEventListener("DOMContentLoaded",a,false)}
function a(){var f=window.location.hash.substring(1),d=document.body,e="visrev";if(!d.classList){return}
if(f===e){d.classList.add(e)}else{if(d.classList.contains(e)){d.classList.remove(e)}}}}(jQuery));(function(a){api.Jobcaro_2=Class.extend({options:{itemsVisible:"see_init",slideWidth:false,slideHeight:175,innerContainerSelector:"ul",childSelector:"li",speed:"see_init",autoScroll:"see_init",loop:true,loopMode:"infinite",pauseOnHover:true},current:0,itemsTotal:0,interval:false,outerContainer:false,innerContainer:false,slides:false,gui:{},init:function(b,d){this.options=a.extend({},this.options,b);this.options.speed=$('#jobbslider').data('speed');this.options.autoScroll=$('#jobbslider').data('start');this.options.itemsVisible=$('#jobbslider').data('itemsvisible');this.outerContainer=a(d);this.innerContainer=this.outerContainer.find(this.options.innerContainerSelector);this.slides=this.innerContainer.children(this.options.childSelector);this.itemsTotal=this.slides.length;if(!this.options.slideWidth){this.options.slideWidth=this.slides.eq(0).width()}
if(!this.options.slideHeight){this.options.slideHeight=this.slides.eq(0).height()}
this.buildGUI();if(typeof this.options.autoScroll==="number"){if(this.itemsTotal>this.options.itemsVisible){this.outerContainer.mouseenter(this.mouseover.bind(this));this.outerContainer.mouseleave(this.mouseout.bind(this));this.play()}else{this.gui.next.remove();this.gui.prev.remove()}}},buildGUI:function(){this.outerContainer.css({overflow:"hidden",position:"relative",height:this.options.slideHeight,width:this.options.slideWidth*this.options.itemsVisible});this.innerContainer.css({position:"absolute",left:0,top:0,width:this.options.slideWidth*this.itemsTotal});this.gui.prev=a('<a href="#" class="jobbslider-carousel2-prev jobbslider-arrow-left" title="Forrige">Forrige</a>').click(function(b){b.preventDefault();this.prev()}.bind(this));this.gui.next=a('<a href="#" class="jobbslider-carousel2-next jobbslider-arrow-right" title="Neste">Neste</a>').click(function(b){b.preventDefault();this.next()}.bind(this));this.outerContainer.append(this.gui.prev,this.gui.next)},play:function(){if(this.options.autoScroll){var b=this.options.autoScroll,d=100;this.interval=setInterval(function(){if(window.blurred){return}
b-=d;if(b<=0){b=this.options.autoScroll;this.next()}}.bind(this),d)}},mouseover:function(){this.outerContainer.addClass("jobbslider-hover");if(this.options.autoScroll&&this.options.pauseOnHover){this.stop()}},mouseout:function(){this.outerContainer.removeClass("jobbslider-hover");if(this.options.autoScroll&&this.options.pauseOnHover){this.play()}},stop:function(){clearTimeout(this.interval)},next:function(){var f=this.current+this.options.itemsVisible,d=null,b=null,e=null;if(this.options.loop){switch(this.options.loopMode){case"infinite":if(this.itemsTotal>this.options.itemsVisible){f=this.current+this.options.itemsVisible,b=this.options.childSelector+":lt("+f+")",e=this.innerContainer.find(b);this.innerContainer.append(e.clone());this.innerContainer.css("width",this.innerContainer.children().length*this.options.slideWidth)}
break;case"rewind":if(f>=this.itemsTotal){f=0}
break}}else{if(this.current>=this.itemsTotal-1){return}}
this.show(f,e)},prev:function(){var f=this.current-this.options.itemsVisible,b=this.options.childSelector+":gt("+this.options.itemsVisible+")",d=this.innerContainer.find(b),e=null;if(this.options.loop){switch(this.options.loopMode){case"infinite":e=this.innerContainer.find(this.options.childSelector).slice(this.itemsTotal-this.options.itemsVisible);this.innerContainer.prepend(e.clone());this.innerContainer.css({width:this.innerContainer.children().length*this.options.slideWidth,left:0-(this.options.slideWidth*(this.options.itemsVisible))});f=0;break;case"rewind":if(f<0){f=Math.max(this.options.itemsVisible,this.itemsTotal-this.options.itemsVisible)}
break}}else{if(this.current<=0){return}}
this.show(f,e)},show:function(d,b){var e=this;this.innerContainer.stop();this.innerContainer.animate({left:-(this.options.slideWidth*d)},this.options.speed,"swing",function(){if(b){e.innerContainer.css({left:0,width:e.innerContainer.children().length*e.options.slideWidth});e.current=0;b.remove()}});this.current=d}});a.plugin("caro_2",api.Jobcaro_2)}(jQuery));jobFormMail=function(){$("#applyJob").click(strtDimbg);$("#apiCancelApplyJobButton").click(endDimbg);$("#closeApplyJobBox").click(endDimbg);$("#apiCloseTipConfirmation").click(strtHide);$("#applyJobForm").validate({rules:{fromName:"required",fromEmail:{required:true,email:true}},messages:{fromName:"Dette feltet er påkrevd",fromEmail:{required:"Dette feltet er påkrevd",email:"Vær vennlig å skriv inn en gyldig e-postadresse"}}});$("#apiSendApplyJobButton").click(function(e){e.preventDefault();if($("#applyJobForm").valid()){if($("#jobFormValidator").val()=='human'){var action="/vis/rubrikk/service/classified/sendjobform";var options={type:'POST',url:action,contentType:false,cache:false,processData:false,beforeSend:function(){$("#sendApplyJobMail").addClass("apiPopupWaitingStatus");},success:function(data){if(data.errorMessage==""){$("#sendApplyJobMail").removeClass("apiPopupWaitingStatus");prospectMessageConfirmation('E-post sendt kontakt');endDimbg();}else{$(".apiValidationMessage").html('E-posten ble ikke sendt, noe gikk galt: '+data.result);$("#sendApplyJobMail").removeClass("apiPopupWaitingStatus");}},error:function(request,status,exception){$("#sendApplyJobMail").removeClass("apiPopupWaitingStatus");$(".apiValidationMessage").html('E-posten ble ikke sendt, noe gikk galt.');},timeout:20000,dataType:'json'};$('#applyJobForm').ajaxSubmit(options);}}});}
function endDimbg(){$(".dimbg").css("display","none");$("#applyJobForm")[0].reset();$("label.error").html("");$(".apiValidationMessage").html("");$("#sendApplyJob").css("display","none");$('input[name="jobFormValidator"]').val('robot');delUploadFile();fixBody();}
function strtDimbg(){$("#sendApplyJob").css("display","block");$(".dimbg").css("display","block");fixBody();}
function strtHide(){$("#apiTipAFriendConfirmation").removeClass("apiTipAFriendConfirmationExpanded");}
function fixBody(){if($(".dimbg").css("display")=="block"){$('body').css('overflow','hidden');}else{$('body').css('overflow','');}}
function prospectMessageConfirmation(message){$("#sendApplyJobMail").removeClass("apiPopupWaitingStatus");$("#sendApplyJobMail").removeClass("apiTipAFriendExpanded");$("#apiTipAFriendConfirmation").addClass("apiTipAFriendConfirmationExpanded");$(".apiTipAFriendSentMessage").html(message);endDimbg();window.scrollTo(0,0);}
function addFileUpload(){var table=document.getElementById("uploadFile");var row=table.insertRow(uploadFile.rows.length);var cell1=row.insertCell(0);var cell2=row.insertCell(1);var file=document.createElement('input');file.setAttribute('type','file');file.setAttribute('name','applyJobUploadFile');cell1.appendChild(file);var butt=document.createElement('input');butt.setAttribute('type','button');butt.onclick=function(){delUploadFileRow(this)}
cell2.appendChild(butt);}
function delUploadFileRow(r){var i=r.parentNode.parentNode.rowIndex;document.getElementById("uploadFile").deleteRow(i);}
function delUploadFile(){var elmtTable=document.getElementById('uploadFile');var tableRows=elmtTable.getElementsByTagName('tr');var rowCount=tableRows.length;for(var x=rowCount-1;x>0;x--){elmtTable.deleteRow(tableRows[x]);}}
(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{factory((typeof(jQuery)!='undefined')?jQuery:window.Zepto);}}
(function($){"use strict";var feature={};feature.fileapi=$("<input type='file'/>").get(0).files!==undefined;feature.formdata=window.FormData!==undefined;var hasProp=!!$.fn.prop;$.fn.attr2=function(){if(!hasProp){return this.attr.apply(this,arguments);}
var val=this.prop.apply(this,arguments);if((val&&val.jquery)||typeof val==='string'){return val;}
return this.attr.apply(this,arguments);};$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}
var method,action,url,$form=this;if(typeof options=='function'){options={success:options};}
else if(options===undefined){options={};}
method=options.type||this.attr2('method');action=options.url||this.attr2('action');url=(typeof action==='string')?$.trim(action):'';url=url||window.location.href||'';if(url){url=(url.match(/^([^#]+)/)||[])[1];}
options=$.extend(true,{url:url,success:$.ajaxSettings.success,type:method||$.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},options);var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}
if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}
var traditional=options.traditional;if(traditional===undefined){traditional=$.ajaxSettings.traditional;}
var elements=[];var qx,a=this.formToArray(options.semantic,elements);if(options.data){options.extraData=options.data;qx=$.param(options.data,traditional);}
if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}
this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}
var q=$.param(a,traditional);if(qx){q=(q?(q+'&'+qx):qx);}
if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}
else{options.data=q;}
var callbacks=[];if(options.resetForm){callbacks.push(function(){$form.resetForm();});}
if(options.clearForm){callbacks.push(function(){$form.clearForm(options.includeHidden);});}
if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?'replaceWith':'html';$(options.target)[fn](data).each(oldSuccess,arguments);});}
else if(options.success){callbacks.push(options.success);}
options.success=function(data,status,xhr){var context=options.context||this;for(var i=0,max=callbacks.length;i<max;i++){callbacks[i].apply(context,[data,status,xhr||$form,$form]);}};if(options.error){var oldError=options.error;options.error=function(xhr,status,error){var context=options.context||this;oldError.apply(context,[xhr,status,error,$form]);};}
if(options.complete){var oldComplete=options.complete;options.complete=function(xhr,status){var context=options.context||this;oldComplete.apply(context,[xhr,status,$form]);};}
var fileInputs=$('input[type=file]:enabled',this).filter(function(){return $(this).val()!=='';});var hasFileInputs=fileInputs.length>0;var mp='multipart/form-data';var multipart=($form.attr('enctype')==mp||$form.attr('encoding')==mp);var fileAPI=feature.fileapi&&feature.formdata;log("fileAPI :"+fileAPI);var shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;var jqxhr;if(options.iframe!==false&&(options.iframe||shouldUseFrame)){if(options.closeKeepAlive){$.get(options.closeKeepAlive,function(){jqxhr=fileUploadIframe(a);});}
else{jqxhr=fileUploadIframe(a);}}
else if((hasFileInputs||multipart)&&fileAPI){jqxhr=fileUploadXhr(a);}
else{jqxhr=$.ajax(options);}
$form.removeData('jqxhr').data('jqxhr',jqxhr);for(var k=0;k<elements.length;k++){elements[k]=null;}
this.trigger('form-submit-notify',[this,options]);return this;function deepSerialize(extraData){var serialized=$.param(extraData,options.traditional).split('&');var len=serialized.length;var result=[];var i,part;for(i=0;i<len;i++){serialized[i]=serialized[i].replace(/\+/g,' ');part=serialized[i].split('=');result.push([decodeURIComponent(part[0]),decodeURIComponent(part[1])]);}
return result;}
function fileUploadXhr(a){var formdata=new FormData();for(var i=0;i<a.length;i++){formdata.append(a[i].name,a[i].value);}
if(options.extraData){var serializedData=deepSerialize(options.extraData);for(i=0;i<serializedData.length;i++){if(serializedData[i]){formdata.append(serializedData[i][0],serializedData[i][1]);}}}
options.data=null;var s=$.extend(true,{},$.ajaxSettings,options,{contentType:false,processData:false,cache:false,type:method||'POST'});if(options.uploadProgress){s.xhr=function(){var xhr=$.ajaxSettings.xhr();if(xhr.upload){xhr.upload.addEventListener('progress',function(event){var percent=0;var position=event.loaded||event.position;var total=event.total;if(event.lengthComputable){percent=Math.ceil(position/total*100);}
options.uploadProgress(event,position,total,percent);},false);}
return xhr;};}
s.data=null;var beforeSend=s.beforeSend;s.beforeSend=function(xhr,o){if(options.formData){o.data=options.formData;}
else{o.data=formdata;}
if(beforeSend){beforeSend.call(this,xhr,o);}};return $.ajax(s);}
function fileUploadIframe(a){var form=$form[0],el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle;var deferred=$.Deferred();deferred.abort=function(status){xhr.abort(status);};if(a){for(i=0;i<elements.length;i++){el=$(elements[i]);if(hasProp){el.prop('disabled',false);}
else{el.removeAttr('disabled');}}}
s=$.extend(true,{},$.ajaxSettings,options);s.context=s.context||s;id='jqFormIO'+(new Date().getTime());if(s.iframeTarget){$io=$(s.iframeTarget);n=$io.attr2('name');if(!n){$io.attr2('name',id);}
else{id=n;}}
else{$io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />');$io.css({position:'absolute',top:'-1000px',left:'-1000px'});}
io=$io[0];xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e=(status==='timeout'?'timeout':'aborted');log('aborting upload... '+e);this.aborted=1;try{if(io.contentWindow.document.execCommand){io.contentWindow.document.execCommand('Stop');}}
catch(ignore){}
$io.attr('src',s.iframeSrc);xhr.error=e;if(s.error){s.error.call(s.context,xhr,e,status);}
if(g){$.event.trigger("ajaxError",[xhr,s,e]);}
if(s.complete){s.complete.call(s.context,xhr,e);}}};g=s.global;if(g&&0===$.active++){$.event.trigger("ajaxStart");}
if(g){$.event.trigger("ajaxSend",[xhr,s]);}
if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global){$.active--;}
deferred.reject();return deferred;}
if(xhr.aborted){deferred.reject();return deferred;}
sub=form.clk;if(sub){n=sub.name;if(n&&!sub.disabled){s.extraData=s.extraData||{};s.extraData[n]=sub.value;if(sub.type=="image"){s.extraData[n+'.x']=form.clk_x;s.extraData[n+'.y']=form.clk_y;}}}
var CLIENT_TIMEOUT_ABORT=1;var SERVER_ABORT=2;function getDoc(frame){var doc=null;try{if(frame.contentWindow){doc=frame.contentWindow.document;}}catch(err){log('cannot get iframe.contentWindow document: '+err);}
if(doc){return doc;}
try{doc=frame.contentDocument?frame.contentDocument:frame.document;}catch(err){log('cannot get iframe.contentDocument: '+err);doc=frame.document;}
return doc;}
var csrf_token=$('meta[name=csrf-token]').attr('content');var csrf_param=$('meta[name=csrf-param]').attr('content');if(csrf_param&&csrf_token){s.extraData=s.extraData||{};s.extraData[csrf_param]=csrf_token;}
function doSubmit(){var t=$form.attr2('target'),a=$form.attr2('action'),mp='multipart/form-data',et=$form.attr('enctype')||$form.attr('encoding')||mp;form.setAttribute('target',id);if(!method||/post/i.test(method)){form.setAttribute('method','POST');}
if(a!=s.url){form.setAttribute('action',s.url);}
if(!s.skipEncodingOverride&&(!method||/post/i.test(method))){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}
if(s.timeout){timeoutHandle=setTimeout(function(){timedOut=true;cb(CLIENT_TIMEOUT_ABORT);},s.timeout);}
function checkState(){try{var state=getDoc(io).readyState;log('state = '+state);if(state&&state.toLowerCase()=='uninitialized'){setTimeout(checkState,50);}}
catch(e){log('Server abort: ',e,' (',e.name,')');cb(SERVER_ABORT);if(timeoutHandle){clearTimeout(timeoutHandle);}
timeoutHandle=undefined;}}
var extraInputs=[];try{if(s.extraData){for(var n in s.extraData){if(s.extraData.hasOwnProperty(n)){if($.isPlainObject(s.extraData[n])&&s.extraData[n].hasOwnProperty('name')&&s.extraData[n].hasOwnProperty('value')){extraInputs.push($('<input type="hidden" name="'+s.extraData[n].name+'">').val(s.extraData[n].value).appendTo(form)[0]);}else{extraInputs.push($('<input type="hidden" name="'+n+'">').val(s.extraData[n]).appendTo(form)[0]);}}}}
if(!s.iframeTarget){$io.appendTo('body');}
if(io.attachEvent){io.attachEvent('onload',cb);}
else{io.addEventListener('load',cb,false);}
setTimeout(checkState,15);try{form.submit();}catch(err){var submitFn=document.createElement('form').submit;submitFn.apply(form);}}
finally{form.setAttribute('action',a);form.setAttribute('enctype',et);if(t){form.setAttribute('target',t);}else{$form.removeAttr('target');}
$(extraInputs).remove();}}
if(s.forceSync){doSubmit();}
else{setTimeout(doSubmit,10);}
var data,doc,domCheckCount=50,callbackProcessed;function cb(e){if(xhr.aborted||callbackProcessed){return;}
doc=getDoc(io);if(!doc){log('cannot access response document');e=SERVER_ABORT;}
if(e===CLIENT_TIMEOUT_ABORT&&xhr){xhr.abort('timeout');deferred.reject(xhr,'timeout');return;}
else if(e==SERVER_ABORT&&xhr){xhr.abort('server abort');deferred.reject(xhr,'error','server abort');return;}
if(!doc||doc.location.href==s.iframeSrc){if(!timedOut){return;}}
if(io.detachEvent){io.detachEvent('onload',cb);}
else{io.removeEventListener('load',cb,false);}
var status='success',errMsg;try{if(timedOut){throw'timeout';}
var isXml=s.dataType=='xml'||doc.XMLDocument||$.isXMLDoc(doc);log('isXml='+isXml);if(!isXml&&window.opera&&(doc.body===null||!doc.body.innerHTML)){if(--domCheckCount){log('requeing onLoad callback, DOM not available');setTimeout(cb,250);return;}}
var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;if(isXml){s.dataType='xml';}
xhr.getResponseHeader=function(header){var headers={'content-type':s.dataType};return headers[header.toLowerCase()];};if(docRoot){xhr.status=Number(docRoot.getAttribute('status'))||xhr.status;xhr.statusText=docRoot.getAttribute('statusText')||xhr.statusText;}
var dt=(s.dataType||'').toLowerCase();var scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName('textarea')[0];if(ta){xhr.responseText=ta.value;xhr.status=Number(ta.getAttribute('status'))||xhr.status;xhr.statusText=ta.getAttribute('statusText')||xhr.statusText;}
else if(scr){var pre=doc.getElementsByTagName('pre')[0];var b=doc.getElementsByTagName('body')[0];if(pre){xhr.responseText=pre.textContent?pre.textContent:pre.innerText;}
else if(b){xhr.responseText=b.textContent?b.textContent:b.innerText;}}}
else if(dt=='xml'&&!xhr.responseXML&&xhr.responseText){xhr.responseXML=toXml(xhr.responseText);}
try{data=httpData(xhr,dt,s);}
catch(err){status='parsererror';xhr.error=errMsg=(err||status);}}
catch(err){log('error caught: ',err);status='error';xhr.error=errMsg=(err||status);}
if(xhr.aborted){log('upload aborted');status=null;}
if(xhr.status){status=(xhr.status>=200&&xhr.status<300||xhr.status===304)?'success':'error';}
if(status==='success'){if(s.success){s.success.call(s.context,data,'success',xhr);}
deferred.resolve(xhr.responseText,'success',xhr);if(g){$.event.trigger("ajaxSuccess",[xhr,s]);}}
else if(status){if(errMsg===undefined){errMsg=xhr.statusText;}
if(s.error){s.error.call(s.context,xhr,status,errMsg);}
deferred.reject(xhr,'error',errMsg);if(g){$.event.trigger("ajaxError",[xhr,s,errMsg]);}}
if(g){$.event.trigger("ajaxComplete",[xhr,s]);}
if(g&&!--$.active){$.event.trigger("ajaxStop");}
if(s.complete){s.complete.call(s.context,xhr,status);}
callbackProcessed=true;if(s.timeout){clearTimeout(timeoutHandle);}
setTimeout(function(){if(!s.iframeTarget){$io.remove();}
else{$io.attr('src',s.iframeSrc);}
xhr.responseXML=null;},100);}
var toXml=$.parseXML||function(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}
else{doc=(new DOMParser()).parseFromString(s,'text/xml');}
return(doc&&doc.documentElement&&doc.documentElement.nodeName!='parsererror')?doc:null;};var parseJSON=$.parseJSON||function(s){return window['eval']('('+s+')');};var httpData=function(xhr,type,s){var ct=xhr.getResponseHeader('content-type')||'',xml=type==='xml'||!type&&ct.indexOf('xml')>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==='parsererror'){if($.error){$.error('parsererror');}}
if(s&&s.dataFilter){data=s.dataFilter(data,type);}
if(typeof data==='string'){if(type==='json'||!type&&ct.indexOf('json')>=0){data=parseJSON(data);}else if(type==="script"||!type&&ct.indexOf("javascript")>=0){$.globalEval(data);}}
return data;};return deferred;}};$.fn.ajaxForm=function(options){options=options||{};options.delegation=options.delegation&&$.isFunction($.fn.on);if(!options.delegation&&this.length===0){var o={s:this.selector,c:this.context};if(!$.isReady&&o.s){log('DOM not ready, queuing ajaxForm');$(function(){$(o.s,o.c).ajaxForm(options);});return this;}
log('terminating; zero elements found by selector'+($.isReady?'':' (DOM not ready)'));return this;}
if(options.delegation){$(document).off('submit.form-plugin',this.selector,doAjaxSubmit).off('click.form-plugin',this.selector,captureSubmittingElement).on('submit.form-plugin',this.selector,options,doAjaxSubmit).on('click.form-plugin',this.selector,options,captureSubmittingElement);return this;}
return this.ajaxFormUnbind().bind('submit.form-plugin',options,doAjaxSubmit).bind('click.form-plugin',options,captureSubmittingElement);};function doAjaxSubmit(e){var options=e.data;if(!e.isDefaultPrevented()){e.preventDefault();$(e.target).ajaxSubmit(options);}}
function captureSubmittingElement(e){var target=e.target;var $el=$(target);if(!($el.is("[type=submit],[type=image]"))){var t=$el.closest('[type=submit]');if(t.length===0){return;}
target=t[0];}
var form=this;form.clk=target;if(target.type=='image'){if(e.offsetX!==undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop;}}
setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},100);}
$.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin');};$.fn.formToArray=function(semantic,elements){var a=[];if(this.length===0){return a;}
var form=this[0];var formId=this.attr('id');var els=semantic?form.getElementsByTagName('*'):form.elements;var els2;if(els&&!/MSIE [678]/.test(navigator.userAgent)){els=$(els).get();}
if(formId){els2=$(':input[form='+formId+']').get();if(els2.length){els=(els||[]).concat(els2);}}
if(!els||!els.length){return a;}
var i,j,n,v,el,max,jmax;for(i=0,max=els.length;i<max;i++){el=els[i];n=el.name;if(!n||el.disabled){continue;}
if(semantic&&form.clk&&el.type=="image"){if(form.clk==el){a.push({name:n,value:$(el).val(),type:el.type});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}
continue;}
v=$.fieldValue(el,true);if(v&&v.constructor==Array){if(elements){elements.push(el);}
for(j=0,jmax=v.length;j<jmax;j++){a.push({name:n,value:v[j]});}}
else if(feature.fileapi&&el.type=='file'){if(elements){elements.push(el);}
var files=el.files;if(files.length){for(j=0;j<files.length;j++){a.push({name:n,value:files[j],type:el.type});}}
else{a.push({name:n,value:'',type:el.type});}}
else if(v!==null&&typeof v!='undefined'){if(elements){elements.push(el);}
a.push({name:n,value:v,type:el.type,required:el.required});}}
if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name;if(n&&!input.disabled&&input.type=='image'){a.push({name:n,value:$input.val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}
return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n){return;}
var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++){a.push({name:n,value:v[i]});}}
else if(v!==null&&typeof v!='undefined'){a.push({name:this.name,value:v});}});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length)){continue;}
if(v.constructor==Array){$.merge(val,v);}
else{val.push(v);}}
return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(successful===undefined){successful=true;}
if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1)){return null;}
if(tag=='select'){var index=el.selectedIndex;if(index<0){return null;}
var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v){v=(op.attributes&&op.attributes.value&&!(op.attributes.value.specified))?op.text:op.value;}
if(one){return v;}
a.push(v);}}
return a;}
return $(el).val();};$.fn.clearForm=function(includeHidden){return this.each(function(){$('input,select,textarea',this).clearFields(includeHidden);});};$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(re.test(t)||tag=='textarea'){this.value='';}
else if(t=='checkbox'||t=='radio'){this.checked=false;}
else if(tag=='select'){this.selectedIndex=-1;}
else if(t=="file"){if(/MSIE/.test(navigator.userAgent)){$(this).replaceWith($(this).clone(true));}else{$(this).val('');}}
else if(includeHidden){if((includeHidden===true&&/hidden/.test(t))||(typeof includeHidden=='string'&&$(this).is(includeHidden))){this.value='';}}});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType)){this.reset();}});};$.fn.enable=function(b){if(b===undefined){b=true;}
return this.each(function(){this.disabled=!b;});};$.fn.selected=function(select){if(select===undefined){select=true;}
return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio'){this.checked=select;}
else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}
this.selected=select;}});};$.fn.ajaxSubmit.debug=false;function log(){if(!$.fn.ajaxSubmit.debug){return;}
var msg='[jquery.form] '+Array.prototype.join.call(arguments,'');if(window.console&&window.console.log){window.console.log(msg);}
else if(window.opera&&window.opera.postError){window.opera.postError(msg);}}}));var api=api||{};api.job_related_prospect=function(prospectId,prospectCategory,publicationId,gfxUrl){$.ajaxSetup({async:false});var properties={currentId:prospectId,currentCategory:prospectCategory||"",publicationId:publicationId,gfxUrl:gfxUrl};var parentElementRelated;api.job_related_prospect.prototype.setCorrectId(properties,function(nextProspectId){var getProspectUrl="/API/iris/gagarin/prospect.json?ids="+nextProspectId;jqxhr2=$.getJSON(getProspectUrl,function(prospectObj){parentElementRelated=document.getElementsByClassName('apiRelatedJobProspect')[0];api.job_related_prospect.prototype.addFragment(parentElementRelated,api.job_related_prospect.prototype.createFragment(document,prospectObj,properties.gfxUrl));}).fail(function(){console.log("Unable to fetch next prospect data");document.getElementsByClassName('apiRelatedJobProspect')[0].style.display='none';});},function(){console.log("Failing when getting next prospect data ?? or something else");});};api.job_related_prospect.prototype.setCorrectId=function(properties,onSuccess,onError){if(properties){var params='?catId='+properties.currentCategory+'&transId=11&localGeo=true&rows=100',searchUrl,fullSearchUrl='/API/iris/search/ids/publication/'+properties.publicationId+'.json?localGeo=true&rows=100&transId=11';try{params=!!sessionStorage.getItem('classified_search_parameter_jobb')?sessionStorage.getItem('classified_search_parameter_jobb'):params;}
catch(e){}
searchUrl='/API/iris/search/ids/publication/'+properties.publicationId+'.json'+params;var listOfIds,nextId;api.job_related_prospect.prototype.getListOfIds(searchUrl,function(result){if(result){listOfIds=result;if(listOfIds.length<2){api.job_related_prospect.prototype.getListOfIds(fullSearchUrl,function(fullresult){if(fullresult){listOfIds=fullresult;nextId=api.job_related_prospect.prototype.getNextId(properties.currentId,listOfIds);}},function(){});}else{nextId=api.job_related_prospect.prototype.getNextId(properties.currentId,listOfIds);}}},function(){});onSuccess.call(null,nextId);}else{onError.call(null);}};api.job_related_prospect.prototype.getListOfIds=function(searchParams,onSuccess,onError){if(searchParams){var sessionListOfIds;try{sessionListOfIds=sessionStorage.getItem("classified_related_item_list");}
catch(e){sessionListOfIds=null;}
if(sessionListOfIds!==null){sessionListOfIds=JSON.parse(sessionListOfIds);}else{var test=$.ajax({url:searchParams,dataType:'json',error:function(){},success:function(data){sessionListOfIds=data.ids;if(sessionListOfIds.length<2){return}else{try{sessionStorage.setItem("classified_related_item_list",JSON.stringify(data.ids));}
catch(e){}}}});}
onSuccess.call(null,sessionListOfIds);}else{onError.call(null);}};api.job_related_prospect.prototype.getNextId=function(element,array){var idx=array.lastIndexOf(element);return!!array[idx+1]?array[idx+1]:array[0];};api.job_related_prospect.prototype.addFragment=function(parentElement,childElement){if(!parentElement){return null;}
var elementFragment;elementFragment=document.createDocumentFragment();elementFragment.appendChild(childElement);parentElement.appendChild(elementFragment);return parentElement;};api.job_related_prospect.prototype.createFragment=function(document,prospectObject,gfxUrl){var containerEl,htmlFragment,link,logo,heading,imgContainer,figure,figcaption,position,employer,area;logo=document.createElement('img');logo.src=(!!prospectObject.prospects[0].logo)?prospectObject.obscuraUrl+'/API/image/r1/zett/298x120r/'+prospectObject.timestamp+'/'+prospectObject.prospects[0].logo:gfxUrl+'/resources/web/gfx/classified/carousel/job.svg';logo.alt='Logo';logo.className=(!!prospectObject.prospects[0].logo)?'':'noLogo';heading=document.createElement('h2');heading.appendChild(document.createTextNode('Se stilling'));figure=document.createElement('figure');position=document.createElement('div');position.className='positiontitle';position.appendChild(document.createTextNode(prospectObject.prospects[0].positiontitle));imgContainer=document.createElement('div');imgContainer.className='relatedImageContainer';imgContainer.appendChild(logo);imgContainer.appendChild(position);employer=document.createElement('p');employer.className='relatedProspectEmployer';employer.appendChild(document.createTextNode(prospectObject.prospects[0].employer));area=document.createElement('p');area.className='relatedProspectMunicipality';area.appendChild(document.createTextNode(prospectObject.prospects[0].municipality));figcaption=document.createElement('figcaption');figcaption.appendChild(employer);figcaption.appendChild(area);link=document.createElement("a");link.href='/vis/rubrikk/jobbprospekt/'+prospectObject.prospects[0].id+'.html';link.className='apiRelatedJobProspectLink';link.addEventListener('click',function(ev){apiNedStat.onclick(this,apiNedstatConfig,'a_click_area=classified.related.jobs');});figure.appendChild(imgContainer);figure.appendChild(figcaption);link.appendChild(heading);link.appendChild(figure);return link};function CarDealers(numberOfIndexes){myCarDealers=this;this.numberOfVisibleCars=9;this.refreshInterval;this.duration=15000;this.currentIndex=0;this.numberOfIndexes=numberOfIndexes;}
CarDealers.prototype.getNextIndexes=function(numberOfIndexes){var indexes=new Array();for(i=0;i<numberOfIndexes;i++){indexes.push(this.currentIndex++);if(this.currentIndex>=this.numberOfIndexes){this.currentIndex=0;}}
return indexes;};CarDealers.prototype.toggleCars=function(numberOfVisibleCars){$('#carDealers').find('li').hide();var indexes=this.getNextIndexes(numberOfVisibleCars);var sortedIndexes=indexes.sort(function(a,b){return a-b});for(var i=0;i<sortedIndexes.length;i++){$('#carDealers').find('li').eq(sortedIndexes[i]).fadeIn();$('#carDealers').find('li').eq(sortedIndexes[i]).find('.detailContainer').removeClass('top middle bottom left center right');var positions=this.getCarDetailsPosition(i);for(var x=0;x<positions.length;x++){$('#carDealers').find('li').eq(sortedIndexes[i]).find('.detailContainer').addClass(positions[x]);}}}
CarDealers.prototype.getCarDetailsPosition=function(index){var positions=new Array();if(parseInt(index/3)===0){positions.push('top');}
if(parseInt(index/3)===1){positions.push('middle');}
if(parseInt(index/3)===2){positions.push('bottom');}
if(index%3===0){positions.push('left');}
if(index%3===1){positions.push('center');}
if(index%3===2){positions.push('right');}
return positions;}
CarDealers.prototype.startTimer=function(){this.refreshInterval=setInterval('myCarDealers.toggleCars(myCarDealers.numberOfVisibleCars)',myCarDealers.duration);}
CarDealers.prototype.stopTimer=function(){clearInterval(this.refreshInterval);}
function carDealersInit(){var carDealerContainerExists=$('#carDealers').length;if(carDealerContainerExists>0){var numberOfCars=$('#carDealers').find('li').size();if(numberOfCars>0){var myCarDealers=new CarDealers(numberOfCars);myCarDealers.toggleCars(myCarDealers.numberOfVisibleCars);myCarDealers.startTimer();$('#toggleCars').click(function(){myCarDealers.toggleCars(myCarDealers.numberOfVisibleCars);myCarDealers.stopTimer();myCarDealers.startTimer();});$('#carDealers').find('li').mouseenter(function(){$(this).find('.detailContainer').fadeIn('slow');myCarDealers.stopTimer();}).mouseleave(function(){$(this).find('.detailContainer').hide();myCarDealers.startTimer();});}}}
var apiPropertyCarousel=apiPropertyCarousel||{};(function(){var publicationId,carouselElements,miscLabels,imageURL,slider,pages,dots,visibleThumbs,buttonColor,fontColor,auto,protocol=location.protocol,app=apilib(),html=app.html(['div','p','span','a','img','figure','figcaption','h3','em','ul','li']),siteUrl=protocol+"//"+location.host;apiPropertyCarousel.component={initialize:function initialize(data){imageURL=data.imageURL;publicationId=data.publicationId;buttonColor=data.buttonColor?data.buttonColor:"";fontColor=data.fontColor?data.fontColor:"";auto=data.auto?data.auto:"";},pseudoCssFallback:function pseudoCssFallback(){try{$("#apiNextSlide:before");return false;}catch(e){return true;}},customCss:function customCss(){var cssArray=new Array;if(apiPropertyCarousel.component.pseudoCssFallback()){var apiPrevSlide=$("#apiPrevSlide");var apiNextSlide=$("#apiNextSlide");apiPrevSlide.text(' ‹');apiNextSlide.text(' ›');apiPrevSlide.addClass("arrowFallback");apiNextSlide.addClass("arrowFallback");}
if(buttonColor){var buttonRGB=apiPropertyCarousel.component.getRGB(buttonColor);cssArray.push(".api .apiPropertyCarousel button.apiClCarButton {background: #"+buttonColor+";}");cssArray.push(".api .apiPropertyCarousel .apiClassifiedCarPane figure figcaption p {background: #"+buttonColor+";}");cssArray.push(".api .apiPropertyCarousel .apiClassifiedCarPane figure figcaption p {background: rgba("+buttonRGB+", 0.8);}");}
if(fontColor){cssArray.push(".api .apiPropertyCarousel #apiPrevSlide:before {border-right-color: #"+fontColor+";}");cssArray.push(".api .apiPropertyCarousel #apiNextSlide:before {border-left-color: #"+fontColor+";}");cssArray.push(".api .apiPropertyCarousel button.arrowFallback {color : #"+fontColor+";}");cssArray.push(".api .apiPropertyCarousel .apiClassifiedCarPane figure figcaption p {color : #"+fontColor+";}");}
if(cssArray.length>0){apiPropertyCarousel.component.addCss(cssArray.join(" "));}},addCss:function(cssCode){var styleElement=document.createElement("style");styleElement.type="text/css";if(styleElement.styleSheet){styleElement.styleSheet.cssText=cssCode;}else{styleElement.appendChild(document.createTextNode(cssCode));}
document.getElementsByTagName("head")[0].appendChild(styleElement);},getRGB:function getRGB(color){cutHex=function cutHext(h){return(h.charAt(0)=="#")?h.substring(1,7):h;};hextToR=function hexToR(num){return parseInt(num.substring(0,2),16);};hextToG=function hexToG(num){return parseInt(num.substring(2,4),16);};hextToB=function hexToB(num){return parseInt(num.substring(4,6),16)};var rgb=new Array,num=cutHex(color);rgb.push(hextToR(num));rgb.push(hextToG(num));rgb.push(hextToB(num));return rgb.join(",");},handleCarousel:function(){var sectionEls=document.getElementsByTagName('section');slider=new Swipe(sectionEls[sectionEls.length-1],{setupCallback:function(e,pos,slides,carouselElements){visibleThumbs=slides;pages=Math.ceil(carouselElements/visibleThumbs);html.register('progressTemplate',function(tag,varObj){var s=tag.span({id:'position'});var k='&bull;';var e;for(var i=0;i<pages;i+=1){if(i===0){e=tag.em({cls:'on'},k,true);}else{e=tag.em({},k,true);}
s.appendChild(e);}
return s;});html.renderAndReplace('progressTemplate',pages,document.getElementById('position'));dots=document.getElementById('position').getElementsByTagName('em');},transitionCallback:function(e,index){var page=Math.floor(index/visibleThumbs);var i=dots.length;while(i--){dots[i].className='';}
dots[page].className='on';},speed:200,auto:auto,thumbsEl:'a'});var nextbutton=document.getElementById("apiNextSlide");var prevbutton=document.getElementById("apiPrevSlide");nextbutton.onclick=function(){slider.next();};prevbutton.onclick=function(){slider.prev();};apiPropertyCarousel.component.customCss();},buildZettImage:function buildZettImage(imageId){var result="http://img.zett.no/orig/orig/ID";if(imageId!=null){result=result.replace('ID',imageId);}
return result;},renderList:function renderList(){var url="/API/iris/realestatecarousel/"+publicationId+".json";$.getJSON(url,function(dataWrapper){var el=document.getElementById('apiRealEstateCarouselContent');var data=dataWrapper.prospects;carouselElements=data.length;html.register('itemTemplate',function(tag,varObj){var priceToShow,d,prospectUrl,img,titleLength,title,prospectImage;priceToShow=apiPropertyCarousel.list.getPriceToShow(varObj);prospectImage=(!!varObj.imageId)?imageURL+"/external/230x153unifiedrc/"+encodeURIComponent(apiPropertyCarousel.component.buildZettImage(varObj.imageId)):'';prospectUrl=siteUrl+'/vis/rubrikk/eiendomsprospekt/'+varObj.id+'.html';titleLength=28;var postLocation=varObj.postLocation;var headerString=apiPropertyCarousel.list.shorten(varObj.streetAddress,titleLength-postLocation.length)+", "+varObj.postLocation;title=tag.h3({cls:'title'},headerString,true);var figure=tag.figure({});var imgContainer=tag.div({cls:"apiImageContainer"});var figCaption=tag.figcaption({});figCaption.appendChild(title);figCaption.appendChild(tag.p({},priceToShow));img=(!!prospectImage)?tag.img({src:prospectImage,cls:'apiImage',width:'230',height:'153'}):'';figure.appendChild(imgContainer);figure.appendChild(figCaption);var propertype=tag.h3({},varObj.type);figCaption.appendChild(propertype);imgContainer.appendChild(img);d=(!!varObj.gone)?'':tag.a({cls:'slides',target:'_parent',href:(!!varObj.gone)?'#':prospectUrl});d.appendChild(figure);return d;});$.each(data,function(i,item){switch(item.soldflag){case false:html.renderAndAppend('itemTemplate',item,el);break;default:break;}});apiPropertyCarousel.component.handleCarousel();})}};apiPropertyCarousel.list={shorten:function shorten(text,maxLength){var result=text;if(maxLength<text.length){result=text.substr(0,maxLength-3)+'...';}
return result;},periodFormatted:function periodFormatted(amount){var delimiter=".",minus='',parsedAsInt=parseInt(amount),n,a;if(isNaN(parsedAsInt)){return'';}
if(parsedAsInt<0){minus='-';}
n=new String(Math.abs(parsedAsInt));a=[];while(n.length>3){var nn=n.substr(n.length-3);a.unshift(nn);n=n.substr(0,n.length-3);}
if(n.length>0){a.unshift(n);}
return minus+a.join(delimiter);},getPriceToShow:function getPriceToShow(varObj){var priceToShow,monthlyrent,price,pricefrom,priceto,yearlyrent,dailyrent,weeklyrent;monthlyrent=(!!varObj.monthlyrent)?this.periodFormatted(varObj.monthlyrent)+',- /mnd':'';price=(!!varObj.price)?this.periodFormatted(varObj.price)+',- ':'';pricefrom=(!!varObj.pricefrom)?"fra "+this.periodFormatted(varObj.pricefrom)+',- ':'';priceto=(!!varObj.priceto)?" til "+this.periodFormatted(varObj.priceto)+',- ':'';yearlyrent=(!!varObj.yearlyrent)?this.periodFormatted(varObj.yearlyrent)+',- /år':dailyrent=(!!varObj.dailyrent)?this.periodFormatted(varObj.dailyrent)+',- /dag ':'';weeklyrent=(!!varObj.weeklyrent)?this.periodFormatted(varObj.weeklyrent)+',- /uke':'';switch(varObj.transactionType){case'FOR_RENT':priceToShow=(!!monthlyrent)?monthlyrent:(!!price)?price:(!!yearlyrent)?yearlyrent:(!!dailyrent)?dailyrent:(!!weeklyrent)?weeklyrent:'--';break;case'WANTED_RENT':priceToShow=(!!monthlyrent)?monthlyrent:(!!price)?price:(!!yearlyrent)?yearlyrent:(!!dailyrent)?dailyrent:(!!weeklyrent)?weeklyrent:'--';break;case'FOR_SALE':priceToShow=(!!pricefrom)?pricefrom+priceto:(!!price)?price:'--';break;case'WANTED_BUY':priceToShow=(!!price)?price:'--';break;case'GIVE_AWAY':priceToShow=miscLabels.give_away;break;case'LOST_AND_FOUND':priceToShow=miscLabels.lost_and_found;break;default:priceToShow=(!!price)?price:'--';}
return priceToShow;}};}());function realestateBrokers(){var brokerContainerExists=$('#brokerContainer').length;if(brokerContainerExists>0){var brokerCount=$('#brokerList').find('li').size();var currentIndex=0;var maxSize=4;if(brokerCount>=maxSize){$('#brokerList').addClass("fourHeight");}
for(var i=0;i<brokerCount;i++){if(i>(maxSize-1)){$('#brokerList').find('li').eq(i).hide();}}
if(currentIndex<=(maxSize-1)){$('#btnBrokerPrev').hide();}
if(brokerCount<=(maxSize)){$('#btnBrokerNext').hide();}
currentIndex=maxSize-1;$('#btnBrokerNext').click(function(){if((currentIndex+1)<brokerCount){$('#btnBrokerPrev').show();$('#brokerList').find('li').eq(currentIndex-(maxSize-1)).slideUp(500);currentIndex++;$('#brokerList').find('li').eq(currentIndex).slideDown(500);if(brokerCount==(currentIndex+1)){$('#btnBrokerNext').hide();}}});$('#btnBrokerPrev').click(function(){if(currentIndex>=maxSize){$('#btnBrokerNext').show();$('#brokerList').find('li').eq(currentIndex).slideUp(500);$('#brokerList').find('li').eq(currentIndex-maxSize).slideDown(500);currentIndex--;if(currentIndex<=(maxSize-1)){$('#btnBrokerPrev').hide();}}});}}
var apiRealEstateCarousel=apiRealEstateCarousel||{};(function(){var publicationId,carouselElements,miscLabels,imageURL,slider,pages,dots,visibleThumbs,buttonColor,fontColor,protocol=location.protocol,app=apilib(),html=app.html(['div','p','span','a','img','figure','figcaption','h3','em','ul','li']),siteUrl=protocol+"//"+location.host;apiRealEstateCarousel.component={initialize:function initialize(data){imageURL=data.imageURL;publicationId=data.publicationId;buttonColor=data.buttonColor?data.buttonColor:"";fontColor=data.fontColor?data.fontColor:"";},pseudoCssFallback:function pseudoCssFallback(){try{$("#apiNextSlide:before");return false;}catch(e){return true;}},customCss:function customCss(){var cssArray=new Array;if(apiRealEstateCarousel.component.pseudoCssFallback()){var apiPrevSlide=$("#apiPrevSlide");var apiNextSlide=$("#apiNextSlide");apiPrevSlide.text(' ‹');apiNextSlide.text(' ›');apiPrevSlide.addClass("arrowFallback");apiNextSlide.addClass("arrowFallback");}
if(buttonColor){var buttonRGB=apiRealEstateCarousel.component.getRGB(buttonColor);cssArray.push(".api .apiRealEstateCarousel button.apiClCarButton {background: #"+buttonColor+";}");cssArray.push(".api .apiRealEstateCarousel .apiClassifiedCarPane figure figcaption p {background: #"+buttonColor+";}");cssArray.push(".api .apiRealEstateCarousel .apiClassifiedCarPane figure figcaption p {background: rgba("+buttonRGB+", 0.8);}");}
if(fontColor){cssArray.push(".api .apiRealEstateCarousel #apiPrevSlide:before {border-right-color: #"+fontColor+";}");cssArray.push(".api .apiRealEstateCarousel #apiNextSlide:before {border-left-color: #"+fontColor+";}");cssArray.push(".api .apiRealEstateCarousel button.arrowFallback {color : #"+fontColor+";}");cssArray.push(".api .apiRealEstateCarousel .apiClassifiedCarPane figure figcaption p {color : #"+fontColor+";}");}
if(cssArray.length>0){apiRealEstateCarousel.component.addCss(cssArray.join(" "));}},addCss:function(cssCode){var styleElement=document.createElement("style");styleElement.type="text/css";if(styleElement.styleSheet){styleElement.styleSheet.cssText=cssCode;}else{styleElement.appendChild(document.createTextNode(cssCode));}
document.getElementsByTagName("head")[0].appendChild(styleElement);},getRGB:function getRGB(color){cutHex=function cutHext(h){return(h.charAt(0)=="#")?h.substring(1,7):h;};hextToR=function hexToR(num){return parseInt(num.substring(0,2),16);};hextToG=function hexToG(num){return parseInt(num.substring(2,4),16);};hextToB=function hexToB(num){return parseInt(num.substring(4,6),16)};var rgb=new Array,num=cutHex(color);rgb.push(hextToR(num));rgb.push(hextToG(num));rgb.push(hextToB(num));return rgb.join(",");},handleCarousel:function(){var sectionEls=document.getElementsByTagName('section');slider=new Swipe(sectionEls[sectionEls.length-1],{setupCallback:function(e,pos,slides,carouselElements){visibleThumbs=slides;pages=Math.ceil(carouselElements/visibleThumbs);html.register('progressTemplate',function(tag,varObj){var s=tag.span({id:'position'});var k='&bull;';var e;for(var i=0;i<pages;i+=1){if(i===0){e=tag.em({cls:'on'},k,true);}else{e=tag.em({},k,true);}
s.appendChild(e);}
return s;});html.renderAndReplace('progressTemplate',pages,document.getElementById('position'));dots=document.getElementById('position').getElementsByTagName('em');},transitionCallback:function(e,index){var page=Math.floor(index/visibleThumbs);var i=dots.length;while(i--){dots[i].className='';}
dots[page].className='on';},speed:200,thumbsEl:'a'});var nextbutton=document.getElementById("apiNextSlide");var prevbutton=document.getElementById("apiPrevSlide");nextbutton.onclick=function(){slider.next();};prevbutton.onclick=function(){slider.prev();};apiRealEstateCarousel.component.customCss();},buildZettImage:function buildZettImage(imageId){var result="http://img.zett.no/orig/orig/ID";if(imageId!=null){result=result.replace('ID',imageId);}
return result;},renderList:function renderList(){var url="/API/iris/realestatecarousel/"+publicationId+".json";$.getJSON(url,function(dataWrapper){var el=document.getElementById('apiRealEstateCarouselContent');var data=dataWrapper.prospects;carouselElements=data.length;html.register('itemTemplate',function(tag,varObj){var priceToShow,d,prospectUrl,img,titleLength,title,prospectImage;priceToShow=apiRealEstateCarousel.list.getPriceToShow(varObj);prospectImage=(!!varObj.imageId)?imageURL+"/external/230x153unifiedrc/"+encodeURIComponent(apiRealEstateCarousel.component.buildZettImage(varObj.imageId)):'';prospectUrl=siteUrl+'/vis/rubrikk/eiendomsprospekt/'+varObj.id+'.html';titleLength=28;var postLocation=varObj.postLocation;var headerString=apiRealEstateCarousel.list.shorten(varObj.streetAddress,titleLength-postLocation.length)+", "+varObj.postLocation;title=tag.h3({cls:'title'},headerString,true);var figure=tag.figure({});var imgContainer=tag.div({cls:"apiImageContainer"});var figCaption=tag.figcaption({});figCaption.appendChild(title);figCaption.appendChild(tag.p({},priceToShow));img=(!!prospectImage)?tag.img({src:prospectImage,cls:'apiImage',width:'230',height:'153'}):'';figure.appendChild(imgContainer);figure.appendChild(figCaption);var propertype=tag.h3({},varObj.type);figCaption.appendChild(propertype);imgContainer.appendChild(img);d=(!!varObj.gone)?'':tag.a({cls:'slides',target:'_parent',href:(!!varObj.gone)?'#':prospectUrl});d.appendChild(figure);return d;});$.each(data,function(i,item){switch(item.soldflag){case false:html.renderAndAppend('itemTemplate',item,el);break;default:break;}});apiRealEstateCarousel.component.handleCarousel();})}};apiRealEstateCarousel.list={shorten:function shorten(text,maxLength){var result=text;if(maxLength<text.length){result=text.substr(0,maxLength-3)+'...';}
return result;},periodFormatted:function periodFormatted(amount){var delimiter=".",minus='',parsedAsInt=parseInt(amount),n,a;if(isNaN(parsedAsInt)){return'';}
if(parsedAsInt<0){minus='-';}
n=new String(Math.abs(parsedAsInt));a=[];while(n.length>3){var nn=n.substr(n.length-3);a.unshift(nn);n=n.substr(0,n.length-3);}
if(n.length>0){a.unshift(n);}
return minus+a.join(delimiter);},getPriceToShow:function getPriceToShow(varObj){var priceToShow,monthlyrent,price,pricefrom,priceto,yearlyrent,dailyrent,weeklyrent;monthlyrent=(!!varObj.monthlyrent)?this.periodFormatted(varObj.monthlyrent)+',- /mnd':'';price=(!!varObj.price)?this.periodFormatted(varObj.price)+',- ':'';pricefrom=(!!varObj.pricefrom)?"fra "+this.periodFormatted(varObj.pricefrom)+',- ':'';priceto=(!!varObj.priceto)?" til "+this.periodFormatted(varObj.priceto)+',- ':'';yearlyrent=(!!varObj.yearlyrent)?this.periodFormatted(varObj.yearlyrent)+',- /år':dailyrent=(!!varObj.dailyrent)?this.periodFormatted(varObj.dailyrent)+',- /dag ':'';weeklyrent=(!!varObj.weeklyrent)?this.periodFormatted(varObj.weeklyrent)+',- /uke':'';switch(varObj.transactionType){case'FOR_RENT':priceToShow=(!!monthlyrent)?monthlyrent:(!!price)?price:(!!yearlyrent)?yearlyrent:(!!dailyrent)?dailyrent:(!!weeklyrent)?weeklyrent:'--';break;case'WANTED_RENT':priceToShow=(!!monthlyrent)?monthlyrent:(!!price)?price:(!!yearlyrent)?yearlyrent:(!!dailyrent)?dailyrent:(!!weeklyrent)?weeklyrent:'--';break;case'FOR_SALE':priceToShow=(!!pricefrom)?pricefrom+priceto:(!!price)?price:'--';break;case'WANTED_BUY':priceToShow=(!!price)?price:'--';break;case'GIVE_AWAY':priceToShow=miscLabels.give_away;break;case'LOST_AND_FOUND':priceToShow=miscLabels.lost_and_found;break;default:priceToShow=(!!price)?price:'--';}
return priceToShow;}};}());api.toggleNavigators={hideId:function private_method(id){document.getElementById(id).style.display="none";},showId:function private_method(id){document.getElementById(id).style.display="block";},showForSale:function(){this.showId("propertysearch_0");this.hideId("propertysearch_1");document.getElementById("realEstateForSale_0").checked="true";},showForRent:function(){this.hideId("propertysearch_0");this.showId("propertysearch_1");document.getElementById("realEstateForRent_1").checked="true";},removeGeoAll:function(number){document.getElementById("geo_select_all_"+number).removeAttribute("name");document.getElementById("geo_select_all_"+number).removeAttribute("value");},addGeoAll:function(number){document.getElementById("geo_select_all_"+number).name="municipality";document.getElementById("geo_select_all_"+number).value="";}}
api.featureHomes=function(width,appVersion){$('#featuredList').css({"width":2*width});$('.logowidth').css({"width":width-20});var maxSize=1;var currentIndex=0;var featuredCount=$('#featuredList').find('li').size();if(featuredCount<=0){$('.footer').hide();$('#btnFeaturedsPrev').hide();}else if(featuredCount==1){$('.footer').hide();}else{$('#btnFeaturedsPrev').hide();}
for(var i=0;i<featuredCount;i++){if(i>(maxSize-1)){$('#featuredList').find('li').eq(i).hide();}}
function enableButton(){$('#btnFeaturedsNext').removeAttr('disabled');$('#btnFeaturedsPrev').removeAttr('disabled');}
function disableButton(){$('#btnFeaturedsNext').attr("disabled","disabled");$('#btnFeaturedsPrev').attr("disabled","disabled");setTimeout(enableButton,650);}
function fixedIE7AnimationNext(){$('#featuredList').find('li').eq(currentIndex-1).addClass('hidden');$('#featuredList').find('li').eq(currentIndex).addClass('visible');}
function fixIE7AnimationNext(){$('#featuredList').find('li').eq(currentIndex-1).removeClass('visible');$('#featuredList').find('li').eq(currentIndex).removeClass('hidden');setTimeout(fixedIE7AnimationNext,450);}
function fixedIE7AnimationPrevious(){$('#featuredList').find('li').eq(currentIndex).addClass('visible');$('#featuredList').find('li').eq(currentIndex+1).addClass('hidden');}
function fixIE7AnimationPrevious(){$('#featuredList').find('li').eq(currentIndex).removeClass('hidden');$('#featuredList').find('li').eq(currentIndex+1).removeClass('visible');setTimeout(fixedIE7AnimationPrevious,450);}
$('#btnFeaturedsNext').click(function(){disableButton();if(currentIndex==1){$('#featuredList').append($('#featuredList').find('li').first());currentIndex--;}
$('#featuredList').find('li').eq(currentIndex-1).hide();$('#featuredList').find('li').eq(currentIndex+1).show();$('#featuredList').find('li').eq(currentIndex+1).css({"left":"0px"});$('#featuredList').find('li').eq(currentIndex+1).animate({"left":"-"+(width-3)+"px"},"slow");$('#featuredList').find('li').eq(currentIndex).css({"left":"0px"});$('#featuredList').find('li').eq(currentIndex).animate({"left":"-"+(width-1)+"px"},"slow");currentIndex++;if(appVersion.match(" MSIE 7.0")!=null){fixIE7AnimationNext();}
if($('#featuredList').find('li').eq(currentIndex).attr("class")==(featuredCount-1)){$('#btnFeaturedsNext').hide();$('#btnFeaturedsPrev').show();}else{$('#btnFeaturedsPrev').show();}});$('#btnFeaturedsPrev').click(function(){disableButton();if(currentIndex==0){$('#featuredList').find('li').first().before($('#featuredList').find('li').last());currentIndex++;}
$('#featuredList').find('li').eq(currentIndex+1).hide();$('#featuredList').find('li').eq(currentIndex-1).show();$('#featuredList').find('li').eq(currentIndex).css({"left":"-"+(width-3)+"px"});$('#featuredList').find('li').eq(currentIndex).animate({"left":"0px"},"slow");$('#featuredList').find('li').eq(currentIndex-maxSize).css({"left":"-"+(width-1)+"px"});$('#featuredList').find('li').eq(currentIndex-maxSize).animate({"left":"0px"},"slow");currentIndex--;if(appVersion.match(" MSIE 7.0")!=null){fixIE7AnimationPrevious();}
if($('#featuredList').find('li').eq(currentIndex).attr("class")==0){$('#btnFeaturedsPrev').hide();$('#btnFeaturedsNext').show();}else{$('#btnFeaturedsNext').show();}});};var apiMap={};apiMap.updateMap=function(){apiMap.clearGraphics();apiMap.removeOverlay();apiMap.showLoadingMessage();var queryParameters=dojo.hash();$.getJSON("/vis/rubrikk/service/classified/mapsearch.json?"+queryParameters,function(data){api_RealestateMapViewComponent_searchData=data;apiMap.updateResultHeader();apiMap.updateTab();apiMap.updateLocalGeoSwitch();apiMap.updateFacets();apiMap.updateFacetChoices();apiMap.stickyMapRepositionOnClick();if(apiMap.shouldUpdateExtent()){apiMap.updateExtent();}
apiMap.drawPoints();apiMap.updateCurrentParameters();});};apiMap.updateCurrentParameters=function(){currentParameters=dojo.hash();};apiMap.shouldUpdateExtent=function(){var geographyParameters=['norGeo','foreignGeo','municipality'];var changedParameters=apiMap.getChangedParameters();for(var i=0;i<geographyParameters.length;i++){if(changedParameters[geographyParameters[i]]!=null){return true;}}
return false;};apiMap.getChangedParameters=function(){var changedParameters={};var current=dojo.queryToObject(currentParameters);var updateTo=dojo.queryToObject(dojo.hash());var parametersRegistered=[];for(var key in current){parametersRegistered.push(key);}
for(var key in updateTo){parametersRegistered.push(key);}
for(var i=0;i<parametersRegistered.length;i++){if(apiMap.isDifferent(current[parametersRegistered[i]],updateTo[parametersRegistered[i]])){changedParameters[parametersRegistered[i]]=true;}}
return changedParameters;};apiMap.isDifferent=function(l1,l2){return l1!=l2?true:false;};apiMap.initMap=function(){apiMap.updateCurrentParameters();var queryParameters=dojo.hash();$.getJSON("/vis/rubrikk/service/classified/mapsearch.json?"+queryParameters,function(data){api_RealestateMapViewComponent_searchData=data;apiMap.updateResultHeader();apiMap.updateTab();apiMap.updateLocalGeoSwitch();apiMap.updateFacets();apiMap.updateFacetChoices();apiMap.removeInitLoading();apiMap.showHiddenElements();apiMap.stickyMapReposition();apiMap.drawMap();});};apiMap.removeInitLoading=function(){$('.initLoading').hide();};apiMap.showHiddenElements=function(){$('.apiResultListHeader').show();$('#apiMapDrilldown').show();$('.tabs').show();};apiMap.updateResultHeader=function(){var page=api_RealestateMapViewComponent_searchData.page;var ads='annonser';if(page.totalItems==1){ads='annonse'}
var text='Viser <strong>'+page.totalItems+'</strong> '+ads+' i <strong>Eiendom</strong> som har gateadresse i <strong>Norge</strong>.';$('.apiResultListInfo').html(text);};apiMap.updateTab=function(){var query=api_RealestateMapViewComponent_searchData.query;$('.tabs li a').each(function(){var href=$(this).attr('href');if(href.indexOf('#')>=0){$(this).attr("href",href.substr(0,href.indexOf('#'))+"#"+query.searchParameters);}
else if(href.indexOf('?')>=0){$(this).attr("href",href.substr(0,href.indexOf('?'))+"?"+query.searchParameters);}
else{$(this).attr("href",href+"?"+query.searchParameters);}});};apiMap.drawPoints=function(){var items=api_RealestateMapViewComponent_searchData.items;var page=api_RealestateMapViewComponent_searchData.page;if(page.totalItems<=page.itemsPerPage){for(var i=0;i<items.length;i++){apiMap.CreatePOI(items[i]);}
dojo.connect(map.graphics,"onClick",apiMap.graphicOnClickHandler);}
apiMap.removeOverlay();apiMap.showMaxResultFoundIfApplicable();};apiMap.showLoadingMessage=function(){$("#map").append('<div class="messageOverlayWrapper"><div class="messageOverlay"></div><div class="loading"><img src="'+gfxURL+'/resources/web/gfx/classified/map/lasteikon-transparent.gif"><div>Laster inn kartdata...</div></div></div>');};apiMap.removeOverlay=function(){$('.messageOverlayWrapper').remove();};apiMap.showMaxResultFoundIfApplicable=function(){var page=api_RealestateMapViewComponent_searchData.page;if(page.totalItems>page.itemsPerPage){$("#map").append('<div class="messageOverlayWrapper"><div class="messageOverlay"></div><div class="maxSizeReached">Mer enn '+page.itemsPerPage+' annonser funnet. Avgrens søket ved hjelp av valgene til venstre.</div></div>');}};apiMap.graphicOnClickHandler=function(evt){map.infoWindow.show(evt.mapPoint,map.getInfoWindowAnchor(evt.screenPoint));};apiMap.getBoundingBox=function(){var mapBoundingBox=api_RealestateMapViewComponent_searchData.mapBoundingBox;var minSpread=1500;var xMin=mapBoundingBox.xMin;var xMax=mapBoundingBox.xMax;var yMin=mapBoundingBox.yMin;var yMax=mapBoundingBox.yMax;if(xMax-xMin<minSpread){xMin=xMin-(minSpread/2);xMax=xMax+(minSpread/2);}
if(yMax-yMin<minSpread){yMin=yMin-(minSpread/2);yMax=yMax+(minSpread/2);}
return{"xMin":xMin,"xMax":xMax,"yMin":yMin,"yMax":yMax};};apiMap.updateFacetChoices=function(){var drillDownChoices=apiMap.getDrillDownChoicesHTML();if(!apiMap.isEmpty(drillDownChoices)){$('.choicesTree').html(drillDownChoices);$('.removeAll').html(apiMap.getRemoveAllHTML());$('#apiFacetChoicesContainer').show();}
else{$('#apiFacetChoicesContainer').hide();}};apiMap.getRemoveAllHTML=function(){var localGeographyFlag=api_RealestateMapViewComponent_searchData.query.localGeographyFlag;return'<li><a class="showall" title="'+messagePropertiesDrillDown.removeall+'" href="#catId=16000&localGeo='+localGeographyFlag+'">'+messagePropertiesDrillDown.removeall+'</a></li>';};apiMap.getDrillDownChoicesHTML=function(){var text='';var showMainCategory=false;var facetChoices=api_RealestateMapViewComponent_searchData.facetChoices;var query=api_RealestateMapViewComponent_searchData.query;var reduceDepthForBranch=false;if(!apiMap.isEmpty(query.searchText)){text+='<li class="item selectedChoice">'+apiMap.getCommonFacetHTML(query.searchText,query.searchTextRemovalParameters,null,true)+'</li>';}
for(var i=0;i<facetChoices.length;i++){if(facetChoices[i].facetName!='local_ads'){var currentDepth=facetChoices[i].depth;if(facetChoices[i].facetName=='municipality'){currentDepth--;}
var nextDepth=0;if((i+1)<facetChoices.length){nextDepth=facetChoices[i+1].depth;}
if(facetChoices[i].facetName=='category_prefix_id_name_tree'&&!showMainCategory){reduceDepthForBranch=true;}
if(reduceDepthForBranch){currentDepth--;nextDepth--;}
if(currentDepth>=0){text+='<li';if(nextDepth!=currentDepth){text+=' class="last"';}
text+='><span class="dotted';if(nextDepth!=currentDepth){text+='Last';}
text+='"></span>'+apiMap.getFacetChoiceHTML(facetChoices[i]);if(currentDepth<nextDepth){text+='<ul>';}
else if(currentDepth>nextDepth){if(reduceDepthForBranch){nextDepth++;}
if(currentDepth!=0){text+='</li>';}
for(var j=nextDepth+1;j<=currentDepth;j++){text+='</ul></li>';}
reduceDepthForBranch=false;}
else{text+='</li>';}}
if(nextDepth<0){reduceDepthForBranch=false;}}}
return text;};apiMap.getFacetChoiceHTML=function(facetChoice){var displayName=facetChoice.displayValue;if(facetChoice.facetTransportType=='Range'){displayName=apiMap.getRangeDisplayName(facetChoice.facetName,facetChoice.rangeFrom,facetChoice.rangeTo);}
return apiMap.getCommonFacetHTML(displayName,facetChoice.filterQuery,null,true);};apiMap.updateFacets=function(){var text="";var facets=api_RealestateMapViewComponent_searchData.facets;$.each(facets,function(index,value){if(apiMap.shouldFacetBeDisplayed(value)){text+="<h3>"+messagePropertiesDrillDown[index]+"</h3>";text+=apiMap.getFacetHTML(value);}});$('.apiDrilldownContent').html(text);apiMap.drilldownDetectSvg();apiMap.limitFacets();};apiMap.getFacetHTML=function(facet){var MAX_ROWS=20;var text="";if('Plain'==facet.type){var shortenFacetList=['company_id_name','type','municipality'];if($.inArray(facet.fieldName,shortenFacetList)!=-1){var commonFacet=apiMap.mapFromPlainToCommonFacet(facet);text=apiMap.getCompressedFacetHTML(facet.fieldName,commonFacet,MAX_ROWS);}
else{text=apiMap.getPlainFacetHTML(facet);}}
else if('TreeList'==facet.type){var shortenFacetList=['make_model_prefix','type'];if($.inArray(facet.fieldName,shortenFacetList)!=-1){var commonFacet=apiMap.mapFromTreeListToCommonFacet(facet);text=apiMap.getCompressedFacetHTML(facet.fieldName,commonFacet,MAX_ROWS);}
else{text=apiMap.getTreeListFacetHTML(facet);}}
else if('Range'==facet.type){text=apiMap.getRangeFacetHTML(facet);}
return text;};apiMap.getCompressedFacetHTML=function(fieldName,commonFacet,maxRows){var text='';apiMap.sortAlphabetically(commonFacet);text='<ul id="apiDrilldown_'+fieldName+'" class="full">'+apiMap.getFacetLineHTML(commonFacet);apiMap.sortByHighestCount(commonFacet);var reducedFacet=apiMap.reduceList(commonFacet,maxRows);apiMap.sortAlphabetically(reducedFacet);text+='</ul><ul id="apiDrilldown_'+fieldName+'" class="most">'+apiMap.getFacetLineHTML(reducedFacet)+'</ul>'
return text;};apiMap.reduceList=function(list,limit){var reducedList=[];var i=0;while(i<limit&&i<list.length){reducedList.push(list[i++]);}
return reducedList;};apiMap.getFacetLineHTML=function(commonFacet){var text='';for(var i=0;i<commonFacet.length;i++){text+='<li class="item">'+apiMap.getCommonFacetHTML(commonFacet[i].name,commonFacet[i].query,commonFacet[i].count,commonFacet[i].selected)+'</li>';}
return text;};apiMap.mapFromPlainToCommonFacet=function(facet){var arr=[];for(var i=0;i<facet.counts.length;i++){arr.push({'name':facet.counts[i].name,'query':facet.counts[i].filterQuery,'count':facet.counts[i].count,'selected':facet.counts[i].selected});}
return arr;};apiMap.mapFromTreeListToCommonFacet=function(facet){var arr=[];for(var i=0;i<facet.children.length;i++){arr.push({'name':facet.children[i].nodeName,'query':facet.children[i].filterQuery,'count':facet.children[i].count,'selected':facet.children[i].selected});}
return arr;};apiMap.sortByHighestCount=function(commonFacet){commonFacet.sort(function(a,b){return b.count-a.count;});};apiMap.sortAlphabetically=function(commonFacet){commonFacet.sort(function(a,b){var nameA=a.name.toLowerCase(),nameB=b.name.toLowerCase();if(nameA<nameB){return-1;}
if(nameA>nameB){return 1;}
return 0;});};apiMap.getRangeDisplayName=function(fieldName,from,to){var text="";if('rooms'==fieldName){text=apiMap.getRangeTextSingleValue(fieldName,from,to);}
else if('bedrooms'==fieldName){var appendText=messagePropertiesDrillDown['bedroom'];text=apiMap.getRangeTextSingleValue(fieldName,from,to,appendText);}
else if('price_numeric'==fieldName||'price_rounded_facet'==fieldName||'monthlyrent'==fieldName){var appendText=messagePropertiesDrillDown['kr'];text=apiMap.getRangeTextBothValues(fieldName,from,to,appendText,true);}
else if('primary_room_area'==fieldName){var appendText=messagePropertiesDrillDown['sup'];text=apiMap.getRangeTextBothValues(fieldName,from,to,appendText,false);}
else if('engine_hp'==fieldName){var appendText=messagePropertiesDrillDown['hp'];text=apiMap.getRangeTextBothValues(fieldName,from,to,appendText,false);}
else if('mileage'==fieldName){var appendText=messagePropertiesDrillDown['km'];text=apiMap.getRangeTextBothValues(fieldName,from,to,appendText,true);}
else if('publish_from_time'==fieldName){text=apiMap.getFacetValueForPublishTime(from);}
else{text=apiMap.getRangeTextWithoutStartInterval(fieldName,from,to);}
return text;};apiMap.getFacetValueForPublishTime=function(from){var facetDisplayText=messagePropertiesDrillDown['publish_from_time.'+from];return facetDisplayText!=null?facetDisplayText:"";};apiMap.getRangeTextSingleValue=function(fieldName,from,to){var text="";if(from==null||from==''){text=messagePropertiesDrillDown[fieldName+'.lt']+' '+to;}
else if(to==null||to==''){text=messagePropertiesDrillDown[fieldName+'.gt']+' '+from;}
return text;};apiMap.getRangeTextBothValues=function(fieldName,from,to,appendText,isNumber){var text;if(isNumber==true){if(!apiMap.isEmpty(from)){from=apiMap.periodFormatted(from);}
if(!apiMap.isEmpty(to)){to=apiMap.periodFormatted(to);}}
if(apiMap.isEmpty(from)){text=messagePropertiesDrillDown[fieldName+'.lt']+' '+appendText+' - '+to+' '+appendText;}
else if(apiMap.isEmpty(to)){text=from+' '+appendText+' '+messagePropertiesDrillDown[fieldName+'.gt']}
else{text=from+' '+appendText+' - '+to+' '+appendText;}
return text;};apiMap.isEmpty=function(obj){if(obj==null||obj==''){return true;}
else{return false;}};apiMap.periodFormatted=function(amount){var delimiter=".";var minus='';var parsedAsInt=parseInt(amount);if(isNaN(parsedAsInt)){return'';}
if(parsedAsInt<0){minus='-';}
var n=new String(Math.abs(parsedAsInt));var a=[];while(n.length>3){var nn=n.substr(n.length-3);a.unshift(nn);n=n.substr(0,n.length-3);}
if(n.length>0){a.unshift(n);}
return minus+a.join(delimiter);};apiMap.getRangeTextWithoutStartInterval=function(fieldName,from,to){var text;if(from==null||from==''){text=to+' '+messagePropertiesDrillDown[fieldName+'.lt'];}
else if(to==null||to==''){text=from+' '+messagePropertiesDrillDown[fieldName+'.gt'];}
else{text=from+' - '+to;}
return text;};apiMap.getTreeListFacetHTML=function(facet){var text='<ul id="apiDrilldown_"'+facet.fieldName+'">';for(var i=0;i<facet.children.length;i++){text+='<li class="item">'+apiMap.getCommonFacetHTML(facet.children[i].nodeName,facet.children[i].filterQuery,facet.children[i].count,facet.children[i].selected)+'</li>';}
text+='</ul>';return text;};apiMap.getRangeFacetHTML=function(facet){var text='<ul id="apiDrilldown_"'+facet.fieldName+'">';for(var i=0;i<facet.counts.length;i++){if(facet.counts[i].count>0||facet.counts[i].selected==true){text+='<li class="item';if(facet.counts[i].selected==true){text+=' selectedChoice';}
var displayName=apiMap.getRangeDisplayName(facet.fieldName,facet.counts[i].from,facet.counts[i].to);text+='">'+apiMap.getCommonFacetHTML(displayName,facet.counts[i].filterQuery,facet.counts[i].count,facet.counts[i].selected)+'</li>';}}
text+='</ul>';return text;};apiMap.getPlainFacetHTML=function(facet){var text='<ul id="apiDrilldown_'+facet.fieldName+'">';for(var i=0;i<facet.counts.length;i++){text+='<li class="item';if(facet.counts[i].selected==true){text+=' selectedChoice';}
text+='">'+apiMap.getCommonFacetHTML(facet.counts[i].name,facet.counts[i].filterQuery,facet.counts[i].count,facet.counts[i].selected)+'</li>';}
text+='</ul>';return text;};apiMap.getCommonFacetHTML=function(displayName,filterQuery,count,selected){var MAX_LENGTH=32;var href='#'+filterQuery;var text="";if(selected==true){text+='<span class="selected">';text+='<a title="'+messagePropertiesDrillDown['remove.navigator']+'" href="'+href+'">';text+='<span class="removeImg"></span>'+apiMap.shorten(displayName,MAX_LENGTH)+'</a></span>';}
else{text+='<a class="apiProspectLink" href="'+href+'">';text+='<span class="drilldownTip">'+decodeURIComponent(displayName);if(!apiMap.isEmpty(count)){text+=' ('+count+')';}
text+='</span><span class="drilldownText">'+apiMap.shorten(displayName,MAX_LENGTH)+'</span>';if(!apiMap.isEmpty(count)){text+='<span class="count"> ('+count+')</span>';}
text+='</a>';}
return text;};apiMap.shorten=function(text,maxLength){var result=text;if(maxLength<text.length){result=text.substr(0,maxLength-3)+'...';}
return result;};apiMap.shouldFacetBeDisplayed=function(facet){var shouldBeDisplayed=false;if('TreeList'==facet.type){for(var i=0;i<facet.children.length;i++){if(facet.children[i].count>0){shouldBeDisplayed=true;}}}
else{for(var i=0;i<facet.counts.length;i++){if(facet.counts[i].count>0&&facet.counts[i].selected==false){shouldBeDisplayed=true;}}}
return shouldBeDisplayed;};apiMap.limitFacets=function(){(function($){apiMap.HideMaxItems({id:'apiDrilldown_company_id_name',max:20});apiMap.HideMaxItems({id:'apiDrilldown_make_model_prefix',max:20});apiMap.HideMaxItems({id:'apiDrilldown_municipality',max:20});apiMap.HideMaxItems({id:'apiDrilldown_type',max:20});apiMap.HideMaxItems({id:'apiDrilldown_geartype',max:3});})(jQuery);};apiMap.updateLocalGeoSwitch=function(){if($('.apiGeoChanger').length!=0){var query=api_RealestateMapViewComponent_searchData.query;if(query.localGeographyFlag==true){$('#apiAllAds').removeAttr('checked');$('#apiLocalGeo').attr('checked',true);$('#apiLocalGeo').unbind('click');$('#apiAllAds').click(function(){dojo.hash(query.geographyCtxSwSearchParameters);});}
else{$('#apiLocalGeo').removeAttr('checked');$('#apiAllAds').attr('checked',true);$('#apiAllAds').unbind('click');$('#apiLocalGeo').click(function(){dojo.hash(query.geographyCtxSwSearchParameters);});}}};apiMap.drawMap=function(){var tileService=baseMapUrlMain+"?token="+mapToken;tileServers=[baseMapUrlTileserver1,baseMapUrlTileserver2,baseMapUrlTileserver3,baseMapUrlTileserver4];var popup=new esri.dijit.Popup(null,dojo.create("div"));map=new esri.Map("map",{infoWindow:popup,extent:apiMap.getExtent()});var imageParameters=new esri.layers.ImageParameters();imageParameters.format="jpeg";tiledMapServiceLayer=esri.layers.ArcGISTiledMapServiceLayer(tileService);tiledMapServiceLayer.tileServers=tileServers;map.addLayer(tiledMapServiceLayer);$("#apiStickyMap").append(geodataText);dojo.connect(map,"onLoad",apiMap.mapLoaded);dojo.connect(map,"onClick",apiMap.hideInfoWindow);dojo.connect(map,"onDblClick",apiMap.hideInfoWindow);dojo.connect(map,"onMouseDown",function(evt){map.reposition();});dojo.connect(window,"onresize",function(){apiMap.stickyMapReposition();map.reposition();map.resize();popup.reposition();});dojo.connect(window,"onscroll",function(){apiMap.stickyMapReposition();});};apiMap.getExtent=function(){var boundingBox=apiMap.getBoundingBox();return new esri.geometry.Extent({"xmin":boundingBox.yMin,"ymin":boundingBox.xMin,"xmax":boundingBox.yMax,"ymax":boundingBox.xMax}).expand(1.6);};apiMap.updateExtent=function(){map.setExtent(apiMap.getExtent());};apiMap.hideInfoWindow=function(){if(map!=null&&map.infoWindow!=null){map.infoWindow.hide();}};apiMap.mapLoaded=function(){map.disableScrollWheelZoom();apiMap.drawPoints();};apiMap.clearGraphics=function(){if(map!=null){if(map.graphics!=null){map.graphics.clear();}
apiMap.hideInfoWindow();}};apiMap.CreatePOI=function(item){var poi={"xcoord":item.mapCoordX,"ycoord":item.mapCoordY,"image":"needle-w-shadow_v2_40x32.png","attributes":{"TITLE":""}}
var symbol=new esri.symbol.PictureMarkerSymbol(gfxURL+"/resources/web/gfx/maps/"+poi.image,40,32);symbol.setOffset(0,17);var graphic=new esri.Graphic(new esri.geometry.Point(poi.ycoord,poi.xcoord),symbol);graphic.setAttributes(poi.attributes);var infoTemplate=new esri.InfoTemplate();infoTemplate.setContent(apiMap.getInfoTemplateContent(item));graphic.setInfoTemplate(infoTemplate);map.graphics.add(graphic);};apiMap.getInfoTemplateContent=function(item){var prospectLink='/vis/rubrikk/eiendomsprospekt/'+item.objectId+'.html';var contentString='<div class="customMiniatureProspect"><a href="'+prospectLink+'" target="_blank">';if(item.listingImage!=''){var prospectImage=imageURL+"/external/210x153mapprospectusrc/"+encodeURIComponent(item.listingImage);contentString+='<img class="prospectImage" src="'+prospectImage+'" alt="" />';}
if(item.streetAddress!=''){contentString+='<div class="miniatureProspectTitle">'+item.streetAddress+'</div>';}
contentString+='<dl>';if(item.propertyType!=''){contentString+='<dt>Eiendomstype:</dt><dd title="'+item.propertyType+'">'+apiMap.shorten(item.propertyType,14)+'</dd>';}
if(item.price!=''){contentString+='<dt>Prisantydning:</dt><dd class="emphasis">'+apiMap.periodFormatted(item.price)+',-</dd>';}
if(item.sharedDebt!=''){contentString+="<dt>Fellesgjeld:</dt><dd>"+apiMap.periodFormatted(item.sharedDebt)+",-</dd>";}
if(item.totalPrice!=''){contentString+="<dt>Totalpris:</dt><dd>"+apiMap.periodFormatted(item.totalPrice)+",-</dd>";}
if(item.primaryRoom!=''){contentString+="<dt>Primærareal:</dt><dd>"+item.primaryRoom+messagePropertiesDrillDown.sup+"</dd>";}
contentString+='</dl>';if(item.listingLogo!=''){var companyImage=imageURL+"/external/140x35r/"+encodeURIComponent(item.listingLogo);contentString+='<img class="logo" src="'+companyImage+'" />';}
contentString+='</a></div>';return contentString;};apiMap.drilldownDetectedSvg=function(){$('#apiMapDrilldown .tabHeader').removeClass('tabHeaderFallback');$('#apiMapDrilldown .searchbutton').removeClass('searchbuttonFallback');};apiMap.drilldownDetectSvg=function(){var testImg='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNzUiIGhlaWdodD0iMjc1Ij48L3N2Zz4%3D';var img=document.createElement('img');img.setAttribute('src',testImg);img.onload=drilldownDetectedSvg;};apiMap.HideMaxItems=function(){this.defaults={id:null,max:20};for(var n in arguments[0]){this.defaults[n]=arguments[0][n]}
var maxLi=this.defaults.max;var ulId=this.defaults.id;var ulLengthFull=$("#"+ulId+".full li").length;$("#"+ulId).each(function(){if($(this).hasClass("full")){$(this).hide();}
if($(this).hasClass("most")){$(this).show();}
if(ulLengthFull>maxLi){$("#"+ulId+".most li").last().after("<li class='more'><a href='#' class='more'>Vis alle ("+(ulLengthFull)+")</a></li>");}});$("#"+ulId+" li.more a").live("click",function(){$("#"+ulId+".full").show();$("#"+ulId+".most").hide();if($("#"+ulId+".full li").last().hasClass("less")){return false;}else{$("#"+ulId+".full li").last().after("<li class='less'><a href='#' class='less'>Vis færre ("+maxLi+")</a></li>");return false;}});$("#"+ulId+" li.less a").live("click",function(){$("#"+ulId+".full").hide();$("#"+ulId+".most").show();return false;});};apiMap.stickyMapReposition=function(){var sticky=apiMap.getStickyInfo();var viewport=apiMap.getViewport();if(viewport.y<sticky.top_offset){sticky.mapBlock.style.position="absolute";sticky.mapBlock.style.top=sticky.top+"px";if(stickyMapFixed){sticky.mapBlock.style.left=(sticky.mapBlock.offsetLeft-sticky.page_left_offset+viewport.x)+"px";}
stickyMapFixed=false;}else if(viewport.y<sticky.bottom_offset){sticky.mapBlock.style.position="fixed";sticky.mapBlock.style.top="0";sticky.mapBlock.style.left=(sticky.page_left_offset+260-viewport.x)+"px";stickyMapFixed=true;}else{sticky.mapBlock.style.position="absolute";sticky.mapBlock.style.top=sticky.bottom+"px";if(stickyMapFixed){sticky.mapBlock.style.left=(sticky.mapBlock.offsetLeft-sticky.page_left_offset+viewport.x)+"px";}
stickyMapFixed=false;}};apiMap.stickyMapRepositionOnClick=function(){var sticky=apiMap.getStickyInfo();var viewport=apiMap.getViewport();if(viewport.y<sticky.top_offset){sticky.mapBlock.style.position="absolute";sticky.mapBlock.style.top=sticky.top+"px";if(stickyMapFixed){sticky.mapBlock.style.left=(sticky.mapBlock.offsetLeft-sticky.page_left_offset+viewport.x)+"px";}
stickyMapFixed=false;}else if(viewport.y<sticky.bottom_offset){sticky.mapBlock.style.position="fixed";sticky.mapBlock.style.top="0";sticky.mapBlock.style.left=(sticky.page_left_offset+260-viewport.x)+"px";stickyMapFixed=true;}else if(viewport.y>=sticky.top_offset){sticky.mapBlock.style.position="absolute";sticky.mapBlock.style.top=sticky.top+"px";if(stickyMapFixed){sticky.mapBlock.style.left=(sticky.mapBlock.offsetLeft-sticky.page_left_offset+viewport.x)+"px";}
stickyMapFixed=false;window.scrollTo(viewport.x,sticky.top);}else if(viewport.y>=sticky.bottom_offset){sticky.mapBlock.style.position="absolute";sticky.mapBlock.style.top=sticky.bottom+"px";if(stickyMapFixed){sticky.mapBlock.style.left=(sticky.mapBlock.offsetLeft-sticky.page_left_offset+viewport.x)+"px";}
stickyMapFixed=false;}};apiMap.getStickyInfo=function(){var maxMapHeight=1200;var viewport_height=window.innerHeight;if(!viewport_height){viewport_height=document.documentElement.clientHeight;}
var s=document.getElementById("apiStickyMap"),t=document.getElementById("map"),b=document.getElementById("apiMapDrilldown"),p=document.getElementById("eiendomsnettPageWrap");if(!s||!t||!b)return;var top=s.parentNode.offsetTop;var parent_top=s.parentNode.offsetParent.offsetTop;if(p){var page_left_offset=p.offsetLeft;}else{var page_left_offset=0;}
if(!top){top=349;}
var stuff_around_map=t.offsetTop;var map_text=document.getElementById("apiMapGeodataText");if(map_text){stuff_around_map+=map_text.offsetHeight;}
if((viewport_height-stuff_around_map)<maxMapHeight){t.style.height=(viewport_height-stuff_around_map)+"px";}else{t.style.height=maxMapHeight+"px";}
var bottom=top+b.offsetHeight-s.offsetHeight;var top=top;var top_offset=top+parent_top;var bottom_offset=bottom+parent_top;b.style.minHeight=(t.offsetHeight+stuff_around_map)+"px";return{top:top,bottom:bottom,page_left_offset:page_left_offset,mapBlock:s,top_offset:top_offset,bottom_offset:bottom_offset}};apiMap.getViewport=function(){var Y=0,X=0;if(typeof(window.pageYOffset)=='number'){Y=window.pageYOffset;X=window.pageXOffset;}else if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){Y=document.body.scrollTop;X=document.body.scrollLeft;}
else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){Y=document.documentElement.scrollTop;X=document.documentElement.scrollLeft;}
return{y:Y,x:X};};var stickyMapFixed=false;var EAad=EAad||{};(function(){var avis,nedstat,initialize;initialize=function(data){avis=data.amedia_avis;nedstat=data.nedstat;};EAad.init=function(){EAad.cqueue=EAad.cqueue||[];EAad.cqueue.push(['setProduct','87'],['setTargets','{"amedia_avis" : ["'+avis+'"]}'],['setParams','{"a_virtual" : ["'+nedstat+'"], "touch.": "mobil."}'],['setHtmlTarget','EAad87'],['displayAd']);if(!EAad.script)
{(function(d,t){EAad.script=1;var _EA=d.createElement(t);_EA.type='text/javascript';_EA.async=true;_EA.src='http://ads.easy-ads.com/showadv2.php?pid='+EAad.cqueue[0][1]+'&tc='+encodeURIComponent(EAad.cqueue[1][1])+'&dt='+new Date().getTime();var s=d.getElementsByTagName(t)[0];s.parentNode.insertBefore(_EA,s);}(document,'script'));}};EAad.admin={initialize:initialize};}());realestateRequest=function(){$("#askBrokerForm").validate({rules:{fromName:"required",contactPost:{required:true,digits:true},fromEmail:{required:true,email:true},recipient:{required:true,minlength:1}},messages:{recipient:{required:"Please select at least 1 broker.",minlength:"Check no more than {0} boxes"}}});$("#sendAskButton").click(function(e){e.preventDefault();var boxName=$("#contactName").val();var boxPost=$("#contactPost").val();var boxTel=$("#contactTel").val();var boxMail=$("#contactMail").val();if(boxName=="Navn*"){$("#contactName").val("");}
if(boxPost=="Postnr.*"){$("#contactPost").val("");}
if(boxTel=="Telefonnr."){$("#contactTel").val("");}
if(boxMail=="E-post*"){$("#contactMail").val("");}
if($("#askBrokerForm").valid()){var action="/service/classified/valuerequest/sendmail";var formData=$("#askBrokerForm").serialize();$.ajax({type:'POST',url:action,data:formData,cache:false,beforeSend:function(){$("#apiAskBroker").addClass("waitingState");},success:function(data){if(data.errorMessage==""){$("#apiAskBroker").removeClass("waitingState");$("#contentBox").css("display","none");$("#messageConfirm").css("display","block");}else{$("#apiAskBroker").removeClass("waitingState");$("#contentBox").css("display","none");$("#messageError").css("display","block");}},error:function(request,status,exception){$("#apiAskBroker").removeClass("waitingState");$("#contentBox").css("display","none");$("#messageError").css("display","block");},timeout:20000,dataType:'json'});}
else{checkPlaceholder();}});$("#showAskBrokerBox").click(function(){var $div=$('<div />').appendTo('body');$div.attr('class','blurbg');$(".blurbg").css("display","block");$("#askBrokerBox").appendTo("body");$("#askBrokerBox").show();$(".popup").css("display","block");checkPlaceholder();viewRandomBrokers(10);return false;});$("#closeAskBrokerPopup").click(function(){$("#contentBox").css("display","block");$("#messageConfirm").css("display","none");$("#messageError").css("display","none");$(".blurbg, #askBrokerBox").hide();$(".blurbg").remove();document.getElementById("askBrokerForm").reset();$(".error").html('');$(".error").removeClass("error");$("#brokerListLabel").addClass("error");return false;});function checkPlaceholder(){if($.browser.msie&&$.browser.version<=9)
{$(':text#contactName').val("Navn*");$(':text#contactPost').val("Postnr.*");$(':text#contactTel').val("Telefonnr.");$(':text#contactMail').val("E-post*");$(':text').focus(function(){if($(this).attr('placeholder')!=''&&$(this).val()==$(this).attr('placeholder')){$(this).val('').removeClass('hasPlaceholder');}}).blur(function(){if($(this).attr('placeholder')!=''&&($(this).val()==''||$(this).val()==$(this).attr('placeholder'))){$(this).val($(this).attr('placeholder')).addClass('hasPlaceholder');}});$(':text').blur();$(active).focus();}}
function viewRandomBrokers(n){var brokerListCount=$("fieldset#brokerList label.brokerListItem").length;if(brokerListCount>n){var rnd=[];for(var i=0;i<brokerListCount;i++){rnd[i]=i+1;$("#brokerListId"+rnd[i]).show();}
rnd.sort(function(){return Math.random()-0.5;});for(var j=0;j<(brokerListCount-n);j++){$("#brokerListId"+rnd[j]).hide();}}}}
api.viewingsCalendar=function(dateYear,dateMonth,dateDate,VCviewings){var oneday=1000*60*60*24;var calendarLength=21;var today=new Date(dateYear,Number(dateMonth)-1,dateDate);var message=['Ingen visninger p&#229; denne datoen.'];var chosenDate=null;var viewing_date=null;var makeCalendar=function(){var daystostart=(today.getDay()===0)?6:today.getDay()-1;var startofweek=new Date(Math.ceil((today.getTime()-(daystostart*oneday))));for(var i=0;i<calendarLength;i++){var date=new Date(Math.ceil(startofweek.getTime()+(i)*oneday));var dateTxt='<a href="" class="day">'+date.getDate()+'</a>';$(dateTxt).appendTo('#apiVC-content-cal-days').data('dateObj',date);}
$("#apiVC-content-cal-days a.day").each(function(){var dateObj=$(this).data("dateObj");var linkdate=new Date(Math.ceil(dateObj.getTime()+(i)*oneday)).valueOf();var todaydate=new Date(Math.ceil(today.getTime()+(i)*oneday)).valueOf();var parent=$(this);$.each(VCviewings,function(){var dateStr=this.viewing_date_nor.split(".");this.viewing_date=Number(dateStr[2].substring(0,4))+"."+Number(dateStr[1])+"."+Number(dateStr[0]);var parentDate=dateObj.getFullYear()+"."+Number(dateObj.getMonth()+1)+"."+dateObj.getDate();if(this.viewing_date===parentDate){parent.addClass("hasViewing");return false;}});if(linkdate<todaydate){$(this).addClass("pastDate").data('pastDate',true);}else if(linkdate==todaydate){$(this).addClass("presentDate chosenDate");chosenDate=$(this);}}).click(function(){if(!$(this).data("pastDate")){var dateObj=$(this).data("dateObj");updateResults(dateObj);$(chosenDate).removeClass("chosenDate");$(this).addClass("chosenDate");chosenDate=$(this);return false;}else{return false;}});$('#apiVC-content-filter select').change(function(){updateCalendar(chosenDate.data("dateObj"));updateResults(chosenDate.data("dateObj"));});};var updateCalendar=function(){var filterType=$('select#apiVC-content-filter-type option:selected').val().toLowerCase();var filterArea=$('select#apiVC-content-filter-area option:selected').val().toLowerCase();var filter=[];if(filterType!==""){filter[filter.length]={"test1":"filterType","test2":"this.type.toLowerCase()"};}
if(filterArea!==""){filter[filter.length]={"test1":"filterArea","test2":"this.post_location.toLowerCase()"};}
var filterStr="'test'==='test'";for(var i=0;i<filter.length;i++){filterStr+=" && "+filter[i].test1+"==="+filter[i].test2;}
$("#apiVC-content-cal-days a.day").removeClass("hasViewing").each(function(){var dateObj=$(this).data("dateObj");var parent=$(this);$.each(VCviewings,function(){if(eval(filterStr)){var parentDate=dateObj.getFullYear()+"."+Number(dateObj.getMonth()+1)+"."+dateObj.getDate();if(this.viewing_date===parentDate){parent.addClass("hasViewing");return false;}}});})};var updateResults=function(now){$('#apiVC-content-results-viewings').empty();var hits=0;var chosenDate=now.getFullYear()+"."+Number(now.getMonth()+1)+"."+now.getDate();var filterType=$('select#apiVC-content-filter-type option:selected').val().toLowerCase();var filterArea=$('select#apiVC-content-filter-area option:selected').val().toLowerCase();var filter=[{"test1":"chosenDate","test2":"this.viewing_date"}];if(filterType!==""){filter[filter.length]={"test1":"filterType","test2":"this.type.toLowerCase()"};}
if(filterArea!==""){filter[filter.length]={"test1":"filterArea","test2":"this.post_location.toLowerCase()"};}
var filterStr="";for(var i=0;i<filter.length;i++){filterStr+=filter[i].test1+"=="+filter[i].test2;if(i!==filter.length-1){filterStr+=" && ";}}
$.each(VCviewings,function(){if(eval(filterStr)){hits++;var areaTxt=(this.areasize!="")?'<span class="attribute right"><label>Areal: </label>'+this.areasize+'m&#178;</span>':'<span class="attribute right"><label>&#32;</label>&#32;</span>';var adTxt='<a href="/vis/rubrikk/eiendomsprospekt/'+this.objectid+'"> \
     <span class="title">'+this.title+'</span> \
     <span class="attribute"><label>Sted: </label>'+this.post_location+'</span> \
     <span class="attribute right"><label>Pris: </label>'+this.price+',-</span> \
     <span class="attribute"><label>Type: </label>'+this.type+'</span> \
     '+areaTxt+' \
     <span class="attribute attrViewing"><label>Visning: </label>'+this.viewing_date_nor+',  '+this.viewing_start+' - '+this.viewing_end+'</span> \
    </a>';$('#apiVC-content-results-viewings').append(adTxt);}});if(hits===0){$('#apiVC-content-results-viewings').append("<p>"+message+"</p>");}
$("#apiVC-content-results-title").text("Visninger "+now.getDate()+"."+Number(now.getMonth()+1)+"."+now.getFullYear()+" ("+hits+" treff):");};makeCalendar();updateResults(today);};webFromMail=function(){var adTypeValue,txtAdTypeEl=$("#txtAdType"),txtPriceEl=$("#txtPrice");$("#webMailForm").validate({rules:{adtype:{required:true},fromName:"required",fromLastname:"required",fromAddress:"required",fromPostnummer:"required",fromPoststed:"required",fromPhone:"required",fromEmail:"required"},messages:{adtype:'Vennligst velg kategori',fromName:"Dette feltet er påkrevd.",fromLastname:"Dette feltet er påkrevd.",fromAddress:"Dette feltet er påkrevd.",fromPostnummer:"Dette feltet er påkrevd.",fromPoststed:"Dette feltet er påkrevd.",fromPhone:"Dette feltet er påkrevd.",fromEmail:"Dette feltet er påkrevd.",}});$("#sendBookAdButton").click(function(e){e.preventDefault();apiNedStat.onclick(this,apiNedstatConfig,'a_click_area=classified.private.'+txtAdTypeEl.val());if($("#webMailForm").valid()){var action="/vis/rubrikk/service/classified/sendwebform";var options={type:'POST',url:action,contentType:false,cache:false,processData:false,beforeSend:function(){$("#apiWebFormMail").addClass("waitingState");},success:function(data){if(data.errorMessage==""){$("#apiWebFormMail").removeClass("waitingState");$("#contentBox").css("display","none");$("#messageConfirm").css("display","block");}else{$("#apiWebFormMail").removeClass("waitingState");$("#contentBox").css("display","none");$("#messageError").css("display","block");}},error:function(request,status,exception){$("#apiWebFormMail").removeClass("waitingState");$("#contentBox").css("display","none");$("#messageError").css("display","block");},timeout:20000,dataType:'json'};$('#webMailForm').ajaxSubmit(options);}});$("#showWebFormMail").click(function(){var $div=$('<div />').appendTo('body');$div.attr('class','blurbg');$(".blurbg").css("display","block");$("#webFormMailBox").appendTo("body");$("#webFormMailBox").show();$(".popup-webformmail").css("display","block");});$("#closeWebFormMailPopup").click(function(){$("#contentBox").css("display","block");$("#messageConfirm").css("display","none");$("#messageError").css("display","none");$(".blurbg, #webFormMailBox").hide();$(".blurbg").remove();document.getElementById("webMailForm").reset();$(".ad-price").text('0');$("label.error").remove();return false;});$("#adtype").change(function(){adTypeValue=$(this).val();switch(adTypeValue){case"":txtAdTypeEl.val("");txtPriceEl.val("0");break;case"type1":txtAdTypeEl.val("Smått og stort");txtPriceEl.val("69");break;case"type2":txtAdTypeEl.val("Bolig");txtPriceEl.val("139");break;case"type3":txtAdTypeEl.val("Arbeid utføres");txtPriceEl.val("139");break;case"type4":txtAdTypeEl.val("Tjeneste ønskes");txtPriceEl.val("59");break;case"type5":txtAdTypeEl.val("Motor");txtPriceEl.val("89");break;case"type6":txtAdTypeEl.val("Tapt og funnet");txtPriceEl.val("0");break;default:txtAdTypeEl.val("");txtPriceEl.val("0");}
var str=txtPriceEl.val();$(".ad-price").text(str);}).change();$("#adtime").change(function(){var indent=$(this).val();$("#txtIndent").val(indent);});$("#showhide-term").click(function(){$(".sp-box").toggle();});$('textarea[maxlength]').keyup(function(){var limit=parseInt($(this).attr('maxlength'));var text=$(this).val();var chars=text.length;if(chars>limit){var new_text=text.substr(0,limit);$(this).val(new_text);}});}
auth.searchtop={};auth.searchtop.login={userMenu:function userMenu(isLoggedIn,userEmail){var user=document.getElementById("apiUser");var expand=document.getElementById("apiUserActions");var menu=document.getElementById("apiUserActionList");switch(isLoggedIn){case false:menu.style.display="none";expand.className="apiActionListCollapsed";expand.style.display="block";user.onclick=function(){auth.displayLogin()};break;case true:var expandIcon=document.getElementById("apiExpandIcon");logout=document.getElementById("apiUserActionLogout");expand.style.display="block";expand.className="apiActionListCollapsed";expandIcon.style.visibility="visible";user.title=userEmail;user.innerHTML=auth.utils.shorten(userEmail,25);expand.style.display="block";logout.onclick=function(){auth.logOut($('.apiSearchContainer'));};break;default:break;}
$(function(){$("body").click(function(e){if($(e.target).parents("#apiUserActions").size()){if(expand.className==="apiActionListExpanded"){expand.className="apiActionListCollapsed";}else{expand.className="apiActionListExpanded";}}else{expand.className="apiActionListCollapsed";}});});},init:function init(localJanus,janusUrl,useSSL,publicationId){auth.initLogin(this.userMenu,localJanus,janusUrl,useSSL,publicationId);if(auth.isLoggedIn()){if(!auth.validateUser()){auth.logOut();}
auth.renderLoggedIn();}else{auth.renderLogin();}}};var placeholderCheck=function(){var i=document.createElement('input');return'placeholder'in i;};function activatePlaceholders(){var inputs=document.getElementsByTagName("input");for(var i=0;i<inputs.length;i++){if(inputs[i].getAttribute("type")=="text"&&inputs[i].getAttribute("placeholder")&&inputs[i].getAttribute("placeholder").length>0){inputs[i].value=inputs[i].getAttribute("placeholder");inputs[i].onclick=function(){if(this.value==this.getAttribute("placeholder")){this.value="";}
return false;};inputs[i].onblur=function(){if(this.value.length<1){this.value=this.getAttribute("placeholder");}}}}}
var api=api||{};api.classifiedUrlParam=function(name){var results=new RegExp('[\\?&]'+name+'=([^&#]*)').exec(window.location.href);if(results){return results[1]||0;}}
(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{factory((typeof(jQuery)!='undefined')?jQuery:window.Zepto);}}
(function($){"use strict";var feature={};feature.fileapi=$("<input type='file'/>").get(0).files!==undefined;feature.formdata=window.FormData!==undefined;var hasProp=!!$.fn.prop;$.fn.attr2=function(){if(!hasProp){return this.attr.apply(this,arguments);}
var val=this.prop.apply(this,arguments);if((val&&val.jquery)||typeof val==='string'){return val;}
return this.attr.apply(this,arguments);};$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}
var method,action,url,$form=this;if(typeof options=='function'){options={success:options};}
else if(options===undefined){options={};}
method=options.type||this.attr2('method');action=options.url||this.attr2('action');url=(typeof action==='string')?$.trim(action):'';url=url||window.location.href||'';if(url){url=(url.match(/^([^#]+)/)||[])[1];}
options=$.extend(true,{url:url,success:$.ajaxSettings.success,type:method||$.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},options);var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}
if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}
var traditional=options.traditional;if(traditional===undefined){traditional=$.ajaxSettings.traditional;}
var elements=[];var qx,a=this.formToArray(options.semantic,elements);if(options.data){options.extraData=options.data;qx=$.param(options.data,traditional);}
if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}
this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}
var q=$.param(a,traditional);if(qx){q=(q?(q+'&'+qx):qx);}
if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}
else{options.data=q;}
var callbacks=[];if(options.resetForm){callbacks.push(function(){$form.resetForm();});}
if(options.clearForm){callbacks.push(function(){$form.clearForm(options.includeHidden);});}
if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?'replaceWith':'html';$(options.target)[fn](data).each(oldSuccess,arguments);});}
else if(options.success){callbacks.push(options.success);}
options.success=function(data,status,xhr){var context=options.context||this;for(var i=0,max=callbacks.length;i<max;i++){callbacks[i].apply(context,[data,status,xhr||$form,$form]);}};if(options.error){var oldError=options.error;options.error=function(xhr,status,error){var context=options.context||this;oldError.apply(context,[xhr,status,error,$form]);};}
if(options.complete){var oldComplete=options.complete;options.complete=function(xhr,status){var context=options.context||this;oldComplete.apply(context,[xhr,status,$form]);};}
var fileInputs=$('input[type=file]:enabled',this).filter(function(){return $(this).val()!=='';});var hasFileInputs=fileInputs.length>0;var mp='multipart/form-data';var multipart=($form.attr('enctype')==mp||$form.attr('encoding')==mp);var fileAPI=feature.fileapi&&feature.formdata;log("fileAPI :"+fileAPI);var shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;var jqxhr;if(options.iframe!==false&&(options.iframe||shouldUseFrame)){if(options.closeKeepAlive){$.get(options.closeKeepAlive,function(){jqxhr=fileUploadIframe(a);});}
else{jqxhr=fileUploadIframe(a);}}
else if((hasFileInputs||multipart)&&fileAPI){jqxhr=fileUploadXhr(a);}
else{jqxhr=$.ajax(options);}
$form.removeData('jqxhr').data('jqxhr',jqxhr);for(var k=0;k<elements.length;k++){elements[k]=null;}
this.trigger('form-submit-notify',[this,options]);return this;function deepSerialize(extraData){var serialized=$.param(extraData,options.traditional).split('&');var len=serialized.length;var result=[];var i,part;for(i=0;i<len;i++){serialized[i]=serialized[i].replace(/\+/g,' ');part=serialized[i].split('=');result.push([decodeURIComponent(part[0]),decodeURIComponent(part[1])]);}
return result;}
function fileUploadXhr(a){var formdata=new FormData();for(var i=0;i<a.length;i++){formdata.append(a[i].name,a[i].value);}
if(options.extraData){var serializedData=deepSerialize(options.extraData);for(i=0;i<serializedData.length;i++){if(serializedData[i]){formdata.append(serializedData[i][0],serializedData[i][1]);}}}
options.data=null;var s=$.extend(true,{},$.ajaxSettings,options,{contentType:false,processData:false,cache:false,type:method||'POST'});if(options.uploadProgress){s.xhr=function(){var xhr=$.ajaxSettings.xhr();if(xhr.upload){xhr.upload.addEventListener('progress',function(event){var percent=0;var position=event.loaded||event.position;var total=event.total;if(event.lengthComputable){percent=Math.ceil(position/total*100);}
options.uploadProgress(event,position,total,percent);},false);}
return xhr;};}
s.data=null;var beforeSend=s.beforeSend;s.beforeSend=function(xhr,o){if(options.formData){o.data=options.formData;}
else{o.data=formdata;}
if(beforeSend){beforeSend.call(this,xhr,o);}};return $.ajax(s);}
function fileUploadIframe(a){var form=$form[0],el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle;var deferred=$.Deferred();deferred.abort=function(status){xhr.abort(status);};if(a){for(i=0;i<elements.length;i++){el=$(elements[i]);if(hasProp){el.prop('disabled',false);}
else{el.removeAttr('disabled');}}}
s=$.extend(true,{},$.ajaxSettings,options);s.context=s.context||s;id='jqFormIO'+(new Date().getTime());if(s.iframeTarget){$io=$(s.iframeTarget);n=$io.attr2('name');if(!n){$io.attr2('name',id);}
else{id=n;}}
else{$io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />');$io.css({position:'absolute',top:'-1000px',left:'-1000px'});}
io=$io[0];xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e=(status==='timeout'?'timeout':'aborted');log('aborting upload... '+e);this.aborted=1;try{if(io.contentWindow.document.execCommand){io.contentWindow.document.execCommand('Stop');}}
catch(ignore){}
$io.attr('src',s.iframeSrc);xhr.error=e;if(s.error){s.error.call(s.context,xhr,e,status);}
if(g){$.event.trigger("ajaxError",[xhr,s,e]);}
if(s.complete){s.complete.call(s.context,xhr,e);}}};g=s.global;if(g&&0===$.active++){$.event.trigger("ajaxStart");}
if(g){$.event.trigger("ajaxSend",[xhr,s]);}
if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global){$.active--;}
deferred.reject();return deferred;}
if(xhr.aborted){deferred.reject();return deferred;}
sub=form.clk;if(sub){n=sub.name;if(n&&!sub.disabled){s.extraData=s.extraData||{};s.extraData[n]=sub.value;if(sub.type=="image"){s.extraData[n+'.x']=form.clk_x;s.extraData[n+'.y']=form.clk_y;}}}
var CLIENT_TIMEOUT_ABORT=1;var SERVER_ABORT=2;function getDoc(frame){var doc=null;try{if(frame.contentWindow){doc=frame.contentWindow.document;}}catch(err){log('cannot get iframe.contentWindow document: '+err);}
if(doc){return doc;}
try{doc=frame.contentDocument?frame.contentDocument:frame.document;}catch(err){log('cannot get iframe.contentDocument: '+err);doc=frame.document;}
return doc;}
var csrf_token=$('meta[name=csrf-token]').attr('content');var csrf_param=$('meta[name=csrf-param]').attr('content');if(csrf_param&&csrf_token){s.extraData=s.extraData||{};s.extraData[csrf_param]=csrf_token;}
function doSubmit(){var t=$form.attr2('target'),a=$form.attr2('action'),mp='multipart/form-data',et=$form.attr('enctype')||$form.attr('encoding')||mp;form.setAttribute('target',id);if(!method||/post/i.test(method)){form.setAttribute('method','POST');}
if(a!=s.url){form.setAttribute('action',s.url);}
if(!s.skipEncodingOverride&&(!method||/post/i.test(method))){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}
if(s.timeout){timeoutHandle=setTimeout(function(){timedOut=true;cb(CLIENT_TIMEOUT_ABORT);},s.timeout);}
function checkState(){try{var state=getDoc(io).readyState;log('state = '+state);if(state&&state.toLowerCase()=='uninitialized'){setTimeout(checkState,50);}}
catch(e){log('Server abort: ',e,' (',e.name,')');cb(SERVER_ABORT);if(timeoutHandle){clearTimeout(timeoutHandle);}
timeoutHandle=undefined;}}
var extraInputs=[];try{if(s.extraData){for(var n in s.extraData){if(s.extraData.hasOwnProperty(n)){if($.isPlainObject(s.extraData[n])&&s.extraData[n].hasOwnProperty('name')&&s.extraData[n].hasOwnProperty('value')){extraInputs.push($('<input type="hidden" name="'+s.extraData[n].name+'">').val(s.extraData[n].value).appendTo(form)[0]);}else{extraInputs.push($('<input type="hidden" name="'+n+'">').val(s.extraData[n]).appendTo(form)[0]);}}}}
if(!s.iframeTarget){$io.appendTo('body');}
if(io.attachEvent){io.attachEvent('onload',cb);}
else{io.addEventListener('load',cb,false);}
setTimeout(checkState,15);try{form.submit();}catch(err){var submitFn=document.createElement('form').submit;submitFn.apply(form);}}
finally{form.setAttribute('action',a);form.setAttribute('enctype',et);if(t){form.setAttribute('target',t);}else{$form.removeAttr('target');}
$(extraInputs).remove();}}
if(s.forceSync){doSubmit();}
else{setTimeout(doSubmit,10);}
var data,doc,domCheckCount=50,callbackProcessed;function cb(e){if(xhr.aborted||callbackProcessed){return;}
doc=getDoc(io);if(!doc){log('cannot access response document');e=SERVER_ABORT;}
if(e===CLIENT_TIMEOUT_ABORT&&xhr){xhr.abort('timeout');deferred.reject(xhr,'timeout');return;}
else if(e==SERVER_ABORT&&xhr){xhr.abort('server abort');deferred.reject(xhr,'error','server abort');return;}
if(!doc||doc.location.href==s.iframeSrc){if(!timedOut){return;}}
if(io.detachEvent){io.detachEvent('onload',cb);}
else{io.removeEventListener('load',cb,false);}
var status='success',errMsg;try{if(timedOut){throw'timeout';}
var isXml=s.dataType=='xml'||doc.XMLDocument||$.isXMLDoc(doc);log('isXml='+isXml);if(!isXml&&window.opera&&(doc.body===null||!doc.body.innerHTML)){if(--domCheckCount){log('requeing onLoad callback, DOM not available');setTimeout(cb,250);return;}}
var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;if(isXml){s.dataType='xml';}
xhr.getResponseHeader=function(header){var headers={'content-type':s.dataType};return headers[header.toLowerCase()];};if(docRoot){xhr.status=Number(docRoot.getAttribute('status'))||xhr.status;xhr.statusText=docRoot.getAttribute('statusText')||xhr.statusText;}
var dt=(s.dataType||'').toLowerCase();var scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName('textarea')[0];if(ta){xhr.responseText=ta.value;xhr.status=Number(ta.getAttribute('status'))||xhr.status;xhr.statusText=ta.getAttribute('statusText')||xhr.statusText;}
else if(scr){var pre=doc.getElementsByTagName('pre')[0];var b=doc.getElementsByTagName('body')[0];if(pre){xhr.responseText=pre.textContent?pre.textContent:pre.innerText;}
else if(b){xhr.responseText=b.textContent?b.textContent:b.innerText;}}}
else if(dt=='xml'&&!xhr.responseXML&&xhr.responseText){xhr.responseXML=toXml(xhr.responseText);}
try{data=httpData(xhr,dt,s);}
catch(err){status='parsererror';xhr.error=errMsg=(err||status);}}
catch(err){log('error caught: ',err);status='error';xhr.error=errMsg=(err||status);}
if(xhr.aborted){log('upload aborted');status=null;}
if(xhr.status){status=(xhr.status>=200&&xhr.status<300||xhr.status===304)?'success':'error';}
if(status==='success'){if(s.success){s.success.call(s.context,data,'success',xhr);}
deferred.resolve(xhr.responseText,'success',xhr);if(g){$.event.trigger("ajaxSuccess",[xhr,s]);}}
else if(status){if(errMsg===undefined){errMsg=xhr.statusText;}
if(s.error){s.error.call(s.context,xhr,status,errMsg);}
deferred.reject(xhr,'error',errMsg);if(g){$.event.trigger("ajaxError",[xhr,s,errMsg]);}}
if(g){$.event.trigger("ajaxComplete",[xhr,s]);}
if(g&&!--$.active){$.event.trigger("ajaxStop");}
if(s.complete){s.complete.call(s.context,xhr,status);}
callbackProcessed=true;if(s.timeout){clearTimeout(timeoutHandle);}
setTimeout(function(){if(!s.iframeTarget){$io.remove();}
else{$io.attr('src',s.iframeSrc);}
xhr.responseXML=null;},100);}
var toXml=$.parseXML||function(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}
else{doc=(new DOMParser()).parseFromString(s,'text/xml');}
return(doc&&doc.documentElement&&doc.documentElement.nodeName!='parsererror')?doc:null;};var parseJSON=$.parseJSON||function(s){return window['eval']('('+s+')');};var httpData=function(xhr,type,s){var ct=xhr.getResponseHeader('content-type')||'',xml=type==='xml'||!type&&ct.indexOf('xml')>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==='parsererror'){if($.error){$.error('parsererror');}}
if(s&&s.dataFilter){data=s.dataFilter(data,type);}
if(typeof data==='string'){if(type==='json'||!type&&ct.indexOf('json')>=0){data=parseJSON(data);}else if(type==="script"||!type&&ct.indexOf("javascript")>=0){$.globalEval(data);}}
return data;};return deferred;}};$.fn.ajaxForm=function(options){options=options||{};options.delegation=options.delegation&&$.isFunction($.fn.on);if(!options.delegation&&this.length===0){var o={s:this.selector,c:this.context};if(!$.isReady&&o.s){log('DOM not ready, queuing ajaxForm');$(function(){$(o.s,o.c).ajaxForm(options);});return this;}
log('terminating; zero elements found by selector'+($.isReady?'':' (DOM not ready)'));return this;}
if(options.delegation){$(document).off('submit.form-plugin',this.selector,doAjaxSubmit).off('click.form-plugin',this.selector,captureSubmittingElement).on('submit.form-plugin',this.selector,options,doAjaxSubmit).on('click.form-plugin',this.selector,options,captureSubmittingElement);return this;}
return this.ajaxFormUnbind().bind('submit.form-plugin',options,doAjaxSubmit).bind('click.form-plugin',options,captureSubmittingElement);};function doAjaxSubmit(e){var options=e.data;if(!e.isDefaultPrevented()){e.preventDefault();$(e.target).ajaxSubmit(options);}}
function captureSubmittingElement(e){var target=e.target;var $el=$(target);if(!($el.is("[type=submit],[type=image]"))){var t=$el.closest('[type=submit]');if(t.length===0){return;}
target=t[0];}
var form=this;form.clk=target;if(target.type=='image'){if(e.offsetX!==undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop;}}
setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},100);}
$.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin');};$.fn.formToArray=function(semantic,elements){var a=[];if(this.length===0){return a;}
var form=this[0];var formId=this.attr('id');var els=semantic?form.getElementsByTagName('*'):form.elements;var els2;if(els&&!/MSIE [678]/.test(navigator.userAgent)){els=$(els).get();}
if(formId){els2=$(':input[form='+formId+']').get();if(els2.length){els=(els||[]).concat(els2);}}
if(!els||!els.length){return a;}
var i,j,n,v,el,max,jmax;for(i=0,max=els.length;i<max;i++){el=els[i];n=el.name;if(!n||el.disabled){continue;}
if(semantic&&form.clk&&el.type=="image"){if(form.clk==el){a.push({name:n,value:$(el).val(),type:el.type});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}
continue;}
v=$.fieldValue(el,true);if(v&&v.constructor==Array){if(elements){elements.push(el);}
for(j=0,jmax=v.length;j<jmax;j++){a.push({name:n,value:v[j]});}}
else if(feature.fileapi&&el.type=='file'){if(elements){elements.push(el);}
var files=el.files;if(files.length){for(j=0;j<files.length;j++){a.push({name:n,value:files[j],type:el.type});}}
else{a.push({name:n,value:'',type:el.type});}}
else if(v!==null&&typeof v!='undefined'){if(elements){elements.push(el);}
a.push({name:n,value:v,type:el.type,required:el.required});}}
if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name;if(n&&!input.disabled&&input.type=='image'){a.push({name:n,value:$input.val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}
return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n){return;}
var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++){a.push({name:n,value:v[i]});}}
else if(v!==null&&typeof v!='undefined'){a.push({name:this.name,value:v});}});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length)){continue;}
if(v.constructor==Array){$.merge(val,v);}
else{val.push(v);}}
return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(successful===undefined){successful=true;}
if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1)){return null;}
if(tag=='select'){var index=el.selectedIndex;if(index<0){return null;}
var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v){v=(op.attributes&&op.attributes.value&&!(op.attributes.value.specified))?op.text:op.value;}
if(one){return v;}
a.push(v);}}
return a;}
return $(el).val();};$.fn.clearForm=function(includeHidden){return this.each(function(){$('input,select,textarea',this).clearFields(includeHidden);});};$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(re.test(t)||tag=='textarea'){this.value='';}
else if(t=='checkbox'||t=='radio'){this.checked=false;}
else if(tag=='select'){this.selectedIndex=-1;}
else if(t=="file"){if(/MSIE/.test(navigator.userAgent)){$(this).replaceWith($(this).clone(true));}else{$(this).val('');}}
else if(includeHidden){if((includeHidden===true&&/hidden/.test(t))||(typeof includeHidden=='string'&&$(this).is(includeHidden))){this.value='';}}});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType)){this.reset();}});};$.fn.enable=function(b){if(b===undefined){b=true;}
return this.each(function(){this.disabled=!b;});};$.fn.selected=function(select){if(select===undefined){select=true;}
return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio'){this.checked=select;}
else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}
this.selected=select;}});};$.fn.ajaxSubmit.debug=false;function log(){if(!$.fn.ajaxSubmit.debug){return;}
var msg='[jquery.form] '+Array.prototype.join.call(arguments,'');if(window.console&&window.console.log){window.console.log(msg);}
else if(window.opera&&window.opera.postError){window.opera.postError(msg);}}}));var apiSearchParams=apiSearchParams||{init:function init(currentSearchParameters,mainCategory){if(window.sessionStorage!=='undefined'&&mainCategory=='jobb'){var SEARCH_PARAMETERS="classified_search_parameter_"+mainCategory;var RELATED_ITEM_LIST="classified_related_item_list";var sessionSearchParameters=sessionStorage.getItem(SEARCH_PARAMETERS);if(sessionSearchParameters===null||sessionSearchParameters!=currentSearchParameters){sessionStorage.setItem(SEARCH_PARAMETERS,currentSearchParameters);sessionStorage.removeItem(RELATED_ITEM_LIST);}}}};var api=api||{};api.advancedSearch=function(msg){var municipality="";var mySelectTagJSONObject={"Type":[{"name":"Bofelleskap"},{"name":"Bofellesskap"},{"name":"Boligtomt"},{"name":"Enebolig"},{"name":"Flermannsbolig/Bygårder"},{"name":"Forretningslokale/Butikk"},{"name":"Fritidsbolig"},{"name":"Garasje/Parkering"},{"name":"Gårdsbruk"},{"name":"Hybel"},{"name":"Kontor"},{"name":"Lager"},{"name":"Leilighet"},{"name":"Rekkehus"},{"name":"Småbruk"},{"name":"Tomannsbolig"},{"name":"Annet"},{"name":"Andre"}],"Bolig utland":[{name:"Barbados"},{name:"Belgia"},{name:"Brasil"},{name:"Bulgaria"},{name:"Danmark"},{name:"Frankrike"},{name:"Hellas"},{name:"Italia"},{name:"Kroatia"},{name:"Kypros"},{name:"Montenegro"},{name:"Nederland"},{name:"Polen"},{name:"Portugal"},{name:"Spania"},{name:"Sverige"},{name:"Sør-Afrika"},{name:"Thailand"},{name:"Tsjekkia"},{name:"Tunisia"},{name:"Tyrkia"},{name:"Tyskland"},{name:"USA"},{name:"Ungarn"},{name:"Østerrike"}],"County":[{name:"Akershus"},{name:"Aust-Agder"},{name:"Buskerud"},{name:"Finnmark"},{name:"Hedmark"},{name:"Hordaland"},{name:"Møre og Romsdal"},{name:"Nord-Trøndelag"},{name:"Nordland"},{name:"Oppland"},{name:"Oslo"},{name:"Rogaland"},{name:"Sogn og Fjordane"},{name:"Sør-Trøndelag"},{name:"Telemark"},{name:"Troms"},{name:"Vest-Agder"},{name:"Vestfold"},{name:"Svalbard"},{name:"Østfold"}],"Akershus":[{name:"Asker"},{name:"Aurskog-Høland"},{name:"Bærum"},{name:"Eidsvoll"},{name:"Enebakk"},{name:"Fet"},{name:"Frogn"},{name:"Gjerdrum"},{name:"Hurdal"},{name:"Lørenskog"},{name:"Nannestad"},{name:"Nes"},{name:"Nesodden"},{name:"Nittedal"},{name:"Oppegård"},{name:"Rælingen"},{name:"Skedsmo"},{name:"Ski"},{name:"Sørum"},{name:"Ullensaker"},{name:"Vestby"},{name:"Ås"}],"Aust-Agder":[{name:"Arendal"},{name:"Birkenes"},{name:"Bygland"},{name:"Bykle"},{name:"Evje og Hornnes"},{name:"Froland"},{name:"Gjerstad"},{name:"Grimstad"},{name:"Iveland"},{name:"Lillesand"},{name:"Risør"},{name:"Tvedestrand"},{name:"Valle"},{name:"Vegårshei"},{name:"Åmli"}],"Buskerud":[{name:"Drammen"},{name:"Flå"},{name:"Flesberg"},{name:"Gol"},{name:"Hemsedal"},{name:"Hol"},{name:"Hole"},{name:"Hurum"},{name:"Kongsberg"},{name:"Krødsherad"},{name:"Lier"},{name:"Modum"},{name:"Nedre Eiker"},{name:"Nes"},{name:"Nore og Uvdal"},{name:"Ringerike"},{name:"Rollag"},{name:"Røyken"},{name:"Sigdal"},{name:"Øvre Eiker"},{name:"Ål"}],"Finnmark":[{name:"Alta"},{name:"Båtsfjord"},{name:"Berlevåg"},{name:"Gamvik"},{name:"Hammerfest"},{name:"Hasvik"},{name:"Karasjok"},{name:"Kautokeino"},{name:"Kvalsund"},{name:"Lebesby"},{name:"Loppa"},{name:"Måsøy"},{name:"Nesseby"},{name:"Nordkapp"},{name:"Porsanger"},{name:"Sør-Varanger"},{name:"Tana"},{name:"Vadsø"},{name:"Vardø"}],"Hedmark":[{name:"Alvdal"},{name:"Eidskog"},{name:"Elverum"},{name:"Engerdal"},{name:"Folldal"},{name:"Grue"},{name:"Hamar"},{name:"Kongsvinger"},{name:"Løten"},{name:"Nord-Odal"},{name:"Os"},{name:"Rendalen"},{name:"Ringsaker"},{name:"Sør-Odal"},{name:"Stange"},{name:"Stor-Elvdal"},{name:"Tolga"},{name:"Trysil"},{name:"Tynset"},{name:"Våler"},{name:"Åmot"},{name:"Åsnes"}],"Hordaland":[{name:"Bergen"},{name:"Askøy"},{name:"Austevoll"},{name:"Austrheim"},{name:"Bømlo"},{name:"Eidfjord"},{name:"Etne"},{name:"Fedje"},{name:"Fitjar"},{name:"Fjell"},{name:"Fusa"},{name:"Granvin"},{name:"Jondal"},{name:"Kvam"},{name:"Kvinnherad"},{name:"Lindås"},{name:"Masfjorden"},{name:"Meland"},{name:"Modalen"},{name:"Odda"},{name:"Os"},{name:"Osterøy"},{name:"Radøy"},{name:"Samnanger"},{name:"Stord"},{name:"Sund"},{name:"Sveio"},{name:"Tysnes"},{name:"Ullensvang"},{name:"Ulvik"},{name:"Vaksdal"},{name:"Voss"},{name:"Ølen"},{name:"Øygarden"}],"Møre og Romsdal":[{name:"Aukra"},{name:"Aure"},{name:"Averøy"},{name:"Eide"},{name:"Fræna"},{name:"Frei"},{name:"Giske"},{name:"Gjemnes"},{name:"Halsa"},{name:"Haram"},{name:"Hareid"},{name:"Herøy"},{name:"Kristiansund"},{name:"Midsund"},{name:"Molde"},{name:"Nesset"},{name:"Norddal"},{name:"Rauma"},{name:"Rindal"},{name:"Sande"},{name:"Sandøy"},{name:"Skodje"},{name:"Smøla"},{name:"Stordal"},{name:"Stranda"},{name:"Sula"},{name:"Sunndal"},{name:"Surnadal"},{name:"Sykkylven"},{name:"Tingvoll"},{name:"Tustna"},{name:"Ulstein"},{name:"Vanylven"},{name:"Vestnes"},{name:"Volda"},{name:"Ørskog"},{name:"Ørsta"},{name:"Ålesund"}],"Nordland":[{name:"Alstahaug"},{name:"Andøy"},{name:"Ballangen"},{name:"Beiarn"},{name:"Bindal"},{name:"Bodø"},{name:"Bø"},{name:"Brønnøy"},{name:"Dønna"},{name:"Evenes"},{name:"Fauske"},{name:"Flakstad"},{name:"Gildeskål"},{name:"Grane"},{name:"Hadsel"},{name:"Hamarøy"},{name:"Hattfjelldal"},{name:"Hemnes"},{name:"Herøy"},{name:"Leirfjord"},{name:"Lødingen"},{name:"Lurøy"},{name:"Meløy"},{name:"Moskenes"},{name:"Narvik"},{name:"Nesna"},{name:"Rana"},{name:"Rødøy"},{name:"Røst"},{name:"Saltdal"},{name:"Skjerstad"},{name:"Sortland"},{name:"Steigen"},{name:"Sømna"},{name:"Sørfold"},{name:"Tjeldsund"},{name:"Træna"},{name:"Tysfjord"},{name:"Vågan"},{name:"Værøy"},{name:"Vefsn"},{name:"Vega"},{name:"Vestvågøy"},{name:"Vevelstad"},{name:"Øksnes"}],"Nord-Trøndelag":[{name:"Flatanger"},{name:"Fosnes"},{name:"Frosta"},{name:"Grong"},{name:"Høylandet"},{name:"Inderøy"},{name:"Leka"},{name:"Leksvik"},{name:"Levanger"},{name:"Lierne"},{name:"Meråker"},{name:"Mosvik"},{name:"Namdalseid"},{name:"Namsos"},{name:"Namsskogan"},{name:"Nærøy"},{name:"Overhalla"},{name:"Røyrvik"},{name:"Snåsa"},{name:"Steinkjer"},{name:"Stjørdal"},{name:"Verdal"},{name:"Verran"},{name:"Vikna"}],"Oppland":[{name:"Dovre"},{name:"Etnedal"},{name:"Gausdal"},{name:"Gjøvik"},{name:"Gran"},{name:"Jevnaker"},{name:"Lesja"},{name:"Lillehammer"},{name:"Lom"},{name:"Lunner"},{name:"Nord-Aurdal"},{name:"Nord-Fron"},{name:"Nordre Land"},{name:"Ringebu"},{name:"Sel"},{name:"Skjåk"},{name:"Søndre Land"},{name:"Sør-Aurdal"},{name:"Sør-Fron"},{name:"Vang"},{name:"Vågå"},{name:"Vestre Slidre"},{name:"Vestre Toten"},{name:"Østre Toten"},{name:"Øyer"},{name:"Øystre Slidre"}],"Oslo":[{name:"Alna"},{name:"Bjerke"},{name:"Frogner"},{name:"Gamle Oslo"},{name:"Grorud"},{name:"Grünerløkka"},{name:"Nordre Aker"},{name:"Nordstrand"},{name:"Sagene"},{name:"St. Hanshaugen"},{name:"Stovner"},{name:"Søndre Nordstrand"},{name:"Ullern"},{name:"Vestre Aker"},{name:"Østensjø"}],"Rogaland":[{name:"Bjerkreim"},{name:"Bokn"},{name:"Eigersund"},{name:"Finnøy"},{name:"Forsand"},{name:"Gjesdal"},{name:"Haugesund"},{name:"Hillevåg"},{name:"Hå"},{name:"Hjelmeland"},{name:"Karmøy"},{name:"Klepp"},{name:"Kvitsøy"},{name:"Lund"},{name:"Randaberg"},{name:"Rennesøy"},{name:"Sandnes"},{name:"Sauda"},{name:"Sokndal"},{name:"Sola"},{name:"Stavanger"},{name:"Strand"},{name:"Suldal"},{name:"Time"},{name:"Tysvær"},{name:"Utsira"},{name:"Vindafjord"}],"Sogn og Fjordane":[{name:"Askvoll"},{name:"Aurland"},{name:"Årdal"},{name:"Balestrand"},{name:"Bremanger"},{name:"Eid"},{name:"Fjaler"},{name:"Flora"},{name:"Førde"},{name:"Gaular"},{name:"Gloppen"},{name:"Gulen"},{name:"Hornindal"},{name:"Høyanger"},{name:"Hyllestad"},{name:"Jølster"},{name:"Lærdal"},{name:"Leikanger"},{name:"Luster"},{name:"Naustdal"},{name:"Selje"},{name:"Sogndal"},{name:"Solund"},{name:"Stryn"},{name:"Vågsøy"},{name:"Vik"}],"Sør-Trøndelag":[{name:"Agdenes"},{name:"Bjugn"},{name:"Frøya"},{name:"Hemne"},{name:"Hitra"},{name:"Holtålen"},{name:"Klæbu"},{name:"Malvik"},{name:"Meldal"},{name:"Melhus"},{name:"Midtre Gauldal"},{name:"Oppdal"},{name:"Orkdal"},{name:"Osen"},{name:"Rennebu"},{name:"Rissa"},{name:"Roan"},{name:"Røros"},{name:"Selbu"},{name:"Skaun"},{name:"Snillfjord"},{name:"Tydal"},{name:"Trondheim"},{name:"Ørland"},{name:"Åfjord"}],"Østfold":[{name:"Aremark"},{name:"Askim"},{name:"Eidsberg"},{name:"Fredrikstad"},{name:"Halden"},{name:"Hobøl"},{name:"Hvaler"},{name:"Marker"},{name:"Moss"},{name:"Rakkestad"},{name:"Råde"},{name:"Rømskog"},{name:"Rygge"},{name:"Sarpsborg"},{name:"Skiptvet"},{name:"Spydeberg"},{name:"Trøgstad"},{name:"Våler"}],"Svalbard":[{name:"Longyearbyen"},{name:"Isfjord på Svalbard"},{name:"Ny-Ålesund"},{name:"Sveagruva"},{name:"Hornsund"},{name:"Barentsburg"},{name:"Pyramiden"}],"Telemark":[{name:"Bamble"},{name:"Bø"},{name:"Drangedal"},{name:"Fyresdal"},{name:"Hjartdal"},{name:"Kragerø"},{name:"Kviteseid"},{name:"Nissedal"},{name:"Nome"},{name:"Notodden"},{name:"Porsgrunn"},{name:"Sauherad"},{name:"Seljord"},{name:"Siljan"},{name:"Skien"},{name:"Tinn"},{name:"Tokke"},{name:"Vinje"}],"Troms":[{name:"Balsfjord"},{name:"Bardu"},{name:"Berg"},{name:"Bjarkøy"},{name:"Dyrøy"},{name:"Gratangen"},{name:"Harstad"},{name:"Ibestad"},{name:"Karlsøy"},{name:"Kåfjord"},{name:"Kvæfjord"},{name:"Kvænangen"},{name:"Lavangen"},{name:"Lenvik"},{name:"Lyngen"},{name:"Målselv"},{name:"Nordreisa"},{name:"Salangen"},{name:"Skånland"},{name:"Skjervøy"},{name:"Sørreisa"},{name:"Storfjord"},{name:"Torsken"},{name:"Tranøy"},{name:"Tromsø"}],"Vest-Agder":[{name:"Kristiansand"},{name:"Audnedal"},{name:"Farsund"},{name:"Flekkefjord"},{name:"Hægebostad"},{name:"Kvinesdal"},{name:"Lindesnes"},{name:"Lyngdal"},{name:"Mandal"},{name:"Marnardal"},{name:"Sirdal"},{name:"Songdalen"},{name:"Søgne"},{name:"Vennesla"},{name:"Åseral"}],"Vestfold":[{name:"Andebu"},{name:"Horten"},{name:"Hof"},{name:"Holmestrand"},{name:"Lardal"},{name:"Larvik"},{name:"Nøtterøy"},{name:"Ramnes"},{name:"Re"},{name:"Sande"},{name:"Sandefjord"},{name:"Stokke"},{name:"Svelvik"},{name:"Tjøme"},{name:"Tønsberg"},{name:"Våle"}]};function setDefaultValueAndActivateLocalNewspaper(){if(msg.isLocalGeo){localNewspaper(msg.localads);}else{$('#municipalitiesAdvancedSearch').append('<option value="">'+msg.place+'</option>');$('#municipalitiesAdvancedSearch').attr('disabled','disabled');}}
setDefaultValueAndActivateLocalNewspaper();function populateCounties(){if(msg.isLocalGeo){$('#countiesAdvancedSearch').append('<option value="local">'+msg.localads+'</option>');$('#countiesAdvancedSearch').append('<option value="separator" disabled="">'+msg.separator+'</option>');}
$('#countiesAdvancedSearch').append('<option value="norway">'+msg.norway+'</option>');$('#countiesAdvancedSearch').append('<option value="abroad">'+msg.abroad+'</option>');$('#countiesAdvancedSearch').append('<option value="separator" disabled="">'+msg.separator+'</option>');$.each(mySelectTagJSONObject.County,function(i,counties){$('#countiesAdvancedSearch').append('<option value="'+counties.name+'">'+counties.name+'</option>');});}
populateCounties();$('#municipalitiesAdvancedSearch').mouseup(function(){setLayoutInfo(false);var abroad=$('#countiesAdvancedSearch option:selected').text();var country=$('#municipalitiesAdvancedSearch option:selected').text();if(abroad==msg.abroad){if(country==msg.country){setLayoutInfo(true);}}});$('#municipalitiesAdvancedSearch').change(function(){var locatedtext=$('#countiesAdvancedSearch option:selected').text();if(locatedtext==msg.localads){$('#geoAdvancedSearch').attr('name','municipality');}});$('#countiesAdvancedSearch').change(function(){setLayoutInfo(false);$('#geoAdvancedSearch').attr('name','norGeo');$('#localGeoAdvancedSearch').attr('value','false');var counties=$('#countiesAdvancedSearch option:selected').text();if(msg.isLocalGeo){localNewspaper(counties);}
allNorgeAndAbroad(counties);});function localNewspaper(counties){if(counties==msg.localads){$('#municipalitiesAdvancedSearch').find('option').remove().end().append('<option value="">'+msg.municipalities+'</option>');var arraymunicipalities=msg.localMunicipalities.split(",");$.each(arraymunicipalities,function(i,municipalities){var arraycounty=municipalities.split("/");$('#municipalitiesAdvancedSearch').append('<option value="'+arraycounty[arraycounty.length-1]+'">'+arraycounty[arraycounty.length-1]+'</option>');});$('#municipalitiesAdvancedSearch').removeAttr('disabled');}}
function allNorgeAndAbroad(counties){if(counties==msg.norway){$('#municipalitiesAdvancedSearch').find('option').remove().end().append('<option value="">'+msg.place+'</option>');$('#municipalitiesAdvancedSearch').attr('disabled','disabled');}if(counties==msg.abroad){setLayoutInfo(true);$('#geoAdvancedSearch').attr('name','foreignGeo');if(mySelectTagJSONObject.hasOwnProperty(counties)){$('#municipalitiesAdvancedSearch').find('option').remove().end().append('<option value="">'+msg.country+'</option>');$.each(mySelectTagJSONObject[counties],function(i,municipalities){$('#municipalitiesAdvancedSearch').append('<option value="'+municipalities.name+'">'+municipalities.name+'</option>');});$('#municipalitiesAdvancedSearch').removeAttr('disabled');}}else{if(mySelectTagJSONObject.hasOwnProperty(counties)){$('#municipalitiesAdvancedSearch').find('option').remove().end().append('<option value="">'+msg.place+'</option>');$.each(mySelectTagJSONObject[counties],function(i,municipalities){$('#municipalitiesAdvancedSearch').append('<option value="'+municipalities.name+'">'+municipalities.name+'</option>');});$('#municipalitiesAdvancedSearch').removeAttr('disabled');}}}
function setLayoutInfo(hasInfo){if(hasInfo){$('#infoId').addClass('info');$('#apiAdvancedSearchButton').addClass('disabled');$('#apiAdvancedSearchButton').attr('disabled','disabled');$('#apiEiendomAdvancedSearch').css({'height':'225px'});$('#infoId').show();}else{$('#apiAdvancedSearchButton').removeAttr('disabled');$('#apiAdvancedSearchButton').removeClass('disabled');$('#apiEiendomAdvancedSearch').css({'height':'212px'});$('#infoId').hide();}}
$.each(mySelectTagJSONObject.Type,function(i,type){$('#typeAdvancedSearch').append('<option value="'+type.name+'">'+type.name+'</option>');});$('#typeAdvancedSearch').change(function(){var typehome=$('#typeAdvancedSearch option:selected').text();if(typehome==msg.typehome){$('#typeAdvancedSearch').attr('name',"").attr('value',"");}});function validateSelectTypeVal(name){var type=$('#'+name+'AdvancedSearch option:selected').text();if($('#'+name+'AdvancedSearch option:selected').val()!=''){return type;}else{return"";}}
function validateSelectLocatedVal(counties,municipalities){var regiontext=$('#'+municipalities+'AdvancedSearch option:selected').text();var regionval=$('#'+municipalities+'AdvancedSearch option:selected').val();var geotype=$('#geoAdvancedSearch').attr('name');$('#localGeoAdvancedSearch').attr('value','false');if(geotype=='municipality'){$('#localGeoAdvancedSearch').attr('value','true');var locatedtext=$('#'+counties+'AdvancedSearch option:selected').text();var locatedval=$('#'+counties+'AdvancedSearch option:selected').val();if(regionval!=''&&locatedtext==msg.localads){return regiontext;}else{return"";}}else if(geotype=='norGeo'){var locatedtext=$('#'+counties+'AdvancedSearch option:selected').text();var locatedval=$('#'+counties+'AdvancedSearch option:selected').val();if(locatedval!=''&&locatedtext!=msg.norway&&locatedtext!=msg.localads&&regionval!=''&&regiontext!=msg.place&&regiontext!=msg.municipalities){return locatedtext+"/"+regiontext;}else if(locatedval!=''&&locatedtext!=msg.norway&&locatedtext!=msg.localads){return locatedtext;}else{return"";}}else{if(regionval!=''&&regiontext!=msg.country){return regiontext;}else{return"";}}}
function cleanAllFields(){$('#countiesAdvancedSearch').val($('#countiesAdvancedSearch option:first').val());$('#municipalitiesAdvancedSearch').val($('#municipalitiesAdvancedSearch option:first').val());$('#typeAdvancedSearch').val($('#typeAdvancedSearch option:first').val());$('#typeAdvancedSearch').removeAttr('name');$('#saleAdvancedSearch').attr('checked','checked');$('#priceFromAdvancedSearch').attr('value','');$('#priceToAdvancedSearch').attr('value','');$('#priceFromAdvancedSearch').removeAttr('name');$('#priceToAdvancedSearch').removeAttr('name');$('#bedroomsFromAdvancedSearch').attr('value','');$('#bedroomsFromAdvancedSearch').removeAttr('name');$('#textAdvancedSearch').attr('value','');$('#text').removeAttr('name');}
function unPunctate(value){return value.replace((/\./g),'');}
function remOrAddParms(value,id,name){if(value!=""){$('#'+id).attr('value',value).attr('name',name);}else{$('#'+id).removeAttr("name");}}
$('#apiEiendomAdvancedSearch').submit(function(){var located=validateSelectLocatedVal('counties','municipalities');var geotype=$('#geoAdvancedSearch').attr('name');remOrAddParms(located,'geoAdvancedSearch',geotype);var typehome=validateSelectTypeVal('type');remOrAddParms(typehome,'typeAdvancedSearch','type');if($('#rentAdvancedSearch:checked').val()!=undefined){var from=unPunctate($('#priceFromAdvancedSearch').val());remOrAddParms(from,'priceFromAdvancedSearch','monthlyRentFrom');var to=unPunctate($('#priceToAdvancedSearch').val());remOrAddParms(to,'priceToAdvancedSearch','monthlyRentTo');}
if($('#saleAdvancedSearch:checked').val()!=undefined){var from=unPunctate($('#priceFromAdvancedSearch').val());remOrAddParms(from,'priceFromAdvancedSearch','priceFrom');var to=unPunctate($('#priceToAdvancedSearch').val());remOrAddParms(to,'priceToAdvancedSearch','priceTo');}
var room=$('#bedroomsFromAdvancedSearch').val();remOrAddParms(room,'bedroomsFromAdvancedSearch','bedroomsFrom');var text=$('#textAdvancedSearch').val();remOrAddParms(text,'textAdvancedSearch','text');var locatedtext=$('#countiesAdvancedSearch option:selected').text();if(locatedtext==msg.localads){$('#localGeoAdvancedSearch').attr('value','true');}
return true;});$('#searchsalelabel').click(function(){$('#priceFromAdvancedSearch').attr('name','priceFrom');$('#priceToAdvancedSearch').attr('name','priceTo');});$('#saleAdvancedSearch').click(function(){$('#priceFromAdvancedSearch').attr('name','priceFrom');$('#priceToAdvancedSearch').attr('name','priceTo');});$('#searchrentlabel').click(function(){$('#priceFromAdvancedSearch').attr('name','monthlyRentFrom');$('#priceToAdvancedSearch').attr('name','monthlyRentTo');});$('#rentAdvancedSearch').click(function(){$('#priceFromAdvancedSearch').attr('name','monthlyRentFrom');$('#priceToAdvancedSearch').attr('name','monthlyRentTo');});cleanAllFields();};api.priceValidator=function(id){var el=document.getElementById(id),price=priceValidator();el.onblur=function(ev){var value=price.pretty(ev);};el.onkeyup=function(ev){var value=price.validate(ev.target.value);if(value){setLayoutError(false,ev);}else{setLayoutError(true,ev);}};function setLayoutError(hasError,ev){if(hasError){$('#'+ev.target.id).addClass('error');$('#apiAdvancedSearchButton').addClass('disabled');$('#apiAdvancedSearchButton').attr('disabled','disabled');$('#errorId').show();}else{var inputIds=new Array('priceFromAdvancedSearch','priceToAdvancedSearch','bedroomsFromAdvancedSearch');var isRemHide=true;for(id in inputIds){if(ev.target.id==inputIds[id]){$('#'+ev.target.id).removeClass('error');}else{if($('#'+inputIds[id]).hasClass('error')){isRemHide=false}}}
if(isRemHide){$('#apiAdvancedSearchButton').removeAttr('disabled');$('#apiAdvancedSearchButton').removeClass('disabled');$('#errorId').hide();}}}
function priceValidator(){function validateDigit(value){return(/^\d+$/).test(value);}
function unPunctate(value){return value.replace((/\./g),'');}
function punctate(value,punctator){var expression=new RegExp('(-?[0-9]+)([0-9]{3})'),result=[],val=expression.exec(value),previous;while(val){if(val){previous=val;result.unshift(val[2]);val=expression.exec(val[1]);}else{break;}}
if(previous){result.unshift(previous[1]);}
return result.join(punctator)?result.join(punctator):value;}
return{validate:function validate(value){var val=unPunctate(value);if(validateDigit(val)||val===''){return true;}},pretty:function pretty(ev){var value=ev.target.value,unPunctatedValue=unPunctate(value),prettyValue;if(validateDigit(unPunctatedValue)){prettyValue=punctate(unPunctatedValue,'.');ev.target.value=prettyValue;return{numericValue:unPunctatedValue,prettyValue:prettyValue}}
return{numericValue:-1,prettyValue:-1}}}}};api.brokerguide_disableMunicipalities=function(){$('#municipalities').attr('disabled','disabled');}
api.brokerguide_enableMunicipalities=function(){$('#municipalities').removeAttr('disabled');}
api.brokerguide_createOptionHTML=function(value,label){return'<option value="'+value+'">'+label+'</option>';}
api.brokerguide_resultlist_disableMunicipalities=function(){$('#municipalities').attr('disabled','disabled');}
api.brokerguide_resultlist_enableMunicipalities=function(){$('#municipalities').removeAttr('disabled');}
api.brokerguide_resultlist_createOption=function(value,label){return'<option value="'+value+'">'+label+'</option>';}
auth.e_searchtop={};auth.e_searchtop.login={userMenu:function userMenu(isLoggedIn,userEmail){var user=document.getElementById("apiUser");var logout=document.getElementById("apiUserActionLogout");var expand=document.getElementById("apiUserActions");var menu=document.getElementById("apiUserActionList");switch(isLoggedIn){case false:expand.style.display="block";logout.style.display="none";menu.style.display="none";expand.className="apiActionListCollapsed";expand.style.display="block";user.onclick=function(){auth.displayLogin()};break;case true:expand.style.display="block";expand.className="apiActionListCollapsed";user.title=userEmail;user.innerHTML=auth.utils.shorten(userEmail,25);user.className+="apiUserDropdown";expand.style.display="block";logout.onclick=function(){auth.logOut($('.apiEiendomsnettSearchAndLinks'));};break;default:break;}
$(function(){$("body").click(function(e){if($(e.target).parents("#apiUserActions").size()){if(expand.className==="apiActionListExpanded"){expand.className="apiActionListCollapsed";}else{expand.className="apiActionListExpanded";}}else{expand.className="apiActionListCollapsed";}});});},init:function init(localJanus,janusUrl,useSSL,publicationId){auth.initLogin(this.userMenu,localJanus,janusUrl,useSSL,publicationId);if(auth.isLoggedIn()){auth.renderLoggedIn();}else{auth.renderLogin();}}};var api=api||{};api.classifiedUrlParam=function(name){var results=new RegExp('[\\?&]'+name+'=([^&#]*)').exec(window.location.href);if(results){return results[1]||0;}};var deviceIphone="iphone";var deviceIpod="ipod";var deviceS60="series60";var deviceSymbian="symbian";var engineWebKit="webkit";var deviceAndroid="android";var deviceWinMob="windows ce";var deviceBB="blackberry";var devicePalm="palm";var deviceWebOs="weboS";var apiNavigator=navigator.userAgent.toLowerCase();function detectIphone(){return(apiNavigator.search(deviceIphone)>-1);}
function detectIpod(){return(apiNavigator.search(deviceIpod)>-1);}
function detectS60OssBrowser(){if(apiNavigator.search(engineWebKit)>-1){return((apiNavigator.search(deviceS60)>-1||apiNavigator.search(deviceSymbian)>-1))}
return false;}
function detectAndroid(){return(apiNavigator.search(deviceAndroid)>-1);}
function detectWindowsMobile(){return(apiNavigator.search(deviceWinMob)>-1);}
function detectBlackBerry(){return(apiNavigator.search(deviceBB)>-1);}
function detectPalmOS(){return(apiNavigator.search(devicePalm)>-1);}
function detectWebOS(){return(apiNavigator.search(deviceWebOs)>-1);}
function apiDetectPhoneLink(){if(detectIphone()||detectIpod()||detectS60OssBrowser()||detectAndroid()||detectWindowsMobile()||detectBlackBerry()||detectPalmOS()||detectWebOS()){var linkEl=document.getElementById('apiEiendomsnettMobil');linkEl.style.display="block";}}
apiLivePluginId=0;api.football_live=function(p){this.id=p.id;this.status=p.status;this.messages=p.messages;this.el=$("div.apiFootballLive")[$("div.apiFootballLive").length-1];var countdownSpans=$('span.countdown');this.countdownContainer=countdownSpans[countdownSpans.length-1];this.prefixContainer=countdownSpans[0];this.setClassNameForWidth.call(this);$(window).resize((function(o){return function(){o.setClassNameForWidth.call(o);}})(this));this.matchTime=p.matchTime;if(this.status==="before"){this.countDown();}};api.liveMap={};api.football_live.prototype.countDown=function(){var today=new Date();var todaysDate=(new Date(today.getFullYear(),today.getMonth(),today.getDate(),today.getHours(),today.getMinutes(),today.getSeconds())).getTime();var targetDate=new Date(this.matchTime);var timeLeft=Math.round((targetDate-todaysDate)/(1000));if(timeLeft<=0){this.switch_to_running();}else{var days=Math.floor(timeLeft/(60*60*24));timeLeft%=(60*60*24);var hours=Math.floor(timeLeft/(60*60));timeLeft%=(60*60);var minutes=Math.floor(timeLeft/60);timeLeft%=(60);var seconds=timeLeft;var newText=days+' '+((days===1)?this.messages.day:this.messages.days)+' '+
hours+' '+((hours===1)?this.messages.hour:this.messages.hours)+' '+
minutes+' '+this.messages.minutes+' '+
seconds+' '+this.messages.seconds;this.prefixContainer.innerHTML=this.messages.beforeText;this.countdownContainer.innerHTML=newText;setTimeout('api.liveMap['+this.id+'].countDown()',999);}};api.football_live.prototype.switch_to_running=function(){this.prefixContainer.innerHTML=this.messages.runningText;this.countdownContainer.innerHTML='';};api.football_live.prototype.log=function(){console.log.apply(console,arguments)};api.football_live.prototype.setClassNameForWidth=function(){var width=this.el.offsetWidth;var cls=this.el.className;if(cls.indexOf("tiny")>-1){this.el.className=this.el.className.replace("tiny","");}
if(cls.indexOf("narrow")>-1){this.el.className=this.el.className.replace("narrow","");}
if(cls.indexOf("fullWidth")>-1){this.el.className=this.el.className.replace("fullWidth","");}
if(width<=220){this.el.className+="tiny";}else if(width>220&&width<510){this.el.className+="narrow";}else if(width>=980){this.el.className+="fullWidth";}};function apiFootballMagicShowTab(tabLinkName){apiFootballMagicHideTabs();$(".api .footballMagic .tabContainer #tab_"+tabLinkName).show();$(".api .footballMagic .menuContainer #"+tabLinkName).addClass("current");}
function apiFootballMagicHideTabs(){$(".api .footballMagic .tabContainer").children('div').hide();$(".api .footballMagic .menuContainer a").removeClass("current");}
function apiFootballPlayercardDisplayProfile(elementId){$('.api .footballPlayercard #profileContainer dl').hide();$('.api .footballPlayercard #'+elementId).show();}
function apiTeamsAndPlayersSetSelectTeam(teamId){$('#teams').find('a').removeClass("selectedTeam");$('#team_'+teamId).addClass("selectedTeam");$('#moreInfo').children().hide();$('#moreInfo_'+teamId).show();}
api.magazineDeck=function(params){this.elems=[]};api.magazineDeck.prototype.addElem=function(element){if(this.elems.length===0){element.className+=' expanded'}else{element.className+=' collapsed'}
element.onmouseover=function(e){for(var i=0;i<magazineDeck.elems.length;i++){var edd=magazineDeck.elems[i];if(edd.isSameNode(this)){edd.className=edd.className.replace("collapsed","expanded");}else{edd.className=edd.className.replace("expanded","collapsed");}}};this.elems.push(element);};api.magazineDeck=function(params){this.elems=[]};api.magazineDeck.prototype.addElem=function(element){if(this.elems.length===0){element.className+=' expanded'}else{element.className+=' collapsed'}
element.onmouseover=function(e){for(var i=0;i<magazineDeck.elems.length;i++){var edd=magazineDeck.elems[i];if(edd.isSameNode(this)){edd.className=edd.className.replace("collapsed","expanded");}else{edd.className=edd.className.replace("expanded","collapsed");}}};this.elems.push(element);};api.norskTippingBox=function(siteUrl,showOnlyLangoddsen,showMix,showComments){var now=new Date();var container=$("div.lottoBox");this.siteUrl=siteUrl;this.showOnlyLangoddsen=showOnlyLangoddsen;this.showMix=showMix;var format="nettboard";if(showComments){format="skyscraper";}
var dayOfWeek=now.getDay();var hour=now.getHours();var vikingLottoUrl="https://www.norsk-tipping.no/spill/viking_lotto?WT.mc_id=apdm_direkte";var lottoUrl="https://www.norsk-tipping.no/spill/lotto?WT.mc_id=apdm_direkte";var kenoUrl="https://www.norsk-tipping.no/spill/keno?WT.mc_id=apdm_direkte";var url="";var showElement="";if(this.showOnlyLangoddsen&&hour>=8&&hour<20){showElement="langoddsen";}else if(this.showMix){if(hour>=8&&hour<18&&dayOfWeek<=3){showElement="vikingLotto";url=vikingLottoUrl;}else if(hour>=8&&hour<18&&dayOfWeek<=6){showElement="lotto";url=lottoUrl;}else if(hour>=8&&hour<18&&dayOfWeek==7){showElement="langoddsen";}else if(hour>=18&&hour<20){showElement="keno";url=kenoUrl;}}
if(showElement=="langoddsen"&&format=="skyscraper"){$(container).addClass("apiLangodds skyscraper");$(container).removeClass("lottoBox");var div=document.createElement("div");div.id="NTWidgetFlashBox5ff584ec-20b6-4b1e-81a8-6ec0e534bfe9";div.style.height="480px";div.style.width="180px";div.style.marginLeft="auto";div.style.marginRight="auto";div.innerHTML="<div id='NTWidgetFlash42fd0c19-e19a-4451-89d7-56665d313493' style='width:100%; height:100%;'><div "+"class='NTWidgetFlashBoxText'><p style='color:#fff; font-weight:bold; text-shadow:#333 1px 2px 3px; padding:0; "+"margin:0; font-size:14px; position:relative; top:45%;'>Norsk Tipping</p></div></div>";container.append(div);function OnLoad42fd0c19_e19a_4451_89d7_56665d313493(){if(typeof(window['NTWidgetFlashWrite'])!='undefined')
NTWidgetFlashWrite('42fd0c19-e19a-4451-89d7-56665d313493',arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);else
setTimeout("OnLoad42fd0c19_e19a_4451_89d7_56665d313493('"+arguments[0]+"','"+arguments[1]+"','"+arguments[2]+"','"+arguments[3]+"')",100);}
OnLoad42fd0c19_e19a_4451_89d7_56665d313493('https://widget.tippebannere.no/WidgetXML.ashx?id=42fd0c19-e19a-4451-89d7-56665d313493','https://widget.tippebannere.no/loader.swf?v=5','1797','APDM','skyscraper','https://widget.tippebannere.no/Moduler/ODDSEN_Fallback_180x500.jpg');}
if(showElement=="langoddsen"&&format=="nettboard"){$(container).addClass("apiLangodds nettboard");$(container).removeClass("lottoBox");var div=document.createElement("div");div.id="NTWidgetFlashBoxde58625e-3f5a-483c-9ff2-01f8431dc9ee";div.style.height="485px";div.style.width="458px";div.style.marginLeft="auto";div.style.marginRight="auto";div.innerHTML="<div id='NTWidgetFlashde58625e-3f5a-483c-9ff2-01f8431dc9ee' style='width:100%; height:100%;'><div "+"class='NTWidgetFlashBoxText'><p style='color:#fff; font-weight:bold; text-shadow:#333 1px 2px 3px; padding:0; "+"margin:0; font-size:14px; position:relative; top:45%;'>Norsk Tipping</p></div></div>";container.append(div);function OnLoadde58625e_3f5a_483c_9ff2_01f8431dc9ee(){if(typeof(window['NTWidgetFlashWrite'])!='undefined')
NTWidgetFlashWrite('de58625e-3f5a-483c-9ff2-01f8431dc9ee',arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);else
setTimeout("OnLoadde58625e_3f5a_483c_9ff2_01f8431dc9ee('"+arguments[0]+"','"+arguments[1]+"','"+arguments[2]+"','"+arguments[3]+"')",100);}
OnLoadde58625e_3f5a_483c_9ff2_01f8431dc9ee('https://widget.tippebannere.no/WidgetXML.ashx?id=de58625e-3f5a-483c-9ff2-01f8431dc9ee','https://widget.tippebannere.no/loader.swf?v=5','1758','APDM','nettboard','https://widget.tippebannere.no/Moduler/ODDSEN_Fallback_468x400.jpg');}
if(showElement=="vikingLotto"||showElement=="lotto"||showElement=="keno"){var gameLink=document.createElement("a");gameLink.className=showElement;gameLink.href=url;container.append(gameLink);container.addClass(format);}}
api.norskTippingBox_v2=function(siteUrl,showComments){var now=new Date();var container=$("div.lottoBox_v2");this.siteUrl=siteUrl;var format="nettboard";if(showComments){format="skyscraper";}
var dayOfMonth=now.getDate();var hour=now.getHours();var minute=now.getMinutes();var url="https://www.norsk-tipping.no/spill/viking_lotto?WT.mc_id=apdm-vikinglotto-banner ";var showElement="";if(dayOfMonth>21||(dayOfMonth==21&&hour>17)){showElement="expired";}else if(dayOfMonth>14||(dayOfMonth==14&&hour>17)){showElement="ad_version_2";}else if(minute%2==1){showElement="ad_version_1";}else{showElement="ad_version_2";}
if(format=="nettboard"){var gameLink=document.createElement("a");gameLink.className=showElement;gameLink.href=url;container.append(gameLink);container.addClass(format);}
if(format=="skyscraper"){var gameLink=document.createElement("a");gameLink.className=showElement;gameLink.href=url;container.append(gameLink);container.addClass(format);}}
api.norskTippingBox_v3=function(siteUrl,showComments,gfxUrl,clickUrl){var container=$("div.lottoBox_v3");this.clickUrl=clickUrl;this.siteUrl=siteUrl;this.gfxUrl=gfxUrl;var flashvars={};var params={};params.allowScriptAccess="always";if(showComments){flashvars.clickTAG=encodeURIComponent('http://adserver.adtech.de/?adlink|3.0|1361|4186940|1|16|AdId=8942101;BnId=1;link='+clickUrl);swfobject.embedSWF(gfxUrl+"/resources/web/flash/norsktipping/WoxBannerHolder-180x500.swf","norskTippingFlashContainer","180","500","9.0.0",false,flashvars,params);container.addClass("skyscraper");}
else{flashvars.clickTAG=encodeURIComponent('http://adserver.adtech.de/?adlink|3.0|1361|4186940|1|16|AdId=8942101;BnId=1;link='+clickUrl);swfobject.embedSWF(gfxUrl+"/resources/web/flash/norsktipping/WoxBannerHolder-580x500.swf","norskTippingFlashContainer","580","500","9.0.0",false,flashvars,params);container.addClass("nettboard");}}
api.questback=function(p){for(var i in p)this[i]=p[i];this.popup=api.$("qbPopup");if(document.all)this.popup.className="apiIe";this.cookie=api.cookie;this.button={apply:api.$("apiQBApply"),close1:api.$("apiQBClose1"),close2:api.$("apiQBClose2")};if(!this.cookie)return false;if(!this.cookie.isOn())return false;this.load();};api.questback.prototype.load=function(){if(!(this.cookie.get(this.cookieName)=="false")){var self=this;this.button.apply.onclick=function(){self.apply();};this.button.close1.onclick=function(){self.close();};this.button.close2.onclick=function(){self.close();};this.show();this.cookie.set(this.cookieName,"false",this.short,"/");this.button.apply.focus();}};api.questback.prototype.close=function(){this.hide();this.cookie.del(this.cookieName,"/");this.cookie.set(this.cookieName,"false",this.short,"/");};api.questback.prototype.apply=function(){this.hide();this.cookie.del(this.cookieName,"/");this.cookie.set(this.cookieName,"false",this.long,"/");window.open(this.url);};api.questback.prototype.show=function(){this.popup.style.display="block";};api.questback.prototype.hide=function(){this.popup.style.display="none";};var api=api||{};api.pageRefresh={cookieName:"refresh",previouslyRefreshed:0,refreshTime:10,init:function(refreshTime){this.refreshTime=refreshTime;var refreshCounterInCookie=api.cookie.get(this.cookieName);if(refreshCounterInCookie!=false&&refreshCounterInCookie!=null){this.previouslyRefreshed=parseInt(refreshCounterInCookie);api.cookie.set(this.cookieName,0,'/');api.cookie.del(this.cookieName,'/');}
if(this.refreshTime>0){var self=this;this.timeout=setTimeout(function(){self.reload();},this.refreshTime*1000);}},reload:function(){api.cookie.set(this.cookieName,this.previouslyRefreshed+1,1,'/');window.location.reload();},clear:function(){if(this.timeout){clearTimeout(this.timeout);this.refreshTime=0;this.timeout=null;}}};api.subscriptionbox=function(param,pageType){for(var i in param){if(param.hasOwnProperty(i)){this[i]=param[i];}}
this.pageType=pageType;this.activate();};api.subscriptionbox.prototype.activate=function(){$(" .apiSubscriptionBanner",this.el).bind("click",{pageType:this.pageType,labels:this.labels,link:this.link},function(event){if(event.data.link.length>0){try{var a=api.bh("a",{href:"javascript:;"});ns_onclick(a,event.data.link,"abo.forside.eksternlink",'clickout',event);}catch(e){}}
else if($(" .apiSubscriptionForm",this.el).is(":hidden")){var formClickLogstring=(event.data.pageType=='article')?"abo.artikkel.aapne":"abo.forside.aapne";try{var a=api.bh("a",{href:"javascript:;"});ns_onclick(a,'',formClickLogstring,'clickout',event);}catch(e){}
$(" .apiSubscriptionForm",this.el).slideDown("fast");$(" .orderPromoteButton",this.el).hide();$("#submit",this.el).bind("click",{pageType:event.data.pageType,labels:event.data.labels},function(event){var errorMsg='';var hasError=false;var emailReg=/^([\w\-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;var mobileNumber=/^((\+\d{2})?|(00\d{2})?)\d{2}(?:\d{2}){3}$/;var postalCode=/^\d{4}$/;var emailFromVal=$(" #email").val();if(emailFromVal==''){errorMsg=event.data.labels['email_empty'];$(" #subscriptionFormErrorMsg").html(errorMsg);$(" #email").focus();hasError=true;}else if(!emailReg.test(emailFromVal)){errorMsg=event.data.labels['email_invalid'];$(" #subscriptionFormErrorMsg").html(errorMsg);$(" #email").focus();hasError=true;}
var mobileVal=$(" #phone").val().replace(" ","");if(mobileVal==''){errorMsg=event.data.labels['phone_empty'];$(" #subscriptionFormErrorMsg").html(errorMsg);$(" #phone").focus();hasError=true;}else if(!mobileNumber.test(mobileVal)){errorMsg=event.data.labels['phone_invalid'];$(" #subscriptionFormErrorMsg").html(errorMsg);$(" #phone").focus();hasError=true;}
var cityVal=$("#city").val();if(cityVal==''){errorMsg=event.data.labels['city_empty'];$(" #subscriptionFormErrorMsg").html(errorMsg);$(" #city").focus();hasError=true;}
var postalCodeVal=$("#postalcode").val();if(postalCodeVal==''){errorMsg=event.data.labels['postalcode_empty'];$(" #subscriptionFormErrorMsg").html(errorMsg);$(" #postalcode").focus();hasError=true;}else if(!postalCode.test(postalCodeVal)){errorMsg=event.data.labels['postalcode_invalid'];$(" #subscriptionFormErrorMsg").html(errorMsg);$(" #postalcode").focus();hasError=true;}
var surnameVal=$(" #surname").val();if(surnameVal==''){errorMsg=event.data.labels['surname_empty'];$(" #subscriptionFormErrorMsg").html(errorMsg);$(" #surname").focus();hasError=true;}
var firstnameVal=$("#firstname").val();if(firstnameVal==''){errorMsg=event.data.labels['firstname_empty'];$(" #subscriptionFormErrorMsg").html(errorMsg);$(" #firstname").focus();hasError=true;}
var chosenOffer='';if($('input[name=offers]').length>0){chosenOffer=$('input[name=offers]:checked').val();if(chosenOffer==''||$('input[name=offers]:checked').length<=0){errorMsg=event.data.labels['offers_empty'];$(" #subscriptionFormErrorMsg").html(errorMsg);$('input[name=offers]').focus();hasError=true;}}
var adressVal=$("#adress").val();var entranceVal=$("#entrance").val();var floorVal=$("#floor").val();if(!hasError){var subscriptionLogstring=(event.data.pageType=='article')?"abo.artikkel.bestill":"abo.forside.bestill";var dataString='firstname='+firstnameVal+'&surname='+surnameVal+'&phone='+mobileVal+'&email='+emailFromVal
+'&adress='+adressVal+'&entrance='+entranceVal+"&floor="+floorVal+"&postalcode="+postalCodeVal+"&city="+cityVal+"&chosenOffer="+chosenOffer;$.ajax({type:"POST",url:"/service/post/subscriptionrequest",data:dataString,success:function(){var confirmationText=event.data.labels['confirmation_text'];$('.apiSubscriptionBanner',this.el).html("<div class='apisubscriptionFeedback'></div>");$('.apisubscriptionFeedback',this.el).html("<h2>"+confirmationText+"</h2>");$('.apiSubscriptionForm',this.el).remove();$('.orderPromoteButton',this.el).remove();try{var a=api.bh("a",{href:"javascript:;"});ns_onclick(a,'',subscriptionLogstring,'clickout',event);}catch(e){}}});}});}else{$('.apiSubscriptionForm',this.el).hide();$('.orderPromoteButton',this.el).show();}});}
api.mittaricount=function(mittariUrl){mittariUrl+='?ts='+(new Date()).getTime();if(document.images){var img=new Image();img.src=mittariUrl;}else{document.write('<img src="'+mittariUrl+'" width="1" height="1" alt="">');}}
api.tvguide={};api.tvguide.FrontPageTVGuide=function(data,imageUrl,numEventsPerChannel,gfxUrl){var that=this;api.tvguide.instance=this;var htmlComponent=$("<section/>",{'class':'frontPageTVGuide'});var channelList=[];this.getHTMLComponent=function(){return htmlComponent;}
this.createImageUrl=function(externalUrl){if(!externalUrl){return null;}
return imageUrl+"/external/a/"+encodeURIComponent(externalUrl);}
var header=$("<header/>");var heading=$("<h1/>",{text:'På TV i dag'});header.append(heading);var tagline=$('<p>',{text:'TV-programmet leveres av'});var linkToMeetv=$('<a/>',{href:'http://www.meetv.no/overview','class':"wholeGuideImage"});var meetvLogo=$("<img/>",{src:gfxUrl+'/resources/web/gfx/tvguide/meetv_land_118x20.png',width:118,height:20,alt:'meetv','class':'meetvLogo'});linkToMeetv.append(meetvLogo);tagline.append(linkToMeetv);header.append(tagline);htmlComponent.append(header);channelList=new api.tvguide.ChannelList(data.channels,numEventsPerChannel);htmlComponent.append(channelList.getHTMLComponent());var nav=new api.tvguide.Navigation(channelList.getHTMLComponent());htmlComponent.append(nav.getHTMLComponent());var categories=$("<section/>",{'class':'categories'});var linkToMeetv=$('<a/>',{href:'http://www.meetv.no/overview','class':"wholeGuide",text:'Se hele TV-guiden'});categories.append(linkToMeetv);htmlComponent.append(categories);todaysEvents=new api.tvguide.RecommendedEvents(data.recommendations.today,"recommendedEvents","Dagens anbefalinger",8);categories.append(todaysEvents.getHTMLComponent());todaysFilms=new api.tvguide.RecommendedEvents(data.recommendations.films,"recommendedFilms","Film",4);categories.append(todaysFilms.getHTMLComponent());var ad=$("<iframe/>",{'class':'ad',scrolling:'no',frameBorder:0,marginWidth:0,marginHeight:0});if(data.recommendations.advertisement){$(window).load(function(){if(ad[0]&&ad[0].contentDocument){ad[0].contentDocument.write(data.recommendations.advertisement);}});}
categories.append(ad);}
api.tvguide.Navigation=function(scrollParent){var htmlComponent=$("<nav/>"),leftBtn=$("<button/>",{text:'Forrige','class':'leftBtn',disabled:'disabled'}),rightBtn=$("<button/>",{text:'Neste','class':'rightBtn'}),pane=$(scrollParent[0]).find('.scrollPane')[0],duration=1500;var switchChannels=function(e,direction){e.target.disabled='disabled';$(e.target).siblings()[0].disabled='';$(pane).animate({marginLeft:direction},duration,'easeOutQuad');};htmlComponent.append(leftBtn);htmlComponent.append(rightBtn);$(leftBtn).bind('click',function(e){switchChannels(e,0)});$(rightBtn).bind('click',function(e){switchChannels(e,-1000+'px')});this.getHTMLComponent=function(){return htmlComponent;}};api.tvguide.ChannelList=function(channels,numEventsPerChannel){var that=this;var htmlComponent=$("<section/>",{'class':'channelList'});var scrollPane=$("<div/>",{'class':'scrollPane'});htmlComponent.append(scrollPane);var channelBoxes=[];this.getHTMLComponent=function(){return htmlComponent;};for(var i=0,l=channels.length;i<l;i++){var channel=channels[i];var channelBox=new api.tvguide.ChannelBox(channel,numEventsPerChannel);var channelBoxComponent=channelBox.getHTMLComponent()[0];channelBoxes.push(channelBox);scrollPane.append(channelBoxComponent);channelBox.getHTMLComponent().click(function(e){api.tvguide.toggleDetails.call(this,e)});}
if(!$.support.opacity){$(this.getHTMLComponent()).find('ul li:nth-child(even)').addClass('even');}}
api.tvguide.ChannelBox=function(channel,numEvents){var that=this;var htmlComponent=$("<article/>",{'class':'channelBox'});var eventList=null;this.getHTMLComponent=function(){return htmlComponent;}
function initialize(){var heading=$("<header/>");if(channel.url){$(heading).bind('click',function(){location.href=channel.url}).css({cursor:'pointer'});}
var header=$("<h1/>",{'class':'icon icon-'+channel.textId.toLowerCase(),text:channel.name});heading.append(header);htmlComponent.append(heading);eventList=new api.tvguide.ChannelEventList(channel.events,numEvents);htmlComponent.append(eventList.getHTMLComponent());}
initialize();}
api.tvguide.ChannelEventList=function(events,numEvents){var that=this;var eventList=[];var updateCurrentTimeTimeout=null;var htmlComponent=$("<ul/>",{'class':'eventList'});function scheduleCurrentTimeUpdateAt(time){if(updateCurrentTimeTimeout!=null){clearTimeout(updateCurrentTimeTimeout);}
var now=new Date();var millisecondsUntilTime=time.getTime()-now.getTime();var updateRunningPrograms=setTimeout(function(){that.setCurrentTime(new Date());},millisecondsUntilTime);}
function removeOldEvents(firstFutureIndex){for(var i=firstFutureIndex-2;i!=null&&i>=0;i--){var event=eventList[i];if(!event.isPrevious()){event.removeFromDom();}}}
this.getHTMLComponent=function(){return htmlComponent;}
this.setCurrentTime=function(currentTime){var firstFutureIndex=null;var visibleEventsSoFar=0;for(var i=0,l=eventList.length;i<l;i++){var event=eventList[i];event.setCurrentTime(currentTime);if(event.isPresent()){if(i>0){eventList[i-1].setPrevious();visibleEventsSoFar++;}
visibleEventsSoFar++;}
if(firstFutureIndex==null&&event.isFuture()){firstFutureIndex=i;removeOldEvents(firstFutureIndex);event.setNext();if(i>0&&!eventList[i-1].isPresent()){eventList[i-1].setPrevious();visibleEventsSoFar++;}
scheduleCurrentTimeUpdateAt(event.getStartTime());}
if(firstFutureIndex!=null){if(visibleEventsSoFar<numEvents){visibleEventsSoFar++;event.setDistant(false);}else{event.setDistant(true);}}}}
for(var i=0,l=events.length;i<l;i++){var event=new api.tvguide.Event(events[i]);eventList.push(event);htmlComponent.append(event.getMiniViewElements());}
this.setCurrentTime(new Date());}
api.tvguide.RecommendedEvents=function(events,cssClass,title,num_large){var that=this;var htmlComponent=$("<article/>",{'class':cssClass});this.getHTMLComponent=function(){return htmlComponent;}
function initialize(){var heading=$("<h1/>",{text:title});htmlComponent.append(heading);if(events.length>0){var largeEventList=$("<ul/>");htmlComponent.append(largeEventList);while(num_large-->0&&events.length>0){var largeEvent=new api.tvguide.Event(events.shift());largeEventList.append(largeEvent.getLargeViewElements());}}}
initialize();}
api.tvguide.Event=function(event){var that=this;var htmlComponents=null;var currentTime=new Date();function leadingZero(num){return num>9?""+num:"0"+num;}
function dateToTimeString(datetime){return leadingZero(datetime.getHours())+":"+leadingZero(datetime.getMinutes());}
function dateToDateTimeString(datetime){var date=datetime.getFullYear()+"-"+leadingZero(datetime.getMonth())+"-"+leadingZero(datetime.getDate());var time=leadingZero(datetime.getHours())+":"+
leadingZero(datetime.getMinutes())+":"+
leadingZero(datetime.getSeconds());return date+"T"+time;}
function createTimeElement(datetime){var time=$("<time/>",{'class':'startTime',datetime:dateToDateTimeString(datetime),text:dateToTimeString(datetime)});return time;}
function addDescriptionContents(container,description){if(event.description){container.text(description+" ");}
var readMore=$("<a/>",{'class':'readMore',href:that.getUrl(),title:'Les mer på meetv.no',text:'(les mer)'});container.append(readMore);}
this.getImageUrl=function(){return api.tvguide.instance.createImageUrl(event.image);}
this.getUrl=function(){return event.url;}
this.getStartTime=function(){return new Date(event.startEpoch*1000);}
this.getFinishTime=function(){return new Date(event.finishEpoch*1000);}
this.isPresent=function(){return that.getStartTime()<=currentTime&&that.getFinishTime()>currentTime;}
this.isFuture=function(){return that.getStartTime()>currentTime;}
this.setCurrentTime=function(newCurrentTime){if(!htmlComponents){return;}
currentTime=newCurrentTime;htmlComponents.removeClass("past");htmlComponents.removeClass("present");htmlComponents.removeClass("future");htmlComponents.removeClass("next");htmlComponents.removeClass("previous");if(currentTime>=that.getFinishTime()){htmlComponents.addClass("past");}else if(currentTime<that.getStartTime()){htmlComponents.addClass("future");}else{htmlComponents.addClass("present");}}
this.setNext=function(){if(htmlComponents!=null){htmlComponents.addClass("next");}}
this.setDistant=function(on){if(htmlComponents==null){return;}
if(on){htmlComponents.addClass("distant");}else{setTimeout(function(){htmlComponents.fadeIn("slow",function(){$(this).removeClass("distant");});},1000);}}
this.setPrevious=function(){if(htmlComponents!=null){htmlComponents.addClass("previous");}}
this.isPrevious=function(){return htmlComponents!=null&&htmlComponents.hasClass("previous");}
this.getMiniViewElements=function(){var eventTime=$("<li/>",{'class':'event vevent'});var evening=that.getStartTime();evening.setHours(18);evening.setMinutes(0);if(that.getFinishTime()<evening){eventTime.addClass("morning");}else{eventTime.addClass("evening");}
var header=$("<h2/>");var startTime=createTimeElement(that.getStartTime());startTime.addClass("dtstart");header.append(startTime);var finishTime=createTimeElement(that.getFinishTime());finishTime.prepend(document.createTextNode("-"));finishTime.addClass("dtend");header.append(finishTime);var summary=$("<span/>",{'class':'summary',text:event.title});if(event.channel){var channel=$("<span/>",{'class':'channel',text:", "+event.channel.name});summary.append(channel);}
header.append(summary);eventTime.append(header);eventTime.addClass("hasDescription");var description=$("<div/>",{'class':'description'});addDescriptionContents(description,event.description);eventTime.append(description);htmlComponents=eventTime;return htmlComponents;}
this.getLargeViewElements=function(){var eventEl=$("<li/>",{'class':'event large vevent'});if(event.description)eventEl.addClass("hasDescription");if(event.image){var figure=$("<figure/>");var image=$("<img/>",{src:that.getImageUrl()});figure.append(image);eventEl.append(figure);}
var header=$("<h2/>");var summary=$("<span/>",{'class':'summary',text:event.title});header.append(summary);header.append(document.createTextNode("["));var startTime=createTimeElement(that.getStartTime());startTime.addClass("dtstart");header.append(startTime);var finishTime=createTimeElement(that.getFinishTime());finishTime.prepend(document.createTextNode("-"));finishTime.addClass("dtend");header.append(finishTime);header.append(document.createTextNode(" "));var channel=$("<span/>",{'class':'channel',text:event.channel.name});header.append(channel);header.append(document.createTextNode("]"));eventEl.append(header);var eventInfo=$("<p/>",{'class':'description'});var description=event.description.substr(0,60);if(event.description.length>60){description+="... ";}
addDescriptionContents(eventInfo,description);eventEl.append(eventInfo);htmlComponents=eventEl;return htmlComponents;}
this.removeFromDom=function(){if(htmlComponents){htmlComponents.slideUp("slow",function(){$(this).remove();});htmlComponents=null;}}};api.tvguide.toggleDetails=function(e){var el=$(e.target).offsetParent();if(!el.hasClass('hasDescription'))return;var collapsedSummaryCSS={whiteSpace:'nowrap',textOverflow:'ellipsis',overflow:'hidden',height:'auto'},expandedSummaryCSS={whiteSpace:'normal',textOverflow:'normal',overflow:'none'},collapsedDescriptionCSS={display:'none'},expandedDescriptionCSS={display:'block'},summaryCollapsedHeight=18;if(el.find('.description:visible').length<1){el.find('.summary').css(expandedSummaryCSS).end().find('h2').css(expandedSummaryCSS).animate({height:el.find('.summary').height()},speed(el.find('.description').height()),'easeOutQuad').end().find('.description').css(expandedDescriptionCSS).end().animate({height:el.find('.description').height()+el.find('.summary').height()},speed(el.find('.description').height()),'easeOutQuad',collapseSiblings);}else{el.animate({height:summaryCollapsedHeight},speed(el.find('.description').height()),'easeInQuad',collapseDescription);}
function speed(descHeight){return descHeight+170;}
function collapseDescription(){$(this).find('h2').css(collapsedSummaryCSS).end().find('.summary').css(collapsedSummaryCSS).end().find('.description').css(collapsedDescriptionCSS)}
function collapseSiblings(){var otherEl=el.siblings().find('.description:visible');otherEl.parent().animate({height:summaryCollapsedHeight},speed(otherEl.height()),'easeInQuad',collapseDescription);}};api.Twitter=function(){var update=true;var numMsg=$('#numMsg').val();var showMsg=new Array(numMsg);var callbackEffectTwitter=function(){var tema=encodeURI($('#tema').val());var nBoxWindow=$('#nBoxWindow').val();$('#twitterTema').html(tema.replace("_"," "));$('#twitter').css({'width':$('#widthWindow').val()+'px'});$('#twitterList').css({'height':$('#heightList').val()+'px'});var data='callback=?&q='+tema;var url='http://search.twitter.com/search.json';var datatype='json';$.ajax({type:"GET",url:url,data:data,dataType:datatype,async:false,error:function(XMLHttpRequest,textStatus,errorThrown){alert("error"+XMLHttpRequest+"<- "+textStatus+"<- "+errorThrown+"<- ");},success:function(data){if(showMsg[0].id==null){saveMsg(data.results);}else{updateMsg(data.results);}
if(update&&showMsg.length>0){$.each(showMsg,function(i){if(i%2==0){$('<li>').attr('id',tema+"_"+nBoxWindow+showMsg[i].id).prependTo('#twitterList').addClass('tweetstatus li2rm').prependTo('#twitterList').hide().slideDown(1500);}else{$('<li>').attr('id',tema+"_"+nBoxWindow+showMsg[i].id).prependTo('#twitterList').addClass('li2rm').prependTo('#twitterList').hide().slideDown(1500);}
$("#"+tema+"_"+nBoxWindow+showMsg[i].id).append($('<span>').addClass('tweetBody').attr('id','tweetBody_'+nBoxWindow+i)).hide().slideDown(1000);$('#tweetBody_'+nBoxWindow+i).append($('<span>').addClass('tweetAuthor').attr('id','tweetAuthor_'+nBoxWindow+showMsg[i].from_user_id)).hide().slideDown(1000);$('#tweetAuthor_'+nBoxWindow+showMsg[i].from_user_id).append($('<a>').addClass('tweetProfilePic').attr('href','http://twitter.com/'+showMsg[i].from_user).attr('id','tweetProfilePic_'+nBoxWindow+i)).hide().slideDown(1000);$('#tweetProfilePic_'+nBoxWindow+i).append($('<img>').attr('src',showMsg[i].profile_image_url).attr('alt',showMsg[i].from_user+"_bilde")).hide().slideDown(1000);$('#tweetBody_'+nBoxWindow+i).append($('<a>').attr('href','http://twitter.com/'+showMsg[i].from_user).addClass('tweetAuthorUrl').attr('id','tweetAuthorUrl_'+nBoxWindow+i)).hide().slideDown(1000);$('#tweetAuthorUrl_'+nBoxWindow+i).html(showMsg[i].from_user);$('#tweetBody_'+nBoxWindow+i).append($('<span>').attr('id','tweetTime_'+nBoxWindow+i).addClass('tweetTime')).hide().slideDown(1000);$('#tweetTime_'+nBoxWindow+i).append($('<a>').attr('href','http://twitter.com/'+showMsg[i].from_user+'/statuses/'+showMsg[i].id).attr('id','create_at_'+nBoxWindow+i)).hide().slideDown(1000);$('#create_at_'+nBoxWindow+i).html(showMsg[i].created_at);});}},complete:function(XMLHttpRequest,textStatus){setTimeout("callbackEffectTwitter()",5000);}});};var saveMsg=function(msgs){update=true;$.each(msgs,function(i){for(i=0;i<msgs.length;i++){if(i==numMsg)return false;showMsg[i]=new Array(5);showMsg[i].id=msgs[numMsg-i].id;showMsg[i].from_user_id=msgs[numMsg-i].from_user_id;showMsg[i].from_user=msgs[numMsg-i].from_user;showMsg[i].profile_image_url=msgs[numMsg-i].profile_image_url;showMsg[i].created_at=msgs[numMsg-i].created_at;}});};var updateMsg=function(msgs){update=false;$.each(msgs,function(i){if(update){showMsg.push(msgs[msgs.length-i-1]);}
if(showMsg[numMsg-1].id==msgs[msgs.length-i-1].id){if(i<msgs.length-1){update=true;}}});if(update){remBoxMsg();remMsg();}};var remMsg=function(){while(showMsg.length>numMsg){showMsg.shift();}};var remBoxMsg=function(){$('.li2rm').remove();};callbackEffectTwitter();};function showMoreVideos(button,el){var vidContainer=el.querySelector('.apiVidMagContent'),videos=vidContainer.querySelectorAll('a'),len=videos.length,visibleElements=0,visibleCounter=0;for(var i=0;i<len;i+=1){if(videos[i].className.indexOf('visible')==-1&&visibleCounter<8){videos[i].className=videos[i].className.replace('hidden','visible');visibleCounter+=1;}}
visibleElements=el.querySelectorAll("a.visible").length;if(visibleElements===len){button.style.display='none';}}
api.vplog=function(p){this.debug=false;this.delay=0.3;this.percent=1;this.elements=[];for(var i in p)this[i]=p[i];this.timer=null;this.top=0;this.height=0;this.inView=[];this.viewport={};this.active=false;this.isLogged={};this.height=this.getViewportHeight();var self=this;if(window.addEventListener){window.addEventListener("resize",function(){self.resize();},false);window.addEventListener("scroll",function(){self.startScroll();},false);window.addEventListener("unload",function(){self.send();},false);}else if(window.attachEvent){window.attachEvent("onresize",function(){self.resize();});window.attachEvent("onscroll",function(){self.startScroll();});window.attachEvent("onunload",function(){self.send();});}else if(document.getElementById){window.onresize=function(){self.resize();};window.onscroll=function(){self.startScroll();};window.onunload=function(){self.send();};}
if(this.debug){var div=this.console=api.bh("div",{ih:"Viewport log ready...",cl:"apiViewportConsole"})
document.getElementsByTagName("body")[0].appendChild(div);}
this.startScroll();}
api.vplog.prototype.resize=function(){this.height=this.getViewportHeight();this.startScroll()};api.vplog.prototype.$=function(x){return document.getElementById(x);};api.vplog.prototype.getElementPos=function(el){if(typeof(el.offsetParent)!='undefined'){for(var posY=0;el;el=el.offsetParent)posY+=el.offsetTop;return posY;}else return el.y;};api.vplog.prototype.getViewportTop=function(){var Y=0;if(typeof(window.pageYOffset)=='number')Y=window.pageYOffset;else if(document.body&&(document.body.scrollLeft||document.body.scrollTop))Y=document.body.scrollTop;else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop))Y=document.documentElement.scrollTop;return Y;};api.vplog.prototype.getViewportHeight=function(){return(window.innerHeight)!=null?window.innerHeight:(document.documentElement&&document.documentElement.clientHeight)?document.documentElement.clientHeight:(document.body!=null)?document.body.clientHeight:null;};api.vplog.prototype.startScroll=function(){this.top=this.getViewportTop();if(this.active)clearTimeout(this.timer);var self=this;this.timer=setTimeout(function(){self.report()},this.delay*1000);this.active=true;};api.vplog.prototype.report=function(){if(!this.initialized){for(var i=0;i<this.elements.length;i++){if(!!this.$(this.elements[i].id)){this.elements[i].top=this.getElementPos(this.$(this.elements[i].id));this.elements[i].height=this.$(this.elements[i].id).offsetHeight;}}
this.initialized=true;}
for(var i=0;i<this.elements.length;i++){if(!!this.$(this.elements[i].id)){var e=this.elements[i];var x=Math.round((e.height/100)*(100-this.percent));if(((e.top+e.height)<(this.top+this.height+x))){if(!this.isLogged[e.id]){this.isLogged[e.id]=true;this.inView.push(e.name);}}}}
if(this.debug){this.console.innerHTML="<strong>In or above viewport:</strong><br>"+this.inView.join("<br>");}};api.vplog.prototype.send=function(){var img=new Image();img.src=this.ns_url+"&viewports="+this.inView.join(";");};api.OrigoCalendar=function(el,itemsToShow){this.el=el;var self=this;this.itemsToShow=itemsToShow;this.tabs={};this.activeTab=$(".origoCalendar .eventContainer li.active").first().attr("data");this.currentEventList=$(".origoCalendar .eventList.active");this.updateScrollStatus=function(step){var rest=0;if(step>1){rest=step-1;step=1;}else if(step<-1){rest=step+1;step=-1;}
var tab=self.tabs[self.activeTab];if(!tab){var numPastArticles=self.currentEventList.find("article.past").size();var numTotalEvents=self.currentEventList.find("article").size();tab={scrollStatus:(numTotalEvents-numPastArticles<self.itemsToShow?numTotalEvents-self.itemsToShow:numPastArticles),totalEvents:numTotalEvents};self.tabs[self.activeTab]=tab;}
tab.scrollStatus+=step;self.currentEventList.find("article").each(function showNewEventsAndHideOld(index){if(index>=tab.scrollStatus&&index<tab.scrollStatus+self.itemsToShow){if(!$(this).hasClass("visible")){$(this).slideDown("easeOut",function(){$(this).addClass("visible");});}}else{if($(this).hasClass("visible")){$(this).slideUp("easeOut",function(){$(this).removeClass("visible");});}}});if(tab.totalEvents-tab.scrollStatus<=self.itemsToShow){self.currentEventList.find(".down").addClass("disabled");}else{self.currentEventList.find(".down").removeClass("disabled");}
if(tab.scrollStatus<=0){self.currentEventList.find(".up").addClass("disabled");}else{self.currentEventList.find(".up").removeClass("disabled");}
if(rest!=0){self.updateScrollStatus(rest);}}
updateDetailsEllipsis();self.updateScrollStatus(0);$(".origoCalendar .eventContainer li").click(function chooseActiveCalendarTab(n){$(".origoCalendar .eventContainer li.active").removeClass("active");$(this).addClass("active");self.activeTab=$(this).attr("data");self.currentEventList=$("#origoCalDay"+self.activeTab.replace(".","\\."));self.updateScrollStatus(0);$(".origoCalendar .eventList.active").fadeOut("easeOut",function(){$(this).removeClass("active");});self.currentEventList.fadeIn("easeOut",function(){$(this).addClass("active");});});$(".origoCalendar .upDown .up").click(function scrollUpInCalendarEventList(){if(!$(this).hasClass("disabled")){self.updateScrollStatus(-5);}});$(".origoCalendar .upDown .down").click(function scrollDownInCalendarEventList(){if(!$(this).hasClass("disabled")){self.updateScrollStatus(5);}});$(".origoCalendar .detailContainer .refresh").click(function refreshVisibleDetailedCalendarEvent(){var current=$(".origoCalendar .detailContainer article.current");var next=current.next("article");if(next.length<1){next=current.siblings("article").first();}
current.fadeOut("easeOut",function(){$(this).removeClass("current");});next.fadeIn("easeOut",function(){$(this).addClass("current");});updateDetailsEllipsis();});$(".origoCalendar .bottomLeft .untouched").focus(function(){var input=$(this);if(input.hasClass("untouched")){input.removeClass("untouched");input.attr("value","");}});function updateDetailsEllipsis(){$(".origoCalendar article.recommended").each(function setDotDotOnFirstPElement(){var firstParagraph=$(this).find(".ellipsis p:first");if(firstParagraph.size()>0){firstParagraph.dotdotdot();$(this).find(".ellipsis p:gt(0)").css("display","none");}});}};api.OrigoCalendar=function(el,itemsToShow){this.el=el;var self=this;this.itemsToShow=itemsToShow;this.tabs={};this.activeTab=$(".origoCalendar .eventContainer li.active").first().attr("data");this.currentEventList=$(".origoCalendar .eventList.active");this.updateScrollStatus=function(step){var rest=0;if(step>1){rest=step-1;step=1;}else if(step<-1){rest=step+1;step=-1;}
var tab=self.tabs[self.activeTab];if(!tab){var numPastArticles=self.currentEventList.find("article.past").size();var numTotalEvents=self.currentEventList.find("article").size();tab={scrollStatus:(numTotalEvents-numPastArticles<self.itemsToShow?numTotalEvents-self.itemsToShow:numPastArticles),totalEvents:numTotalEvents};self.tabs[self.activeTab]=tab;}
tab.scrollStatus+=step;self.currentEventList.find("article").each(function showNewEventsAndHideOld(index){if(index>=tab.scrollStatus&&index<tab.scrollStatus+self.itemsToShow){if(!$(this).hasClass("visible")){$(this).slideDown("easeOut",function(){$(this).addClass("visible");});}}else{if($(this).hasClass("visible")){$(this).slideUp("easeOut",function(){$(this).removeClass("visible");});}}});if(tab.totalEvents-tab.scrollStatus<=self.itemsToShow){self.currentEventList.find(".down").addClass("disabled");}else{self.currentEventList.find(".down").removeClass("disabled");}
if(tab.scrollStatus<=0){self.currentEventList.find(".up").addClass("disabled");}else{self.currentEventList.find(".up").removeClass("disabled");}
if(rest!=0){self.updateScrollStatus(rest);}}
updateDetailsEllipsis();self.updateScrollStatus(0);$(".origoCalendar .eventContainer li").click(function chooseActiveCalendarTab(n){$(".origoCalendar .eventContainer li.active").removeClass("active");$(this).addClass("active");self.activeTab=$(this).attr("data");self.currentEventList=$("#origoCalDay"+self.activeTab.replace(".","\\."));self.updateScrollStatus(0);$(".origoCalendar .eventList.active").fadeOut("easeOut",function(){$(this).removeClass("active");});self.currentEventList.fadeIn("easeOut",function(){$(this).addClass("active");});});$(".origoCalendar .upDown .up").click(function scrollUpInCalendarEventList(){if(!$(this).hasClass("disabled")){self.updateScrollStatus(-5);}});$(".origoCalendar .upDown .down").click(function scrollDownInCalendarEventList(){if(!$(this).hasClass("disabled")){self.updateScrollStatus(5);}});$(".origoCalendar .detailContainer .refresh").click(function refreshVisibleDetailedCalendarEvent(){var current=$(".origoCalendar .detailContainer article.current");var next=current.next("article");if(next.length<1){next=current.siblings("article").first();}
current.fadeOut("easeOut",function(){$(this).removeClass("current");});next.fadeIn("easeOut",function(){$(this).addClass("current");});updateDetailsEllipsis();});$(".origoCalendar .bottomLeft .untouched").focus(function(){var input=$(this);if(input.hasClass("untouched")){input.removeClass("untouched");input.attr("value","");}});function updateDetailsEllipsis(){$(".origoCalendar article.recommended").each(function setDotDotOnFirstPElement(){var firstParagraph=$(this).find(".ellipsis p:first");if(firstParagraph.size()>0){firstParagraph.dotdotdot();$(this).find(".ellipsis p:gt(0)").css("display","none");}});}};fumanchu.register.template("apiCalendarTemplate",'<header><h1 class="mainTitle" data-collect-as="title" class="invisible"></h1></header><div class="detailContainer invisible" data-collect-as="detailsContainer"><header><button class="button icon refresh" data-collect-as="refreshButton"></button><h2 data-collect-as="recommendedTitle" class="detailTitle invisible"></h2></header><div class="recommendedEvents" data-collect-as="recommendedEvents"></div></div><div class="eventContainer"><div class="navbar" data-collect-as="navbar">{{#eventlists}}<label><input name="apiKalenderTab" type="radio" data-collect-as="tabs" data-collect-type="array"><div>{{title}}</div></label>{{/eventlists}}</div><div class="eventListContainer"><div class="eventListsWrapper" data-collect-as="eventListsWrapper">{{#eventlists}}<div data-event-list="{{title}}" data-collect-as="eventLists" data-collect-type="array" class="eventList init"></div>{{/eventlists}}</div></div><div class="buttons"><button class="button icon arrow up" data-collect-as="buttons" data-collect-type="array" disabled></button><button class="button icon arrow down" data-collect-as="buttons" data-collect-type="array" disabled></button><a class="button icon pencil" data-collect-as="addEventLink"></a><a class="button icon eye invisible" data-collect-as="gotoCalendarLink"></a></div></div><a class="bagera_logo" href="http://bagera.no/"></a>');var api=api||{};api.calendar={},api.calendar.utils={},api.calendar.utils.createCORSRequest=function(url){var xhr=new XMLHttpRequest();return"withCredentials"in xhr?xhr.open("GET",url,!0):"undefined"!=typeof XDomainRequest?(xhr=new XDomainRequest(),xhr.timeout=0,xhr.open("GET",url)):xhr=null,xhr;},api.calendar.utils.getData=function(callback,date,domain){"use strict";function transferTimedout(){}
function transferProgressing(){}
function transferComplete(){callback.call(JSON.parse(this.responseText));}
function transferFailed(e){}
var url="http://bagerabrowser.o5.no/api/bagerabrowser/v1/apdm/"+domain+"/events";"recommended"==date||"popular"==date?url+="/"+date:"meta"==date?url="http://pulp.o5.no/api/pulp/v1/apdm/publications/"+domain+"/applications/bagera":"publication"==date?url="http://pulp.o5.no/api/pulp/v1/apdm/publications/"+domain:url+="?date="+date.replace(/-/g,"/");var xhr=api.calendar.utils.createCORSRequest(url);xhr&&(xhr.onload=transferComplete,xhr.onerror=transferFailed,xhr.onprogress=transferProgressing,xhr.ontimeout=transferTimedout,setTimeout(function(){xhr.send();},0));},api.calendar.utils.getTransitionEndEventName=function(){"use strict";var transitionName=api.calendar.utils.getVendorPropertyName("transition");if(null==transitionName)return null;var transitionEndNames={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",MSTransition:"msTransitionEnd"};return transitionEndNames[transitionName];},api.calendar.utils.getVendorPropertyName=function(prop){"use strict";var div=document.createElement("div"),propName=null;if(prop in div.style)propName=prop;else{var prefixes=["Moz","Webkit","O","ms"],prop_=prop.charAt(0).toUpperCase()+prop.substr(1);prefixes.forEach(function(prefix){var vendorProp=prefix+prop_;vendorProp in div.style&&(propName=vendorProp);});}
return div=null,propName;},api.calendar.utils.padWithZero=function(num){return num>9?num:"0"+num;},api.calendar.utils.fixAmpersands=function(txt){return txt.replace(/&amp;/g,"&");},api.calendar.utils.formatText=function(){return function(text,render){return api.calendar.utils.fixAmpersands(render(text));};},api.calendar.utils.formatTime=function(){return function(date,render){return"Kl. "+api.calendar.utils.getTime(new Date(render(date)));};},api.calendar.utils.formatDateAndTime=function(){return function(date,render){var now=new Date(),then=new Date(render(date)),diff=(then.getTime()-now.getTime())/864e5;return api.calendar.utils.getDay(~~diff,1).title+" kl. "+api.calendar.utils.getTime(then);};},api.calendar.utils.truncateBodyTxt=function(){return function(txt,render){return render(this.truncatedTxt?this.truncatedTxt:txt);};},api.calendar.utils.getTime=function(date){return api.calendar.utils.padWithZero(date.getHours())+"."+api.calendar.utils.padWithZero(date.getMinutes());},api.calendar.utils.getDay=function(offset,includeDayName){var title,monthNames=["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],dayNames=["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],dt=new Date();switch(dt.setDate(dt.getDate()+offset),offset){case 0:title="I dag "+dt.getDate()+". "+monthNames[dt.getMonth()];break;case 1:title="I morgen";break;default:title=dt.getDate()+". "+monthNames[dt.getMonth()],includeDayName||(title=dayNames[dt.getDay()]);}
return{title:title,date:dt.toISOString().split("T")[0]};},api.calendar.utils.buildEventList=function(events,date,lists,callback){"recommended"==date?lists.setEvents(events,callback):lists["list-"+date].setEvents(events.today.concat(events.whole_day));},api.calendar.ScrollButtons=function(buttons,activeList){"use strict";function updateButtonState(array){self._buttons.forEach(function(button,i){array[i]?button.setAttribute("disabled","disabled"):button.removeAttribute("disabled");});}
function _setActiveList(list){self._activeList=list,updateButtonState([self._activeList.atTop(),self._activeList.atBottom()]);}
var self=this;self._buttons=buttons,_setActiveList(activeList),self._buttons.forEach(function(button,i){button.addEventListener("click",function(){0===i?self._activeList.showPrevious():self._activeList.showNext(),updateButtonState([self._activeList.atTop(),self._activeList.atBottom()]);},!1);}),this.setActiveList=_setActiveList,this.updateButtonState=updateButtonState;},api.calendar.Image=function(version,url,eventIndex){this.el=document.createElement("img"),this.eventIndex=eventIndex,this.loaded=!1,this.el.classList.add("imgFrame"),this.el.classList.add("recommended"===version?"imgFrameLarge":"imgFrameSmall"),-1===url.indexOf("graph.facebook.com")?this.getImageVersion(version,url):this.getFacebookImage(version,url+"&redirect=false");},api.calendar.Image.prototype={getImageVersion:function(version,url){var strategy,size,newImgUrl,crop="";"recommended"==version?(size=135,strategy="s"):(size=60,crop="-tc_"+size+"_"+size+"_c_t",strategy="l"),newImgUrl="http://g.api.no/obscura/API/dynamic/r1/external/tr_"+size+"_"+size+"_"+strategy+"_t"+crop+"/_/"+encodeURIComponent(url),this.el.setAttribute("src",newImgUrl);},getFacebookImage:function(version,url){function transferComplete(){var newUrl=JSON.parse(this.responseText).data.url;self.getImageVersion(version,newUrl);}
function transferFailed(){}
function transferProgressing(){}
function transferTimedout(){}
var self=this,xhr=api.calendar.utils.createCORSRequest(url);xhr&&(xhr.onload=transferComplete,xhr.onerror=transferFailed,xhr.onprogress=transferProgressing,xhr.ontimeout=transferTimedout,setTimeout(function(){xhr.send();},0));}},api.calendar.EventList=function(el){"use strict";var self=this;self.el=el,self.transitionEnd=api.calendar.utils.getTransitionEndEventName(),self.transform=api.calendar.utils.getVendorPropertyName("transform"),this.lastEvent=0,this.buttons=null,this.range=null,self.state=self.states[0],self.config={visibleItems:3,eventElHeight:100},self.events=[],self.cache=[];},api.calendar.EventList.prototype={states:["empty","loading","ready","animating"],getState:function(){return this.state;},setState:function(i){this.state=this.states[i];},getRange:function(){var els=Array.prototype.slice.call(this.el.querySelectorAll("[data-event-index]"),0),first=~~els.shift().getAttribute("data-event-index"),last=~~els.pop().getAttribute("data-event-index"),len=last+1-first,range={current:{start:first,end:last},previous:{start:Math.max(first-len,0),end:Math.max(last-len,0)},next:{start:Math.min(first+len,this.lastEvent),end:Math.min(last+len,this.lastEvent)}};return range;},showNext:function(){"use strict";function cacheNextEvents(){}
var self=this;if(this.state!=this.states[3]){this.state=this.states[3];var range=this.range,start=range.next.start,end=range.next.end,numOfNewEvents=Math.abs(start-end)+1,list=this.buildList(start,end,!1,!1);if(this.el.appendChild(list),end<this.lastEvent){var nextEventsStart=end+1,nextEventsEnd=Math.min(this.lastEvent,nextEventsStart+this.config.visibleItems);cacheNextEvents=function(){self.buildList(nextEventsStart,nextEventsEnd,!0,!1);};}
null!=this.transitionEnd?this.animate(0,numOfNewEvents,cacheNextEvents):(this.removeRenderedEvents(0,numOfNewEvents),this.state=this.states[2],this.range=this.getRange(),cacheNextEvents());}},showPrevious:function(){"use strict";function cachePreviousEvents(){}
if(this.state!=this.states[3]){var range=this.range;this.state=this.states[3];var self=this,start=range.previous.start,end=range.previous.end,numOfNewEvents=Math.abs(start-end)+1,list=this.buildList(start,end,!1,!1);if(this.el.insertBefore(list,this.el.firstChild),start>0){var previousEventsStart=Math.max(0,start-this.config.visibleItems),previousEventsEnd=start-1;cachePreviousEvents=function(){self.buildList(previousEventsStart,previousEventsEnd,!0,!1);};}
null!=this.transitionEnd?this.animate(1,numOfNewEvents,cachePreviousEvents):(this.removeRenderedEvents(1,numOfNewEvents),this.state=this.states[2],this.range=this.getRange(),cachePreviousEvents());}},animate:function(direction,numOfSteps,callback){"use strict";function animationEnd(){self.el.classList.remove("transition"),self.el.style.top="",self.el.style[self.transform]="",self.removeRenderedEvents(direction,numOfSteps),self.el.removeEventListener(self.transitionEnd,animationEnd,!1),self.state=self.states[2],self.range=self.getRange(),null!=self.buttons&&self.buttons.updateButtonState([self.atTop(),self.atBottom()]),callback&&"function"==typeof callback&&callback();}
var self=this,animValue=numOfSteps*this.config.eventElHeight;this.el.classList.add("transition"),direction?(this.el.style.top=animValue*-direction+"px",this.el.style[this.transform]="translate(0, "+animValue+"px)"):(this.el.style.top=0,this.el.style[this.transform]="translate(0, "+-1*animValue+"px)"),this.el.addEventListener(this.transitionEnd,animationEnd,!1);},removeRenderedEvents:function(down){"use strict";for(;this.el.childNodes.length>this.config.visibleItems;)this.el.removeChild(down?this.el.lastChild:this.el.firstChild);},setEvents:function(events){"use strict";this.setState(1),this.events=events,events.forEach(function(event,i){event.eventIndex=i;}),this.lastEvent=events.length-1;var now=new Date(),isToday=new Date(events[0].start_time).getDay()==now.getDay(),firstEventIndex=0;if(isToday)for(var i=0;i<this.events.length;i++)if(new Date(this.events[i].start_time)>=now){firstEventIndex=i;break;}
this.initEventList(firstEventIndex),this.setState(2),this.range=this.getRange();},initEventList:function(firstEventIndex){"use strict";function initAnimation(){self.el.classList.remove("init"),null!=self.buttons&&self.buttons.updateButtonState([self.atTop(),self.atBottom()]);}
var self=this,end=Math.min(firstEventIndex+this.config.visibleItems-1,this.lastEvent);if(this.el.appendChild(this.buildList(firstEventIndex,end,!1,!0)),window.setTimeout(initAnimation,10),firstEventIndex>0){var previousEventsStart=Math.max(0,firstEventIndex-this.config.visibleItems),previousEventsEnd=firstEventIndex-1;this.buildList(previousEventsStart,previousEventsEnd,!0);}
if(end<this.lastEvent){var nextEventsStart=end+1,nextEventsEnd=Math.min(this.lastEvent,nextEventsStart+this.config.visibleItems);this.buildList(nextEventsStart,nextEventsEnd,!0);}},buildList:function(start,end,buildCache,init){"use strict";var i=start,j=end+1,fragment=document.createDocumentFragment();if(!buildCache){for(var event,delay=1;j>i;i++)event=this.cache[i]?this.cache[i]:this.cache[i]=this.buildEvent(i),init&&event.event.setAttribute("style","transition-delay: "+delay++/4+"s"),fragment.appendChild(event.event);return fragment;}
for(;j>i;i++)this.cache[i]||(this.cache[i]=this.buildEvent(i));},buildEvent:function(i){"use strict";var event=fumanchu("apiEventListTemplate",this.events[i]),self=this;return this.events[i].image_full&&(event.image=new api.calendar.Image("event",self.events[i].image_full,self.events[i].eventIndex),event.imagePlaceholder.parentNode.replaceChild(event.image.el,event.imagePlaceholder)),event;},atTop:function(){return null===this.range?!0:0===this.range.current.start;},atBottom:function(){return null===this.range?!0:this.range.current.end===this.lastEvent;}},api.calendar.RecommendedEvents=function(el,parent,button){"use strict";function initEventList(){if(!(events.length<1)){var event=buildEvents(0);addToDom(event),events.length>1?(setNextEventIndex(),event=buildEvents(nextEventIndex),addToDom(event),setNextEventIndex()):removeBtn(),showRecommendedEvents(),loadImages(),state=states[2];}}
function setNextEventIndex(){return nextEventIndex=(nextEventIndex+1)%events.length;}
function getNextEvent(){var event=buildEvents(nextEventIndex);addToDom(event),setNextEventIndex();}
function buildEvents(i){if(cache[i])return cache[i];var collection=fumanchu("apiRecommendedEventTemplate",events[i]).collection;return events[i].els=collection,cache[i]=events[i],events[i].image_full&&(events[i].els.image=new api.calendar.Image("recommended",events[i].image_full,events[i].eventIndex),events[i].els.imagePlaceholder.parentNode.replaceChild(events[i].els.image.el,events[i].els.imagePlaceholder)),cache[i];}
function removeBtn(){self.btn.parentNode.removeChild(self.btn);}
function showRecommendedEvents(){parent.classList.remove("invisible");}
function loadImages(){}
function addToDom(event){self.el.appendChild(event.els.event);}
function setEvents(ev,callback){events=ev,events.forEach(function(event,i){event.eventIndex=i;}),initEventList(),typeof callback==typeof Function&&callback.call();}
function getState(){return state;}
function setState(i){state=states[i];}
function flipCard(){events.length<2||state===states[3]||(state=states[3],self.el.classList.add("transition"),self.el.classList.add("flipped"));}
function flipCardAnimationEnd(e){("transitionend"!=e.type||null==e.target.nextSibling)&&(self.el.classList.remove("transition"),self.el.classList.remove("flipped"),self.el.removeChild(self.el.firstChild),getNextEvent(),state=states[2]);}
var self=this,cache=[],events=[],nextEventIndex=0,states=["empty","loading","ready","animating"],state=states[0],transitionEnd=api.calendar.utils.getTransitionEndEventName();self.el=el,self.btn=button,null==transitionEnd?(this.btn.addEventListener("click",flipCardAnimationEnd,!1),this.el.classList.add("no-animation")):(this.el.addEventListener(transitionEnd,flipCardAnimationEnd,!1),this.btn.addEventListener("click",flipCard,!1)),this.setEvents=setEvents,this.getState=getState,this.setState=setState,Object.defineProperty(self,"debug",{get:function(){return{cache:cache,events:events,nextEventIndex:nextEventIndex,setNextEventIndex:setNextEventIndex()};},set:function(){}});},api.calendar.Calendar=function(el,domain){"use strict";function setMode(){var parent=el.parentNode;parent.isEqualNode(document.body)?el.setAttribute("data-mode","responsive"):(el.setAttribute("data-mode","static"),el.setAttribute("data-width",getWidth(parent)));}
function getWidth(el){var width=100;return el.offsetWidth<231?width=25:el.offsetWidth<314?width=33:el.offsetWidth<481?width=50:el.offsetWidth<647?width=66:el.offsetWidth<731&&(width=75),width+"%";}
function setProperties(){self.el=el,self.lists={},self.lists.array=[],self.lists.activeList={},self.lists.previousList={},self.containers={},self.containers.array=[],self.recommendedLists=[],self.config={showDays:4,showOngoing:!0},self.data={eventlists:[],domain:domain};for(var i=0,len=self.config.showDays;len>i;i++){var day=getDay(i);self.data.eventlists.push(day);}
self.config.showOngoing;}
function getParentWidth(){self.el.parentNode.offsetWidth;}
function buildInitialHTML(){fumanchu.register.helpers({formatTime:api.calendar.utils.formatTime,formatDateAndTime:api.calendar.utils.formatDateAndTime,formatText:api.calendar.utils.formatText});var result=fumanchu("apiCalendarTemplate",self.data);addEventLink=result.addEventLink,searchEvents=result.searchEvents,footer=result.footer,gotoCalendarLink=result.gotoCalendarLink,title=result.title,buttons=result.buttons,self.collection=result.collection,getMeta(),result.tabs[0].setAttribute("checked","checked"),result.eventLists[0].classList.add("active"),self.tabs=result.tabs,recommendedTitle=result.recommendedTitle,result.eventLists.forEach(function(list,i){self.lists.array.push(self.lists["list-"+self.data.eventlists[i].date]=new api.calendar.EventList(list));}),el.appendChild(result),self.lists.activeList=self.lists.array[0],self.buttons=new api.calendar.ScrollButtons(result.buttons,self.lists.activeList),self.lists.activeList.buttons=self.buttons,self.recommendedEvents=new api.calendar.RecommendedEvents(result.recommendedEvents,result.detailsContainer,result.refreshButton),self.tabs.forEach(function(tab){tab.addEventListener("change",function(){var clickedTabIndex=self.tabs.indexOf(tab);self.lists.previousList=self.lists.activeList;var activeList=self.lists.activeList=self.lists.array[clickedTabIndex];if(self.buttons.setActiveList(activeList),self.lists.previousList.buttons=null,activeList.buttons=self.buttons,self.eventListsWrapper=result.eventListsWrapper,moveToActiveList(),activeList.getState()===activeList.states[0]){var day=getDay(clickedTabIndex).date;api.calendar.utils.getData(function(){api.calendar.utils.buildEventList(this,day,self.lists);},day,self.data.domain);}},!1);});}
function getMeta(){api.calendar.utils.getData(function(){updatePulpSnippets.call(this);},"meta",domain);}
function updatePulpSnippets(){self.data.textLabels=this.application.custom.textLabels,self.data.textLabels.title=this.application.title,self.data.urls=this.application.custom.urls,self.collection.title.appendChild(document.createTextNode(self.data.textLabels.title)),self.collection.buttons[0].appendChild(document.createTextNode(self.data.textLabels.up)),self.collection.buttons[1].appendChild(document.createTextNode(self.data.textLabels.down)),self.collection.addEventLink.appendChild(document.createTextNode(self.data.textLabels.add)),self.collection.addEventLink.setAttribute("href",self.data.urls.createEvent),self.collection.gotoCalendarLink.appendChild(document.createTextNode("Se hele kalenderen")),self.collection.gotoCalendarLink.setAttribute("href",self.data.urls.index),self.collection.refreshButton.appendChild(document.createTextNode(self.data.textLabels.refresh)),self.collection.recommendedTitle.appendChild(document.createTextNode(self.data.textLabels.popular)),initMustacheTemplates(self.data.urls.showEvent);}
function initMustacheTemplates(eventUrl){fumanchu.register.template("apiEventListTemplate",'{{#.}}<article data-event-index="{{eventIndex}}" data-collect-as="event" class="event"><a href="http://www.'+self.data.domain+eventUrl+'/{{oid}}"><div data-collect-as="imagePlaceholder" class="{{category}} noimage imgFrame imgFrameSmall"></div><div class="origoCalendarEvent"><header><h3 class="eventTitle ellipsis">{{#formatText}}{{title}}{{/formatText}}</h3></header><p class="eventDetails ellipsis"><time class="time icon" datetime="{{start_time}}">{{#formatTime}}{{start_time}}{{/formatTime}}</time><span class="location icon">{{venue.title}}</span></p></div></a></article>{{/.}}'),fumanchu.register.template("apiRecommendedEventTemplate",'{{#.}}<article class="recommendedEvent" data-event-index="{{eventIndex}}" data-collect-as="event"><a href="http://www.'+self.data.domain+eventUrl+'/{{oid}}"><div data-collect-as="imagePlaceholder" class="{{category}} noimage imgFrame imgFrameLarge"></div><h1 class="eventTitle">{{#formatText}}{{title}}{{/formatText}}</h1><p class="eventDetails"><time class="time" datetime="{{start_time}}">{{#formatDateAndTime}}{{start_time}}{{/formatDateAndTime}}</time><br /><span class="location">{{#venue}}{{title}}{{/venue}}</span></p></a></article>{{/.}}'),initFirstEventList();}
function buildTodaysEventList(){api.calendar.utils.buildEventList(this,today,self.lists);}
function buildRecommendedEventList(){api.calendar.utils.buildEventList(this,"recommended",self.recommendedEvents,function(){api.calendar.utils.getData(buildTodaysEventList,today,self.data.domain);});}
function setRecommendedTitle(){api.calendar.utils.getData(function(){self.collection.recommendedTitle.replaceChild(document.createTextNode(this.publication.shortname+" "+self.data.textLabels.recommended),self.collection.recommendedTitle.firstChild);},"publication",domain);}
function buildRecommendedOrPopularEvents(){this.length>0?(buildRecommendedEventList.call(this),setRecommendedTitle()):api.calendar.utils.getData(buildRecommendedEventList,"popular",self.data.domain);}
function initFirstEventList(){api.calendar.utils.getData(buildRecommendedOrPopularEvents,"recommended",self.data.domain);}
function moveToActiveList(){var previousIndex=self.lists.array.indexOf(self.lists.previousList),activeIndex=self.lists.array.indexOf(self.lists.activeList),wrapper=self.eventListsWrapper,xPos=(Math.abs(previousIndex-activeIndex)/2,-100*activeIndex+"%");wrapper.style[transform]="translate("+xPos+", 0)";}
if("function"==typeof addEventListener){var recommendedTitle,footer,addEventLink,searchEvents,gotoCalendarLink,title,buttons,transform=api.calendar.utils.getVendorPropertyName("transform"),self=this,getDay=api.calendar.utils.getDay,today=getDay(0).date;fumanchu.init(),setProperties(),buildInitialHTML(),setMode(),getParentWidth();}};api.commentArticle=function(){var comment_box=document.getElementById("origo_external_embed");comment_box.style.width="530px";comment_box.style.cssFloat="left";}
api.personalbackground={};api.personalbackground.apiPersonaliaTabs=function(domElement){var that=this;this.selectCategory=function(key){$(domElement).find(".category_button.active").removeClass("active");$(domElement).find(".category_button_"+key).addClass("active");$(domElement).find(".category.active").fadeOut("easeOut",function(){$(this).removeClass("active");});$(domElement).find(".category_"+key).fadeIn("easeOut",function(){$(this).addClass("active");});}
$(domElement).find(".category_button").each(function(i,button){var key=$(button).attr("data");$(button).click(function(){that.selectCategory(key);return false;})});}
api.personalbackground={};api.personalbackground.apiPersonaliaTabs=function(domElement){var that=this;this.selectCategory=function(key){$(domElement).find(".category_button.active").removeClass("active");$(domElement).find(".category_button_"+key).addClass("active");$(domElement).find(".category.active").fadeOut("easeOut",function(){$(this).removeClass("active");});$(domElement).find(".category_"+key).fadeIn("easeOut",function(){$(this).addClass("active");});}
$(domElement).find(".category_button").each(function(i,button){var key=$(button).attr("data");$(button).click(function(){that.selectCategory(key);return false;})});}
api.search={setOffset:function(n){var input=api.bh("input",{type:"hidden",name:"offset",value:n});api.$("apiSearchForm").appendChild(input);api.$("apiSearchForm").submit();},setFacet:function(v){v=(v.indexOf("author")>-1)?v.replace(/\s/g,"\\ "):v;var input=api.bh("input",{type:"hidden",name:"fq",value:v.replace(/(\d)(\-|:)/g,"$1\\$2")});api.$("apiFacetsWrap").appendChild(input);api.$("apiSearchForm").submit();},delFacet:function(id){api.$(id).parentNode.removeChild(api.$(id));api.$("apiSearchForm").submit();},newSubmit:function(){api.$("apiFacetsWrap").parentNode.removeChild(api.$("apiFacetsWrap"));}};api.countSiteStatExtraPlay=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.extraplay');}
api.countSiteStatLottoPlay=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.lottoplay');}
api.countSiteStatLottoResult=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.lottoresult');}
api.countSiteStatVikinglottoPlay=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.vikinglottoplay');}
api.countSiteStatVikinglottoResult=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.vikinglottoresult');}
api.countSiteStatKenoPlay=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.kenoplay');}
api.countSiteStatKenoResult=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.kenoresult');}
api.countSiteStatJokerPlay=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.jokerplay');}
api.countSiteStatJokerResult=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.jokerresult');}
api.countSiteStatLangoddsenResult=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.langoddsenresult');}
api.countSiteStatTippingPlay=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.tippingplay');}
api.countSiteStatTippingResult=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.tippingresult');}
api.countSiteStatRikstotoPlay=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.rikstotoplay');}
api.countSiteStatRikstotoResult=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.rikstotoresult');}
api.countSiteStatEurojackpotPlay=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.eurojackpotplay');}
api.countSiteStatEurojackpotResult=function(nedstat_site){api.sitestat(nedstat_site,'spillsenter.eurojackpotresult');}
api.veimelding=function(){this.heading;this.urgency;this.actualcounties=[];this.validFrom;this.messageType;this.ingress;};api.veimelding.list=function(veimeldinger,validFromText,currentPage){var numberOfMessagesToShow=4;var filteredList=[];var startIndex=(currentPage*numberOfMessagesToShow)-numberOfMessagesToShow;var stopIndex=currentPage*numberOfMessagesToShow;var endPage=1;filteredList=api.veimelding.filterList(veimeldinger);endPage=Math.ceil(filteredList.length/numberOfMessagesToShow);if(currentPage<=endPage){$('.api #apiVeimeldingerList').empty();for(melding in filteredList){var outputString="";if(melding>=startIndex&&melding<stopIndex){outputString=api.veimelding.buildOutPutString(filteredList[melding],validFromText);$('#apiVeimeldingerList').append(outputString);}}}
if(currentPage===endPage||endPage==0){$('.api #apiVeimeldinger #veimeldingerNextPage').attr('disabled','disabled');}else{$('.api #apiVeimeldinger #veimeldingerNextPage').removeAttr('disabled');}
if(currentPage===1){$('.api #apiVeimeldinger #veimeldingerPreviousPage').attr('disabled','disabled');}else{$('.api #apiVeimeldinger #veimeldingerPreviousPage').removeAttr('disabled');}};api.veimelding.filterList=function(veimeldinger){var filteredList=[];var selectedCounties=[];var selectedMessageTypes=[];$(".api #apiVeimeldinger #veimeldingerCountyList input:checked").each(function(){selectedCounties.push($(this).attr('value'));});$(".api #apiVeimeldinger #veimeldingerMessageType input:checked").each(function(){selectedMessageTypes.push($(this).attr('value'));});for(melding in veimeldinger){var showMeldingMessageType=false;var showMeldingCounty=false;for(validMessageType in selectedMessageTypes){if(veimeldinger[melding].messageType===selectedMessageTypes[validMessageType]){showMeldingMessageType=true;}}
if(showMeldingMessageType===true){for(county in veimeldinger[melding].actualcounties){for(validCounty in selectedCounties){if(veimeldinger[melding].actualcounties[county]===selectedCounties[validCounty]){showMeldingCounty=true;}}}
if(showMeldingCounty===true){filteredList.push(veimeldinger[melding]);}}}
return filteredList;};api.veimelding.buildOutPutString=function(melding,validFromText){var headingString="";var countiesString="";var validFromString="";var messageTypeString="";var ingressString="";if(melding.urgency==='X'){headingString="<h3 class='urgent'>"+melding.heading+"</h3>";}else{headingString="<h3>"+melding.heading+"</h3>";}
var tmCcountyString="";for(county in melding.actualcounties){tmCcountyString+=melding.actualcounties[county]+" ";}
validFromString=validFromText+": "+melding.validFrom;countiesString="<p>"+tmCcountyString+" <em>"+validFromString+"</em></p>";messageTypeString="<strong>"+melding.messageType+"</strong>";ingressString="<p>"+melding.ingress+"</p>";return"<li>"+headingString+countiesString+messageTypeString+ingressString+"</li>";};var showAboutZett=function(){document.getElementById("aboutZett").style.display='block';document.getElementById("contact").style.display='none';};var showZettContactInformation=function(){document.getElementById("aboutZett").style.display='none';document.getElementById("contact").style.display='block';};